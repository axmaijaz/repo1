<div class="fixed-action-btn" style="bottom: 25px; right: 15px;">

  <a  mdbBtn floating="true" size="md" class="btn btn-dynamic-2c btn-sm waves-light" mdbWavesEffect
    (click)="fixed.toggle()">
    <i class="fa fa-plus fa-lg"></i>
  </a>
  <div class="fixed_collapse" mdbCollapse="isCollapsed" #fixed="bs-collapse">
    <a *ngIf="PatientId" mdbBtn floating="true" size="md"  color="dark" class="waves-light m-0 mb-2" mdbWavesEffect
      (click)="patientNoteModal.toggle()" title="Add Note" ><i class="fa fa-file-text fa-lg"></i></a>
    <!-- <a mdbBtn floating="true" color="yellow" class="darken-1 waves-light" mdbWavesEffect><i
      class="fa fa-baby fa-lg"></i></a> -->
    <!-- <a *ngIf="PatientId" mdbBtn floating="true" color="dark" class="waves-light mb-0" mdbWavesEffect
      (click)="clinicalSummary.toggle()" title="'Clinical Summary'"><i class="fa fa-commenting fa-lg"></i></a> -->
      <a mdbBtn floating="true" *hasClaim="['CanViewFeedback']" size="md" color="dark" class="waves-light m-0 mb-2" mdbWavesEffect
      (click)="feedbackModal.toggle();resetFeedBackForm()" title="Feedback / Complain" >
      <i class="fa fa-comments"></i></a>
      <a mdbBtn floating="true" size="md" color="dark" class="waves-light  m-0 " mdbWavesEffect (click)="toDoList.toggle()"
      title="'To Do List'" ><i class="fa fa-calendar-check-o"></i></a>

  </div>
</div>

<div mdbModal #feedbackModal="mdbModal" class="modal fade" tabindex="-1" role="dialog"
  [config]="{ignoreBackdropClick: true}" aria-labelledby="myfeedbackModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content" >
      <div class="modal-header">
        <button type="button" class="close pull-right" aria-label="Close" (click)="feedbackModal.hide()">
          <span aria-hidden="true">×</span>
        </button>
        <h4 class="modal-title w-100 text-center" id="myModalLabel12322">Feedback / Complain</h4>
      </div>
      <div class="modal-body" *ngIf="feedbackModal.isShown">
        <!-- <div class="alert alert-info p-2 pb-3">
          <a class="close font-weight-normal initialism" data-dismiss="alert" href="#"><samp>&times;</samp></a>
          CVC code is required.
        </div> -->
        <div class="row">
          <div class="col-sm-12">
            <!-- <div class="form-group"> -->
              <div class="form-group">
            <label>Facilitiy (Optional)</label>
              <!-- <ng-select [searchable]="true" [(ngModel)]="feedbackDto.facility"
               class="w-100 ng-select-small" placeholder="Select Service Type" (click)="$event.stopPropagation();">
                <ng-option *ngFor="let item of facilityList" [value]="item.facilityName">{{item.facilityName}}</ng-option>
              </ng-select> -->

              <ng-select class="ng-select-small" [(ngModel)]="feedbackDto.facility" appendTo="body"
              [multiple]="false" [searchable]="true" placeholder="Select Facility">
              <!-- <ng-option [value]="0">Select Facility</ng-option> -->
              <ng-option *ngFor="let item of facilityList" [value]="item.facilityName">{{item.facilityName}}
              </ng-option>
            </ng-select>
            </div>
            <div class="form-group">
              <div class="d-flex justify-content-between">

                <label for="fbemail">Email (Optional)</label>
                <mdb-checkbox [default]="true" [(ngModel)]="anonymous"
                (change)="removeEmail()" title="No follow-up required">Anonymous
              </mdb-checkbox>
              </div>

              <input type="text" class="form-control" [(ngModel)]="feedbackDto.email" id="fbemail">
            </div>
            <div class="form-group">
              <label>Department<small class="text-danger">*</small></label>
                <ng-select [searchable]="true" [(ngModel)]="feedbackDto.department"
                  class="w-100 ng-select-small"
                  placeholder="Select Department" (click)="$event.stopPropagation();">
                  <ng-option [value]="'General'">General</ng-option>
                  <ng-option [value]="'Care Delivery'">Care Delivery</ng-option>
                  <ng-option [value]="'Work place'">Work place</ng-option>
                  <ng-option [value]="'Technical'">Technical</ng-option>
                  <ng-option [value]="'Rpm Compliance'">Rpm Compliance </ng-option>
                </ng-select>
            </div>
            <div class="form-form form-group">
              <label for="formmm712">Message<small class="text-danger">*</small></label>
              <textarea type="text" id="formmm712" rows="6" [(ngModel)]="feedbackDto.message" placeholder="Enter your Message here..."
                class="form-control" style="height:50px;"></textarea>
            </div>
            <div class="d-flex align-items-center">
              <label for="file" class="flex-shrink-0" style="width: 70px;">Attachment</label>
              <div class="file-field flex-wrap align-items-center w-100 ml-3">
                <div class="btn btn-success btn-sm mx-0 mt-0">
                  <span class="w-100"><i class="fa fa-paperclip fa-lg"></i> Attach File
                  </span>
                  <!-- accept=".pdf, .xlsx,.docx, .doc, .odt , .txt, .ppt, .pptx" -->
                  <input type="file" mdbFileSelect
                    (change)="onUploadOutput($event);" #select>
                </div>
                <div class="w-100" *ngIf="file && file.length > 0">
                  <div class="d-flex justify-content-between align-items-center" *ngFor="let doc of file">
                    <p class="mb-0">{{doc.name}}<a><i class="ml-2 fa fa-trash fa-lg text-danger" (click)="popFile(doc)" ></i></a></p>
                  </div>
              </div>
              </div>
            </div>
          </div>



        </div>
        </div>
      <div class="modal-footer">
        <button type="button" [disabled]="!feedbackDto.department || !feedbackDto.message || isLoading" class="waves-light btn btn-sm btn-dynamic-secondary-2c btn-sm" aria-label="Close"
          (click)="feedbacks()" mdbWavesEffect><span *ngIf="isLoading" class="spinner-border spinner-border-sm" role="status"
          aria-hidden="true"></span>Save</button>
        <!-- <button
          type="button" mdbBtn color="succes" class="relative btn-success waves-light btn-sm" mdbWavesEffect
          (click)="feedbackModal.hide()">Attach</button> -->
      </div>
    </div>
  </div>
</div>

<div mdbModal #patientNoteModal="mdbModal" class="modal fade right quickNote" tabindex="-1" role="dialog"
 aria-labelledby="patientNoteModalLabel" aria-hidden="true" [config]="{ignoreBackdropClick: true}">
  <div class="modal-dialog modal-full-height modal-right" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close pull-right" aria-label="Close" (click)="noteValueConfirmModal()">
          <span aria-hidden="true">×</span>
        </button>
        <h4 class="modal-title w-100" id="myModalLabel">Quick Notes</h4>
      </div>
      <div class="modal-body">
        <!-- Timeline -->
        <div class="row">
          <div class="col-sm-12">
            <div class="form-form form-group">
              <label for="">Text</label>
              <textarea type="text" [(ngModel)]="noteText" id="form127" rows="4" placeholder="Enter note text..."
                class="form-control" style="height:50px;"></textarea>
            </div>
            <div class="btn-group-sm">
              <button [disabled]="!noteText" mdbBtn type="button" (click)="addNote()" class="btn btn-sm btn-dynamic-2c"
                mdbWavesEffect>Add</button>
              <!-- <button [disabled]="!noteText" hidden mdbBtn type="button" size="sm" color="uccess"
                mdbWavesEffect>Update</button> -->
              <button mdbBtn type="button" size="sm" flat="true" (click)="noteText=''" mdbWavesEffect>clear</button>
            </div>
          </div>
          <div class="col-md-12">
            <p class="text-center"
              *ngIf="!patientNoteObj || !patientNoteObj.notes || patientNoteObj.notes.length === 0">
              <strong>No Record Found!</strong>
            </p>
            <div *ngIf="isLoading" class="d-flex justify-content-center text-center">
              <mdb-progress-bar class="progress primary-color-dark mb-0" mode="indeterminate"></mdb-progress-bar>
            </div>
            <div *ngIf="patientNoteObj && patientNoteObj.notes && patientNoteObj.notes.length > 0" class="timeline-main"
              malihu-scrollbar [scrollbarOptions]="scrollbarOptions">
              <!-- Timeline Wrapper -->
              <div class="timeline-item" *ngFor="let item of patientNoteObj.notes">
                <div class="mb-2">
                  <p class="mb-0"><strong>{{item.facilityUserName}}</strong></p>
                  <small class="text-dynamic-2c">{{item.dateCreated| dateFormatPipe: 'time'}}</small>
                </div>
                <p>{{item.note}}.</p>
              </div>
              <!-- <div class="timeline-item">
                <div class="mb-2">
                  <p class="mb-0"><strong>Section Tile</strong></p>
                  <small class="text-dynamic-2c">10 JAN 2019 10:00 AM</small>
                </div>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Labore consectetur dignissimos placeat
                  temporibus voluptate voluptas ducimus? Amet temporibus iusto non similique! Hic, vitae? Obcaecati ad
                  repellat tempore labore doloremque amet.</p>
              </div> -->

            </div>
          </div>
        </div>
        <!-- Timeline -->
      </div>
    </div>
  </div>
</div>

<div mdbModal #clinicalSummary="mdbModal" class="modal fade right quickNote" tabindex="-1" role="dialog"
  [config]="{ignoreBackdropClick: true}" aria-labelledby="myclinicalSummaryLabel" aria-hidden="true">
  <div class="modal-dialog modal-full-height modal-right" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close pull-right" aria-label="Close" (click)="clinicalSummary.hide()">
          <span aria-hidden="true">×</span>
        </button>
        <h4 class="modal-title w-100" id="myModalLabel">Clinical Summary</h4>
      </div>
      <div class="modal-body">
        <!-- Timeline -->
        <div class="row">
          <div class="col-sm-12">
            <div class="form-form form-group">
              <label for="">Clinical Summary</label>
              <textarea type="text" [(ngModel)]="SummaryText" id="form637" rows="15" placeholder=" Clinical Summary..."
                class="form-control"></textarea>
            </div>
            <div class="btn-group-sm">
              <button [disabled]="!SummaryText" mdbBtn type="button" (click)="addSummary()" class="btn btn-sm btn-dynamic-2c"
                mdbWavesEffect>Save</button>
              <!-- <button [disabled]="!noteText" hidden mdbBtn type="button" size="sm" color="succes"
                mdbWavesEffect>Update</button> -->
              <!-- <button mdbBtn type="button" size="sm" flat="true" (click)="summaryText=''" mdbWavesEffect>clear</button> -->
            </div>
          </div>
        </div>
        <!-- Timeline -->
      </div>
    </div>
  </div>
</div>

<div mdbModal #toDoList="mdbModal" class="modal fade right quickNote" tabindex="-1" role="dialog"
  [config]="{ignoreBackdropClick: false,backdrop: false}" aria-labelledby="mypatientNoteModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-full-height modal-right" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close pull-right" aria-label="Close" (click)="toDoList.hide()">
          <span aria-hidden="true">×</span>
        </button>
        <h4 class="modal-title w-100" id="myModalLabel">To Do List</h4>
      </div>
      <div class="modal-body">
        <!-- Timeline -->
        <div class="row">
          <div class="col-sm-12">
            <div class="form-form form-group">
              <label for="toDoTitle" class="w-100">Title</label>
              <input type="text" [(ngModel)]="todoDto.title" class="form-control form-control-sm" id="toDoTitle"
                placeholder="Task Title">
            </div>
          </div>
          <!-- <div class="col-sm-6">
            <div class="input-group form-group">
              <label class="w-100">Date Time</label>
              <input type="text" [(ngModel)]="todoDto.notifyDate" class="form-control form-control-sm"
                [ngModelOptions]="{standalone: true}" #dateToDp="dpDayPicker"
                [dpDayPicker]="timePickerConfig" [theme]="'dp-material ccm-date-picker'" [mode]="'daytime'" />
            </div>
          </div> -->
          <div class="col-sm-12">
            <div class="form-form form-group">
              <label for="desc56">Description</label>
              <textarea type="text" [(ngModel)]="todoDto.description" id="desc56" rows="4"
                placeholder="Enter note text..." class="form-control" style="height:50px;"></textarea>
            </div>
          </div>
          <div class="col-sm-12">
            <button [disabled]="!todoDto.description" type="button" (click)="addTodo()"
              class="btn btn-dynamic-2c btn-sm" mdbWavesEffect>Add</button>
            <button mdbBtn type="button" class="btn btn-dynamic-secondary-2c btn-sm" size="sm" flat="true" (click)="noteText=''" mdbWavesEffect>clear</button>
          </div>
          <div class="col-md-12">
            <p class="text-center"
              *ngIf="!todoListDto">
              <strong>No Record Found!</strong>
            </p>
            <div *ngIf="isLoading" class="d-flex justify-content-center text-center">
              <mdb-progress-bar class="progress primary-color-dark mb-0" mode="indeterminate"></mdb-progress-bar>
            </div>
            <p><small class="font-700 text-dynamic-2c">To Do List</small></p>
            <div class="timeline-main primary"  malihu-scrollbar [scrollbarOptionsTimeline]="scrollbarOptionsTimeline">
              <div class="timeline-item" *ngFor="let item of todoListDto">
                <div class="mb-2">
                  <p class="mb-0"><strong>{{item.title}}</strong></p>
                  <small class="text-dynamic-2c">{{item.dateCreated}}</small>
                </div>
                <p>{{item.description}}.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Timeline -->
    </div>
  </div>
</div>
