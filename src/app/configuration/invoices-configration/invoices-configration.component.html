
<div class="d-flex flex-row align-items-center justify-content-between mb-3">
  <div class="d-flex justify-content-start align-items-center">
    <!-- <h4 class="mr-3 mb-0"><a class="text-dark" (click)="goBack()">
        <i class="fa fa-arrow-left"></i></a></h4> -->
        <!-- <h1 class="page-title mb-0">Invoice Configuration</h1> -->
        <h1 class="page-title mb-0">{{facilityName}}</h1>
  </div>

</div>

<!-- <button (click)="editCptconfigModal.show();">edit</button> -->

<div class="row mb-3">
  <div class="col-lg-6 col-sm-6">
    <label for="monthlyCharge">Monthly Charge</label>
    <input type="text" class="form-control form-control-sm box-shadow w-100" [(ngModel)]="monthlyCharges" (blur)="editMonthlyCharge()" id="monthlyCharge" placeholder="Monthly Charge" style="height: calc(1.52em + 0.5rem + 6px);" />

  </div>
  <div class="col-lg-6 col-sm-6">
      <label>Copy From</label>
      <ng-select class="ng-select-small" [closeOnSelect]="true" [(ngModel)]="selectedFacilityId" (ngModelChange)="openConfirmModal()"
        [multiple]="false" [searchable]="true" placeholder="Copy from other Facility">
        <ng-option *ngFor="let item of facilityList" [value]="item.id">{{item.facilityName}}</ng-option>
      </ng-select>
    </div>

</div>

<div *ngIf="isLoading" class="d-flex justify-content-center text-center">
  <!-- <div class="d-flex justify-content-center text-center"> -->
  <mdb-progress-bar class="progress primary-color-dark mb-0" mode="indeterminate"></mdb-progress-bar>
</div>
<ngx-datatable #table class="material" [columnMode]="'force'" [headerHeight]="50" [footerHeight]="50" [rowHeight]="40"
  [scrollbarV]="false" [scrollbarH]="true" [rows]="facilityClaimChargesList" [offset]="0">
  <ngx-datatable-column name="#" [maxWidth]=50>
    <ng-template ngx-datatable-cell-template let-value="value" let-row="row" let-rowIndex="rowIndex">
      {{rowIndex + 1}}
    </ng-template>
  </ngx-datatable-column>
  <ngx-datatable-column name="CPT Code" prop="cptCode"> </ngx-datatable-column>
  <ngx-datatable-column name="Category" prop="category"> </ngx-datatable-column>
  <ngx-datatable-column name="Subcategory" prop="subCategory"> </ngx-datatable-column>
  <ngx-datatable-column name="Payment Method" prop="paymentTerm">
    <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
      <span>{{paymentTermEnum[row.paymentTerm]}}</span>
    </ng-template>
  </ngx-datatable-column>
  <ngx-datatable-column name="Charge Amount" prop="paymentAmount">
    <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
      <span>{{row.paymentAmount}}<span *ngIf="row.paymentTerm == 1">% ({{row.calculatedPercentageAmount}})</span></span>
    </ng-template>
  </ngx-datatable-column>
  <ngx-datatable-column name="Action" >
    <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
      <button type="button" class="btn btn-icon btn-dynamic-2c mx-2" (click)="facilityClaimChargeReadAndUpdateDto = row;editCptconfigModal.show()">
        <span class="fa fa-pencil"></span></button>
        <!-- verified -->
        <a class="btn btn-icon btn-dynamic-2c" title="Verify" *ngIf="row.verified === false;"
        (click)="verifyFacilityClaimCharge(row)"> <span class="fa fa-check"></span></a>
      <!-- <button type="button" class="btn btn-dynamic-2c ml-2" (click)="facilityClaimChargeReadAndUpdateDto = row;editfacilityClaimCharges()">Verify</button> -->
    </ng-template>
  </ngx-datatable-column>
  <!-- <ngx-datatable-column name="action" prop="Notes"> </ngx-datatable-column> -->
</ngx-datatable>


<div mdbModal #editCptconfigModal="mdbModal" class="modal fade" tabindex="-1" role="dialog"
  aria-labelledby="myBasicModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered flat-modal modal-dialog-scrollable" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close pull-right" aria-label="Close" (click)="editCptconfigModal.hide()">
          <span aria-hidden="true">Ã—</span>
        </button>
        <h4 class="modal-title w-100">Edit CPT Configuration</h4>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-sm-12">
            <div class="d-flex align-items-center mb-2">
              <label class="mr-3">Payment Method: </label>
              <div class="form-group mb-0">
                <div class="form-check form-check-inline ml-0 mr-3">
                  <div class="custom-control custom-radio">
                    <input type="radio" class="custom-control-input" [value]="0" [(ngModel)]="facilityClaimChargeReadAndUpdateDto.paymentTerm" id="defaultUnchecked"
                      mdbInput >
                    <label class="custom-control-label" for="defaultUnchecked">Fixed Amount</label>
                  </div>
                </div>
                <div class="form-check form-check-inline m-0">
                  <div class="custom-control custom-radio">
                    <input type="radio" class="custom-control-input" [value]="1" [(ngModel)]="facilityClaimChargeReadAndUpdateDto.paymentTerm" (click)="checkValidation(1)" id="defaultUnchecked1"
                      mdbInput>
                    <label class="custom-control-label" for="defaultUnchecked1">Percentage</label>
                  </div>
                </div>
              </div>
            </div>

            <div class="form-group">
              <label  for="chargeAmount">Charge Amount</label>
              <input type="text" OnlyNumbers class="form-control" [(ngModel)]="facilityClaimChargeReadAndUpdateDto.paymentAmount" (ngModelChange)="checkValidation()" id="chargeAmount">
            </div>
            <div class="d-flex justify-content-between">
              <mdb-checkbox [default]="false" [(ngModel)]="facilityClaimChargeReadAndUpdateDto.verified">Verified</mdb-checkbox>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-dark btn-sm" (click)="editCptconfigModal.hide()">Close</button>
        <button type="submit" class="btn btn-dynamic-2c btn-sm" (click)="editfacilityClaimCharges()">Save</button>
      </div>

  </div>
</div>
</div>
