
<div class="d-flex flex-row align-items-center justify-content-between mb-3">
  <div class="d-flex justify-content-start align-items-center">
    <!-- <h4 class="mr-3 mb-0"><a class="text-dark" (click)="goBack()">
        <i class="fa fa-arrow-left"></i></a></h4> -->
        <h1 class="page-title mb-0">CPT Code Configuration</h1>
  </div>
  <div>
    <button type="button"  (click)="reset();addCptModal.show();" class="btn btn-dynamic-2c btn-sm mr-0" title="Add New CPT Code"
      placement="left"><i class="fa fa-plus fa-lg"></i> Add CPT Code</button>
  </div>
</div>

<div *ngIf="isLoading" class="d-flex justify-content-center text-center">
  <!-- <div class="d-flex justify-content-center text-center"> -->
  <mdb-progress-bar class="progress primary-color-dark mb-0" mode="indeterminate"></mdb-progress-bar>
</div>
<ngx-datatable #table class="material" [columnMode]="'force'" [headerHeight]="50" [footerHeight]="50" [rowHeight]="40"
  [scrollbarV]="false" [scrollbarH]="true" [rows]="cptCargesList" [offset]="0">
  <ngx-datatable-column name="#" [maxWidth]=50>
    <ng-template ngx-datatable-cell-template let-value="value" let-row="row" let-rowIndex="rowIndex">
      <!-- <small class="mr-3"></small> -->
      {{rowIndex + 1}}
    </ng-template>
  </ngx-datatable-column>
  <ngx-datatable-column name="CPT Code" prop="cptCode"> </ngx-datatable-column>
  <ngx-datatable-column name="FQHC Code" prop="fqhcCode"> </ngx-datatable-column>
  <ngx-datatable-column name="Billed Amount" prop="defaultBillAmount">
  </ngx-datatable-column>
  <ngx-datatable-column name="Default fix charge" prop="defaultFixCharge">
  </ngx-datatable-column>
  <ngx-datatable-column name="Category" prop="category">
  </ngx-datatable-column>
  <ngx-datatable-column name="Sub Category" prop="subCategory">
  </ngx-datatable-column>
  <ngx-datatable-column name="Action" >
    <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
      <button type="button" class="btn btn-icon btn-dynamic-2c ml-2" [disabled]="isLoading" (click)="openEditCptModal(row);addCptModal.show()"><i class="fa fa-pencil fa-lg"></i></button>
      <button type="button" class="btn btn-icon btn-danger ml-2" [disabled]="isLoading" (click)="openConfirmModal(row.id)"><i class="fa fa-trash fa-lg"></i></button>
    </ng-template>
  </ngx-datatable-column>
  <!-- <ngx-datatable-column name="action" prop="Notes"> </ngx-datatable-column> -->
</ngx-datatable>




<div mdbModal #addCptModal="mdbModal" class="modal fade" tabindex="-1" role="dialog"
  aria-labelledby="myBasicModalLabel" aria-hidden="true" [config]="{backdrop: true, ignoreBackdropClick: true}" >
  <div class="modal-dialog modal-dialog-centered modal-md flat-modal modal-dialog-scrollable" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close pull-right" aria-label="Close" (click)="addCptModal.hide()">
          <span aria-hidden="true">×</span>
        </button>
        <h4 class="modal-title w-100" *ngIf="addEditCptChargesDto.id === 0" >Add CPT Code</h4>
        <h4 class="modal-title w-100" *ngIf="addEditCptChargesDto.id > 0" >Edit CPT Code</h4>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-sm-12">
              <div class="form-group">
                <label for="cptCode">CPT Code</label>
                <input type="text" id="cptCode" name="otherType1" [(ngModel)]="addEditCptChargesDto.cptCode" class="form-control form-control-sm" />
            </div>
        </div>
          <div class="col-sm-12">
              <div class="form-group">
                <label for="fqhccode">FQHC Code</label>
                <input type="text" id="fqhccode" name="otherType1" [(ngModel)]="addEditCptChargesDto.fqhcCode" class="form-control form-control-sm" />
            </div>
        </div>
          <div class="col-sm-12">
              <div class="form-group">
                <label for="dAmount">Default Amount</label>
                <input type="text" Numeric id="dAmount" name="otherType2" [(ngModel)]="addEditCptChargesDto.defaultBillAmount" class="form-control form-control-sm" />
            </div>
        </div>
          <div class="col-sm-12">
              <div class="form-group">
                <label for="billedAmount">Billed Amount</label>
                <input type="text" id="billedAmount" Numeric name="otherType3" [(ngModel)]="addEditCptChargesDto.defaultFixCharge" class="form-control form-control-sm" />
            </div>
        </div>
          <div class="col-sm-6">
            <div class="form-group">
              <label for="category">Select Category</label>
              <ng-select appendTo="body" [(ngModel)]="addEditCptChargesDto.category" (ngModelChange)="addEditCptChargesDto.subCategory='';filterSubCategory(addEditCptChargesDto.category)" class="ng-select-small" [multiple]="false"
                [searchable]="true" containe [loading]="isLoadingLookup" placeholder="Select Category" [clearable]=false>
                <ng-option [value]="item.catShortName" *ngFor="let item of cptCategoriesLookupData"> {{item.catDisplayName}}</ng-option>
              </ng-select>
            </div>
        </div>
        <div class="col-sm-6">
          <div class="form-group">
            <label for="subCategory">Select Sub Category</label>
            <ng-select [(ngModel)]="addEditCptChargesDto.subCategory" class="ng-select-small" [multiple]="false"
              [searchable]="true" [loading]="isLoadingLookup" placeholder="Select Sub Category" [clearable]=false>
              <ng-option [value]="item.subCatShortName" *ngFor="let item of selectedSubCategories"> {{item.subCatDisplayName}}</ng-option>
            </ng-select>
          </div>
        </div>
          <div class="col-sm-12">
              <div class="form-group">
                <label for="Description">Description</label>
                <textarea [(ngModel)]="addEditCptChargesDto.description" class="md-textarea form-control " rows="3" id="Description"
                  type="text"></textarea>
            </div>
        </div>
      </div>
    </div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-dark btn-sm" (click)="addCptModal.hide()">Close</button>
        <button type="submit" class="btn btn-dynamic-2c btn-sm" *ngIf="addEditCptChargesDto.id === 0" [disabled]="isLoading" (click)="addDefaultCPTCharges()">Save</button>
        <button type="submit" class="btn btn-dynamic-2c btn-sm" *ngIf="addEditCptChargesDto.id > 0" [disabled]="isLoading" (click)="editDefaultCPTCharge()">Update</button>
      </div>

  </div>
</div>

<!-- <div mdbModal #deleteCptModal="mdbModal" class="modal fade" tabindex="-1" role="dialog"
  aria-labelledby="myBasicModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-md flat-modal modal-dialog-scrollable" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close pull-right" aria-label="Close" (click)="deleteCptModal.hide()">
          <span aria-hidden="true">×</span>
        </button>
        <h4 class="modal-title w-100">Delete CPT Code</h4>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-sm-12">

        </div>
      </div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-dark btn-sm" (click)="deleteCptModal.hide()">Close</button>
        <button type="submit" class="btn btn-danger btn-sm" (click)="deleteCptModal.hide()">Delete</button>
      </div>
    </div>
  </div>
</div> -->
