
<div>
  <div class="ccm-nav my-custom-scroll mb-3" style="min-width: 100%;left: 0;">
    <ul class="ccm-navbar">
      <li  [class.active]="smsNotification"  (click)="smsNoti()"><a>Patient SMS Notification</a></li>
      <li [class.active]="teamNotification" (click)="careNoti()"><a>Care team Notification</a></li>
    </ul>
  </div>
  <div *ngIf="smsNotification">
    <div class="card" >
      <div class="card-header">
        <div class="row">

          <div class="col-6">
            <h5 style="font-size: 18px;font-weight: 500;" class="mb-0">Patient SMS Notification</h5>
          </div>
          <div class="col-3">
            <h5 style="font-size: 18px;font-weight: 500;" class="mb-0">SMS</h5>
          </div>
          <div class="col-3">
            <h5 style="font-size: 18px;font-weight: 500;" class="mb-0">Mobile App</h5>
          </div>
        </div>
      </div>
      <div class="card-body">
        <div class="row mb-2">
          <div class="col-6">
            <h5 style="font-size: 16px;font-weight: 500;" class="mb-0">Missing Alerts</h5>
          </div>
          <div class="col-3">
            <mdb-checkbox [disabled]="!this.SetFacilityServiceCOnfigDto.enableNotifications" [(ngModel)]="facilityNotifSetting.missedAlertSms" [default]="true" title="SMS"></mdb-checkbox>
          </div>
          <div class="col-3">
            <mdb-checkbox [(ngModel)]="facilityNotifSetting.missedAlertPush" [default]="true" title="Mobile"></mdb-checkbox>
          </div>
        </div>
        <div class="row mb-2">
          <div class="col-6">
            <h5 style="font-size: 16px;font-weight: 500;" class="mb-0">Reading Acknowledgement</h5>
          </div>
          <div class="col-3">
            <mdb-checkbox [disabled]="!this.SetFacilityServiceCOnfigDto.enableNotifications" [(ngModel)]="facilityNotifSetting.readingAckSms" [default]="true" title="SMS"></mdb-checkbox>
          </div>
          <div class="col-3">
            <!-- <mdb-checkbox [(ngModel)]="facilityNotifSetting.missedAlertPush" [default]="true" title="Mobile"></mdb-checkbox> -->
          </div>
        </div>
        <div class="row">
          <div class="col-12">
            <div class="form-group">
              <label class="w-100">Notification Time</label>
              <input type="text" readonly class="form-control form-control-sm bg-white" #dateDpTime="dpDayPicker"
                [dpDayPicker]="timePickerConfig" [(ngModel)]="facilityNotifSetting.notificationTime"
                [theme]="'dp-material ccm-date-picker'" [mode]="'time'" />
            </div>
          </div>
          <!-- <div class="form-group">
            <label>Launch Facility Time</label>
              <ng-select class="ng-select-small" appendTo="body" [multiple]="false"
                [searchable]="false"  placeholder="Facility Time">
                <ng-option [value]="0">10 Min</ng-option>
                <ng-option [value]="1">20 Min</ng-option>
                <ng-option [value]="2">30 Min</ng-option>
                <ng-option [value]="3">40 Min</ng-option>
                <ng-option [value]="4">50 Min</ng-option>
                <ng-option [value]="5">60 Min</ng-option>
              </ng-select>
            </div> -->
            <div class="col-sm-12">
              <div class="form-group">
                <label for="note">Footer Text</label>
                <textarea [(ngModel)]="facilityNotifSetting.footerText" class="md-textarea form-control " rows="4" id="note"
                  type="text"></textarea>
              </div>
            </div>
        </div>
      </div>
    </div>
    <div class="modal-footer py-2">
      <button [disabled]="isLoadingConfig" type="button" (click)="EditFacilityNotificationConfig()" class="btn btn-sm btn-dynamic-2c" aria-label="Close" >Save</button>
    </div>
  </div>

  <ng-container *ngIf="teamNotification">

    <div >
      <div class="row" *ngIf="!(rcService?.rcPhoneInfo?.length)">
        <div class="col-12">
          <div class="alert alert-danger">
            This option requires telephony service enabled.  Please Contact Support.
          </div>
        </div>
      </div>
      <div class="card" >

        <div class="card-header">
          <div class="row">
            <div class="col-6">
              <h5 style="font-size: 18px;font-weight: 500;" class="mb-0">Care team Notification</h5>
            </div>
            <div class="col-3">
              <h5 style="font-size: 18px;font-weight: 500;" class="mb-0">SMS</h5>
            </div>
            <div class="col-3">
              <h5 style="font-size: 18px;font-weight: 500;" class="mb-0">Care Team</h5>
            </div>
          </div>
        </div>
        <div class="card-body">
          <div class="row mb-2">
            <div class="col-6">
              <h5 style="font-size: 16px;font-weight: 500;" class="mb-0">Out of range reading</h5>
            </div>
            <div class="col-3">
              <mdb-checkbox [(ngModel)]="facilityNotifSetting.providerSmsAlert" [default]="true" title="SMS"></mdb-checkbox>
            </div>
            <div class="col-3">
              <div>
                <ng-select [searchable]="true" [loading]=isLoadingUsers class="ng-select-small"
                  [(ngModel)]="careTeamNotificationSetting.facilityUserIds" placeholder="Select Providers" [multiple]="true"
                  (click)="$event.stopPropagation();">
                  <ng-option [value]="item.id" *ngFor="let item of (facilityUsersList)">{{item.lastName}},{{item.firstName}}</ng-option>
                </ng-select>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="modal-footer py-2">
      <button [disabled]="isLoadingTeamConfig" type="button" (click)="EditFacilityNotificationConfig();MarkFacilityUsersSmsAlertEnabled()" class="btn btn-sm btn-dynamic-2c" aria-label="Close" >Save</button>
    </div>
  </ng-container>
</div>
<!-- <div mdbModal #alertsConfigration="mdbModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myalertsConfigrationLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable  modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header py-2">
        <button type="button" class="close pull-right" aria-label="Close" (click)="alertsConfigration.hide()">
          <span aria-hidden="true">Ã—</span>
        </button>
        <h4 class="modal-title w-100" style="font-size: 20px;" id="myModalLabel"> Alerts Configration</h4>
      </div>
      <div class="modal-body">

      </div>
      <div class="modal-footer py-2">
        <button type="button" class="btn btn-sm btn-dynamic-secondary-2c" aria-label="Close" (click)="alertsConfigration.hide()" >Close</button>
        <button type="button" class="btn btn-sm btn-dynamic-2c" aria-label="Close" >Save</button>
      </div>
    </div>
  </div>
</div> -->
