<div class="d-flex flex-wrap justify-content-between">
  <div >
      <h1 class="page-title mb-3">RPM Dashboard</h1>
  </div>
  <div class="px-0 col-xl-9 col-sm-12 pl-lg-3 pl-sm-0">
      <div class="row flex-1">
        <div class="col-sm-3 pr-0 mb-sm-3 mb-3">
          <ng-select class="ng-select-small" [clearable]="false" [closeOnSelect]="true" [multiple]="false" [searchable]="true" [(ngModel)]="quickActions"
             (ngModelChange)="checkQuickActionsValue();filterPatients()" placeholder="Quick Actions">
              <!-- <ng-option [value]="-1">All</ng-option> -->
              <ng-option  [value]="15">All</ng-option>
                   <ng-option *ngFor="let item of rpmStatusListOfEnum" [value]="item.value">{{item.name}}</ng-option>
                   <ng-option  [value]="16">Active without Reading</ng-option>
                   <ng-option [value]="17">Inactive with Reading</ng-option>
          </ng-select>
      </div>
          <div class="col-sm-4 pr-0 mb-sm-3 mb-3">
              <ng-select class="ng-select-small" [closeOnSelect]="true" [multiple]="false" [searchable]="true" [(ngModel)]="CareCordinatorId"
                 (ngModelChange)="GetMonthlyPatientsRmpData();filterPatients()" placeholder="RPM Coordinator">
                  <!-- <ng-option [value]="0">All</ng-option> -->
                  <ng-option [value]="0">All RPM Coordinator </ng-option>
                          <ng-option *ngFor="let item of careProvidersList" [value]="item.id">{{item.lastName}},{{item.firstName}}
                </ng-option>
              </ng-select>
          </div>
          <div class="col-sm-5 mb-sm-3 mb-3">
              <div class="d-flex align-items-center">
                  <div class="flex-1">
                      <ng-select class="ng-select-small" [closeOnSelect]="true" [multiple]="false" [searchable]="true" [(ngModel)]="CareFacilitatorId"
                          (ngModelChange)="facilitatorSaveInService();GetMonthlyPatientsRmpData();filterPatients()" placeholder="Care Facilitator">
                          <!-- <ng-option [value]="0">All</ng-option> -->
                          <ng-option [value]="0">All Care Facilitator </ng-option>
                          <ng-option *ngFor="let item of careFacilitatorsList" [value]="item.id">{{item.lastName}},{{item.firstName}}
                          </ng-option>
                      </ng-select>
                  </div>
                  <div class="dropdown" mdbDropdown>
                      <button mdbDropdownToggle class="btn btn-dynamic-2c btn-icon mr-0 my-0" type="button"><i
                              class="fa fa-plus"></i>
                      </button>
                      <div class="dropdown-menu dropdown-menu-right">
                          <a class="dropdown-item" routerLinkActive="router-link-active" *hasClaim=" ['CanAddPatient']" [routerLink]="['/admin/addPatient']">
                              <i class="fa fa-plus fa-lg mr-1"></i>
                              Add New
                          </a>
                          <button class="dropdown-item" [disabled]="!selected || selected.length < 1"
                           (click)="selectedPatientsCareProviders();assignCareProviderModal.show()">
                              <i class="fa fa-arrow-alt-circle-up fa-lg mr-1"></i>
                              Assign
                          </button>
                          <!-- <a class="dropdown-item" (click)="ConfirmREsetQC()" routerLinkActive="router-link-active" >
                            <i class="fa fa-refresh fa-lg mr-1"></i>
                            Reset QC
                          </a> -->
                          <a class="dropdown-item" (click)="openRpmDownloadModal()" routerLinkActive="router-link-active" >
                            <i class="fa fa-download fa-lg mr-1"></i>
                            Download
                          </a>
                      </div>
                  </div>
              </div>
          </div>

      </div>
  </div>
</div>
<div class="d-flex flex-wrap justify-content-between">
<div class="input-group mb-3" style="width: 150px;">
  <input readOnly style="height:32px;width:100px;" type="text" value="{{selectedDate | date: 'MMM yyyy'}}" class="form-control bg-white"  autocomplete="off"
   >
  <div class="input-group-append ">
    <span style="cursor: pointer;border-radius: 0 4px 4px 0;border-color: #ced4da;" [dpDayPicker]="datePickerConfig2" [theme]="'dp-material ccm-date-picker'" [mode]="'month'" (onSelect)="filterByMonth($event)" class="input-group-text bg-white">
      <i class="fa fa-calendar fa-lg"></i>
    </span>
  </div>
</div>
<div class="d-flex align-items-center justify-content-end">
  <button (click)="OpenRPMGuidePDF()"class="btn btn-info btn-icon" type="button" title="Rpm Workflow"><i class="fa fa-file-pdf-o"></i> </button>
  <button mdbBtn class="btn py-2 btn-md m-0" [ngClass]="{'btn-dynamic-2c': rpmAlertListDto.length == 0, 'btn-danger': rpmAlertListDto.length > 0 }" type="button" (click)="test.toggle()" mdbWavesEffect>
    RPM Alerts {{rpmAlertListDto.length}}
  </button>
</div>
</div>
<div *ngIf="quickActions == 0" class="row">
  <div class="d-flex align-items-stretch col-xl-3 col-lg-6 col-md-6 col-sm-6">
      <div class="d-flex align-items-stretch w-100">
          <div *ngIf="filterMonthYear == currentMonthYear" class="rpm-content-box rpm-content-box-hover flex-1 d-flex align-items-center justify-content-center"
          [class.active]="filterPatientDto.duration == -1 && filterPatientDto.section == ''">
              <div class="text-center" (click)="filterPatientDto.FromTransmissionDays=0;filterPatientDto.ToTransmissionDays=31;filterPatientDto.rpmTimeRange=[-1];sectionSelection = '';filterPatientDto.section='';filterPatientDto.duration=-1;filterPatientDto.showAll = false;filterPatients()">
                  <p class="mb-0">Active RPM Patients</p>
                  <p class="mb-0 item-bold" style="font-size: 20px;"><strong>{{rmpDashboardDataDto.activePatients}}</strong></p>
              </div>
          </div>

          <div class="d-flex flex-wrap rpm-content-box flex-1 text-center p-0">
            <div class="item-top-centent d-flex justify-content-center align-items-center w-100">
              <p class="mb-0 item-bold text-center"> Not Started </p>
            </div>
            <div class="item-bottom-content d-flex flex-1">
              <div (click)="sectionSelection = 'NotStartedTime';filterPatientDto.FromTransmissionDays = 0;filterPatientDto.ToTransmissionDays = 31;filterPatientDto.rpmTimeRange= [0];filterPatients()" [class.active]="sectionSelection == 'NotStartedTime'" class="completed-min-not-started cursor-pointer">
                  <p class="mb-0"><small class="text-info font-700" style="font-size: 10px;">Time</small></p>
                  <p class="mb-0"><small>{{rmpDashboardDataDto.notStartedTimePatients}}</small></p>
              </div>
              <div (click)="sectionSelection = 'NotStartedReadings';filterPatientDto.rpmTimeRange=[-1];filterPatientDto.FromTransmissionDays = 0;filterPatientDto.ToTransmissionDays = 0;filterPatients()" [class.active]="sectionSelection == 'NotStartedReadings'" class="completed-min-not-started cursor-pointer">
                  <p class="mb-0"><small class="text-info font-700" style="font-size: 10px;">Readings</small></p>
                  <p class="mb-0"><small>{{rmpDashboardDataDto.notStartedReadingsPatients}}</small></p>
              </div>
            </div>
          </div>
      </div>

  </div>
  <div class="col-xl-3 col-lg-6 col-md-6 col-sm-6">
      <div class="d-flex">
          <div class="d-flex flex-wrap rpm-content-box flex-1 text-center p-0">
              <div class="item-top-centent item-top-centent-hover  d-flex justify-content-between align-items-center w-100"
              [class.active]="sectionSelection == 'sectionA'" (click)="sectionSelection = 'sectionA';filterPatientDto.section='A';filterPatientDto.FromTransmissionDays=0;filterPatientDto.ToTransmissionDays=31;filterPatientDto.rpmTimeRange=[5,6,7,8];filterPatientDto.showAll = false;filterPatients()">
                  <div class="index-value">A</div>
                  <div class="index-unit align-items-center">
                      <p class="mb-0 item-bold"> <strong>{{rmpDashboardDataDto.section_A.totalCount}}</strong> </p>
                  </div>
                  <div class="index-time">
                      <p class="mb-0">20 min Encounter</p>
                  </div>
              </div>
              <div class="item-bottom-content d-flex flex-1">
                  <div class="completed-min" [class.active]="sectionSelection == '1-4min'" (click)="sectionSelection = '1-4min';filterPatientDto.FromTransmissionDays=0;filterPatientDto.ToTransmissionDays=31;filterPatientDto.rpmTimeRange=[1];filterPatientDto.showAll = false;filterPatients()">
                      <p class="mb-0"><small class="text-info font-700">{{rmpDashboardDataDto.section_A.subCountOne}}</small></p>
                      <p class="mb-0"><small>1-4 min</small></p>
                  </div>
                  <div class="completed-min" [class.active]="sectionSelection == '5-9min'" (click)="sectionSelection = '5-9min';filterPatientDto.FromTransmissionDays=0;filterPatientDto.ToTransmissionDays=31;filterPatientDto.rpmTimeRange=[2];filterPatientDto.showAll = false;filterPatients()">
                      <p class="mb-0"><small class="text-info font-700">{{rmpDashboardDataDto.section_A.subCountTwo}}</small></p>
                      <p class="mb-0"><small>5-9 min</small></p>
                  </div>
                  <div class="completed-min" [class.active]="sectionSelection == '10-14min'" (click)="sectionSelection = '10-14min';filterPatientDto.FromTransmissionDays=0;filterPatientDto.ToTransmissionDays=31;filterPatientDto.rpmTimeRange=[3];filterPatientDto.showAll = false;filterPatients()">
                      <p class="mb-0"><small class="text-info font-700">{{rmpDashboardDataDto.section_A.subCountThree}}</small></p>
                      <p class="mb-0"><small>10-14 min</small></p>
                  </div>
                  <div class="completed-min" [class.active]="sectionSelection == '15-19min'" (click)="sectionSelection = '15-19min';filterPatientDto.FromTransmissionDays=0;filterPatientDto.ToTransmissionDays=31;filterPatientDto.rpmTimeRange=[4];filterPatientDto.showAll = false;filterPatients()">
                      <p class="mb-0"><small class="text-info font-700">{{rmpDashboardDataDto.section_A.subCountFour}}</small></p>
                      <p class="mb-0"><small>15-19 min</small></p>
                  </div>
              </div>

          </div>
      </div>
  </div>
  <div class="col-xl-3 col-lg-6 col-md-6 col-sm-6">
      <div class="d-flex">
          <div class="d-flex flex-wrap rpm-content-box flex-1 text-center p-0">
              <div class="item-top-centent item-top-centent-hover  d-flex justify-content-between align-items-center w-100 completed-min"
               [class.active]="sectionSelection == 'sectionB'"(click)="sectionSelection = 'sectionB';filterPatientDto.section='B';filterPatientDto.FromTransmissionDays=0;filterPatientDto.ToTransmissionDays=31;filterPatientDto.rpmTimeRange=[9];filterPatientDto.showAll = false;filterPatients()">
                  <div class="index-value">B</div>
                  <div class="index-unit align-items-center">
                      <p class="mb-0 item-bold"> <strong>{{rmpDashboardDataDto.section_B.totalCount}}</strong> </p>
                  </div>
                  <div class="index-time">
                      <p class="mb-0">40 min Encounter</p>
                  </div>
              </div>
              <div class="item-bottom-content d-flex flex-1">
                  <div class="completed-min" [class.active]="sectionSelection == '20-24min'" (click)="sectionSelection = '20-24min';filterPatientDto.FromTransmissionDays=0;filterPatientDto.ToTransmissionDays=31;;filterPatientDto.rpmTimeRange=[5];filterPatientDto.showAll = false;filterPatients()">
                      <p class="mb-0"><small class="text-info font-700">{{rmpDashboardDataDto.section_B.subCountOne}}</small></p>
                      <p class="mb-0"><small>20-24 min</small></p>
                  </div>
                  <div class="completed-min" [class.active]="sectionSelection == '25-29min'" (click)="sectionSelection = '25-29min';filterPatientDto.FromTransmissionDays=0;filterPatientDto.ToTransmissionDays=31;;filterPatientDto.rpmTimeRange=[6];filterPatientDto.showAll = false;filterPatients()">
                      <p class="mb-0"><small class="text-info font-700">{{rmpDashboardDataDto.section_B.subCountTwo}}</small></p>
                      <p class="mb-0"><small>25-29 min</small></p>
                  </div>
                  <div class="completed-min" [class.active]="sectionSelection == '30-34min'" (click)="sectionSelection = '30-34min';filterPatientDto.FromTransmissionDays=0;filterPatientDto.ToTransmissionDays=31;;filterPatientDto.rpmTimeRange=[7];filterPatientDto.showAll = false;filterPatients()">
                      <p class="mb-0"><small class="text-info font-700">{{rmpDashboardDataDto.section_B.subCountThree}}</small></p>
                      <p class="mb-0"><small>30-34 min</small></p>
                  </div>
                  <div class="completed-min" [class.active]="sectionSelection == '35-39min'" (click)="sectionSelection = '35-39min';filterPatientDto.FromTransmissionDays=0;filterPatientDto.ToTransmissionDays=31;;filterPatientDto.rpmTimeRange=[8];filterPatientDto.showAll = false;filterPatients()">
                      <p class="mb-0"><small class="text-info font-700">{{rmpDashboardDataDto.section_B.subCountFour}}</small></p>
                      <p class="mb-0"><small>35-39 min</small></p>
                  </div>
              </div>

          </div>
      </div>
  </div>
  <div class="col-xl-3 col-lg-6 col-md-6 col-sm-6">
      <div class="d-flex">
          <div class="d-flex flex-wrap rpm-content-box flex-1 text-center p-0">
              <div class="item-top-centent item-top-centent-hover  d-flex justify-content-between align-items-center w-100"
              [class.active]="sectionSelection == 'sectionC'" (click)="sectionSelection = 'sectionC';filterPatientDto.rpmTimeRange=[-1];filterPatientDto.FromTransmissionDays=16;filterPatientDto.ToTransmissionDays=31;filterPatientDto.showAll = false;filterPatients()">
                  <div class="index-value">C</div>
                  <div class="index-unit align-items-center">
                      <p class="mb-0 item-bold"> <strong>{{rmpDashboardDataDto.section_C.totalCount}}</strong> </p>
                  </div>
                  <div class="index-time">
                      <p class="mb-0">16 Days Reading</p>
                  </div>
              </div>
              <div class="item-bottom-content d-flex flex-1">
                  <div class="completed-min" [class.active]="sectionSelection == '1-4days'" (click)="sectionSelection = '1-4days';filterPatientDto.rpmTimeRange=[-1];filterPatientDto.FromTransmissionDays=1;filterPatientDto.ToTransmissionDays=4;filterPatientDto.showAll = false;filterPatients()">
                      <p class="mb-0"><small class="text-info font-700">{{rmpDashboardDataDto.section_C.subCountOne}}</small></p>
                      <p class="mb-0"><small> 1-4 days</small></p>
                  </div>
                  <div class="completed-min" [class.active]="sectionSelection == '5-10days'" (click)="sectionSelection = '5-10days';filterPatientDto.rpmTimeRange=[-1];filterPatientDto.FromTransmissionDays=5;filterPatientDto.ToTransmissionDays=10;filterPatientDto.showAll = false;filterPatients()">
                      <p class="mb-0"><small class="text-info font-700">{{rmpDashboardDataDto.section_C.subCountTwo}}</small></p>
                      <p class="mb-0"><small>5-10 days</small></p>
                  </div>
                  <div class="completed-min" [class.active]="sectionSelection == '11-15days'" (click)="sectionSelection = '11-15days';filterPatientDto.rpmTimeRange=[-1];filterPatientDto.FromTransmissionDays=11;filterPatientDto.ToTransmissionDays=15;filterPatientDto.showAll = false;filterPatients()">
                      <p class="mb-0"><small class="text-info font-700">{{rmpDashboardDataDto.section_C.subCountThree}}</small></p>
                      <p class="mb-0"><small>11-15 days</small></p>
                  </div>
              </div>

          </div>
      </div>
  </div>

</div>


<div class="" mdbCollapse #test="bs-collapse">
<div class="row">
  <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12">
    <div class="rpm-alert" style="min-height: 383px;max-height: 383px">
      <div class="d-flex justify-content-between align-items-center mx-3 rpm-alert-title">
          <p class="mb-0 text-center"><strong>Out of Range Alerts</strong> <span *ngIf="rpmAlertListOutOfRange?.length">({{outOfRangeAddressedCount || 0}}/{{rpmAlertListOutOfRange?.length || ''}})</span></p>
          <div class="d-flex align-items-center">
            <div>
              <span [class.active]="alertFilterObj.outOfRange == 'all'" (click)="alertFilterObj.outOfRange='all'" title="UnAssociated Communications" class="btn btn-icon msg-badge">All</span>
            </div>
            <svg [class.active]="alertFilterObj.outOfRange == 'addressed'" (click)="alertFilterObj.outOfRange='addressed'"  class="ml-2 mr-2 alertAddressedSelection" xmlns="http://www.w3.org/2000/svg" style="width: 20px;fill: #4eb048; cursor: pointer;" viewBox="0 0 512 512"><!-- Font Awesome Pro 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) --><path d="M104 224H24c-13.255 0-24 10.745-24 24v240c0 13.255 10.745 24 24 24h80c13.255 0 24-10.745 24-24V248c0-13.255-10.745-24-24-24zM64 472c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24zM384 81.452c0 42.416-25.97 66.208-33.277 94.548h101.723c33.397 0 59.397 27.746 59.553 58.098.084 17.938-7.546 37.249-19.439 49.197l-.11.11c9.836 23.337 8.237 56.037-9.308 79.469 8.681 25.895-.069 57.704-16.382 74.757 4.298 17.598 2.244 32.575-6.148 44.632C440.202 511.587 389.616 512 346.839 512l-2.845-.001c-48.287-.017-87.806-17.598-119.56-31.725-15.957-7.099-36.821-15.887-52.651-16.178-6.54-.12-11.783-5.457-11.783-11.998v-213.77c0-3.2 1.282-6.271 3.558-8.521 39.614-39.144 56.648-80.587 89.117-113.111 14.804-14.832 20.188-37.236 25.393-58.902C282.515 39.293 291.817 0 312 0c24 0 72 8 72 81.452z"/></svg>
            <svg [class.active]="alertFilterObj.outOfRange == 'unaddressed'" (click)="alertFilterObj.outOfRange='unaddressed'" class="alertAddressedSelection" xmlns="http://www.w3.org/2000/svg" style="width: 20px;fill: #212529; cursor: pointer;"  viewBox="0 0 512 512"><!-- Font Awesome Pro 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) --><path d="M466.27 286.69C475.04 271.84 480 256 480 236.85c0-44.015-37.218-85.58-85.82-85.58H357.7c4.92-12.81 8.85-28.13 8.85-46.54C366.55 31.936 328.86 0 271.28 0c-61.607 0-58.093 94.933-71.76 108.6-22.747 22.747-49.615 66.447-68.76 83.4H32c-17.673 0-32 14.327-32 32v240c0 17.673 14.327 32 32 32h64c14.893 0 27.408-10.174 30.978-23.95 44.509 1.001 75.06 39.94 177.802 39.94 7.22 0 15.22.01 22.22.01 77.117 0 111.986-39.423 112.94-95.33 13.319-18.425 20.299-43.122 17.34-66.99 9.854-18.452 13.664-40.343 8.99-62.99zm-61.75 53.83c12.56 21.13 1.26 49.41-13.94 57.57 7.7 48.78-17.608 65.9-53.12 65.9h-37.82c-71.639 0-118.029-37.82-171.64-37.82V240h10.92c28.36 0 67.98-70.89 94.54-97.46 28.36-28.36 18.91-75.63 37.82-94.54 47.27 0 47.27 32.98 47.27 56.73 0 39.17-28.36 56.72-28.36 94.54h103.99c21.11 0 37.73 18.91 37.82 37.82.09 18.9-12.82 37.81-22.27 37.81 13.489 14.555 16.371 45.236-5.21 65.62zM88 432c0 13.255-10.745 24-24 24s-24-10.745-24-24 10.745-24 24-24 24 10.745 24 24z"/></svg>
          </div>

      </div>
      <div  >
          <div *ngIf="isAlertLoading" class="d-flex justify-content-center text-center">
            <mdb-progress-bar class="progress primary-color-dark mb-0" mode="indeterminate"></mdb-progress-bar>
          </div>
          <div class="table-responsive">
            <table mdbTable #tableEl2="mdbTable" class="table mb-0 table-bordered w-100 rpm-device-table">
              <thead class="bg-dynamic-2c text-white">
              <tr>
                <th scope="col">ID</th>
                <th scope="col" style="min-width: 150px;">Patient Name</th>
                <th scope="col">Modality</th>
                <!-- <th scope="col" style="min-width: 95px;">Alert Reason</th> -->
                <th scope="col" style="min-width: 120px;">Reading</th>
                <th scope="col" style="min-width: 120px;">Date/Time</th>
              </tr>
              </thead>
              <tbody>
              <tr *ngFor="let row of rpmAlertListOutOfRange; let i = index" [ngClass]="{'my-class-rpmalert' : row.isDue}">
                <ng-container *ngIf="alertFilterObj.outOfRange == 'all' || (alertFilterObj.outOfRange == 'addressed' && row.addressedById)
                || (alertFilterObj.outOfRange == 'unaddressed' && !row.addressedById)" >
                  <th *ngIf="i+1 >= tableEl2Page.firstItemIndex && i < tableEl2Page.lastItemIndex"
                      scope="row">{{i + 1}}</th>
                  <td *ngIf="i+1 >= tableEl2Page.firstItemIndex && i < tableEl2Page.lastItemIndex">
                    <div class="action-button d-flex justify-content-between align-items-center " >
                      <div class="d-inline-flex align-items-center">
                        <svg (click)="SetAddressedBy(row)" class="mr-1" xmlns="http://www.w3.org/2000/svg" *ngIf="row.addressedById" style="width: 14px;fill: #4eb048;" viewBox="0 0 512 512"><!-- Font Awesome Pro 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) --><path d="M104 224H24c-13.255 0-24 10.745-24 24v240c0 13.255 10.745 24 24 24h80c13.255 0 24-10.745 24-24V248c0-13.255-10.745-24-24-24zM64 472c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24zM384 81.452c0 42.416-25.97 66.208-33.277 94.548h101.723c33.397 0 59.397 27.746 59.553 58.098.084 17.938-7.546 37.249-19.439 49.197l-.11.11c9.836 23.337 8.237 56.037-9.308 79.469 8.681 25.895-.069 57.704-16.382 74.757 4.298 17.598 2.244 32.575-6.148 44.632C440.202 511.587 389.616 512 346.839 512l-2.845-.001c-48.287-.017-87.806-17.598-119.56-31.725-15.957-7.099-36.821-15.887-52.651-16.178-6.54-.12-11.783-5.457-11.783-11.998v-213.77c0-3.2 1.282-6.271 3.558-8.521 39.614-39.144 56.648-80.587 89.117-113.111 14.804-14.832 20.188-37.236 25.393-58.902C282.515 39.293 291.817 0 312 0c24 0 72 8 72 81.452z"/></svg>
                        <svg (click)="SetAddressedBy(row)" class="mr-1" xmlns="http://www.w3.org/2000/svg" *ngIf="!row.addressedById"  viewBox="0 0 512 512" style="width: 14px;fill:#212529"><!-- Font Awesome Pro 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) --><path d="M466.27 286.69C475.04 271.84 480 256 480 236.85c0-44.015-37.218-85.58-85.82-85.58H357.7c4.92-12.81 8.85-28.13 8.85-46.54C366.55 31.936 328.86 0 271.28 0c-61.607 0-58.093 94.933-71.76 108.6-22.747 22.747-49.615 66.447-68.76 83.4H32c-17.673 0-32 14.327-32 32v240c0 17.673 14.327 32 32 32h64c14.893 0 27.408-10.174 30.978-23.95 44.509 1.001 75.06 39.94 177.802 39.94 7.22 0 15.22.01 22.22.01 77.117 0 111.986-39.423 112.94-95.33 13.319-18.425 20.299-43.122 17.34-66.99 9.854-18.452 13.664-40.343 8.99-62.99zm-61.75 53.83c12.56 21.13 1.26 49.41-13.94 57.57 7.7 48.78-17.608 65.9-53.12 65.9h-37.82c-71.639 0-118.029-37.82-171.64-37.82V240h10.92c28.36 0 67.98-70.89 94.54-97.46 28.36-28.36 18.91-75.63 37.82-94.54 47.27 0 47.27 32.98 47.27 56.73 0 39.17-28.36 56.72-28.36 94.54h103.99c21.11 0 37.73 18.91 37.82 37.82.09 18.9-12.82 37.81-22.27 37.81 13.489 14.555 16.371 45.236-5.21 65.62zM88 432c0 13.255-10.745 24-24 24s-24-10.745-24-24 10.745-24 24-24 24 10.745 24 24z"/></svg>
                        <!-- <i (click)="SetAddressedBy(row)" [class.text-dynamic-2c]="row.addressedById" class="fa fa-thumbs-up mr-1 text-dynamic-2c" style="font-size: 18px;cursor:pointer;" ></i> -->
                        <a class="mb-0 link text-dynamic-2c text-left" style="cursor: pointer;margin:0;" container="body"
                        routerLink="/rpm/PatientRpm/{{row.patientId}}"
                          title="{{'Facility: ' + row.facilityName }}  {{'\n Phone: ' + row.phone }}  {{ '\n Email: ' + row.email}}"
                          placement="right">{{row.patientName}}
                        </a>
                      </div>

                      <!-- <button (click)="selectedRpmAlert=row;quickEncounterModal.show();rpmServiceType= 5;PatientEncounterMonthlyStatus= row.rpmMonthlyStatus;PatientEncounterMonthlyStatusTExt = rpmMonthlyStatusEnum[row.rpmMonthlyStatus] " title="Create Encounter"
                        class="btn btn-dynamic-2c btn-icon my-1 ml-0 mr-0" >
                        <i class="fa fa-bolt"></i>
                      </button> -->
                    </div>
                  </td>
                  <td  *ngIf="i+1 >= tableEl2Page.firstItemIndex && i < tableEl2Page.lastItemIndex">{{row.modality}}</td>
                  <!-- <td *ngIf="i+1 >= tableEl2Page.firstItemIndex && i < tableEl2Page.lastItemIndex">{{row.alertReason}}</td> -->
                  <td *ngIf="i+1 >= tableEl2Page.firstItemIndex && i < tableEl2Page.lastItemIndex" style="white-space: nowrap;"><i  title="Alerts History" class=" fa-lg fa fa-history text-dynamic-2c" style="cursor: pointer;" (click)="selectedRpmAlertOutOfRange=row;getRpmReadingHistory(outOfRangeAlertsHistoryModal)"></i> {{row.reading}} </td>
                  <td *ngIf="i+1 >= tableEl2Page.firstItemIndex && i < tableEl2Page.lastItemIndex">{{row.measurementDate }}</td>
                </ng-container>
              </tr>
              <tr *ngIf="!rpmAlertListOutOfRange">
                <td colspan="5" class="py-3">No data to display</td>
              </tr>
              </tbody>
              <tfoot class="grey lighten-5 w-100">
              <tr>
                <td colspan="6">
                  <mdb-table-pagination #tableEl2Page [tableEl]="tableEl2" [searchDataSource]="rpmAlertListOutOfRange"></mdb-table-pagination>
                </td>
              </tr>
              </tfoot>
            </table>
          </div>
      </div>
  </div>
  </div>
  <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12">
      <div class="rpm-alert" style="min-height: 383px;max-height: 383px">
          <div class="d-flex justify-content-between align-items-center mx-3 rpm-alert-title">
              <p class="mb-0 text-center"><strong>Time Lapse Alerts <span *ngIf="rpmAlertListTimeLapse?.length">({{timeLapseAddressedCount || 0}}/{{rpmAlertListTimeLapse?.length || ''}})</span></strong></p>
              <div class="d-flex align-items-center">
                <div>
                  <span [class.active]="alertFilterObj.missedReading == 'all'" (click)="alertFilterObj.missedReading='all'" title="UnAssociated Communications" class="btn btn-icon msg-badge">All</span>
                </div>
                <svg [class.active]="alertFilterObj.missedReading == 'addressed'" (click)="alertFilterObj.missedReading='addressed'" class="ml-2 mr-2 alertAddressedSelection" xmlns="http://www.w3.org/2000/svg" style="width: 20px;fill: #4eb048; cursor: pointer;" viewBox="0 0 512 512"><!-- Font Awesome Pro 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) --><path d="M104 224H24c-13.255 0-24 10.745-24 24v240c0 13.255 10.745 24 24 24h80c13.255 0 24-10.745 24-24V248c0-13.255-10.745-24-24-24zM64 472c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24zM384 81.452c0 42.416-25.97 66.208-33.277 94.548h101.723c33.397 0 59.397 27.746 59.553 58.098.084 17.938-7.546 37.249-19.439 49.197l-.11.11c9.836 23.337 8.237 56.037-9.308 79.469 8.681 25.895-.069 57.704-16.382 74.757 4.298 17.598 2.244 32.575-6.148 44.632C440.202 511.587 389.616 512 346.839 512l-2.845-.001c-48.287-.017-87.806-17.598-119.56-31.725-15.957-7.099-36.821-15.887-52.651-16.178-6.54-.12-11.783-5.457-11.783-11.998v-213.77c0-3.2 1.282-6.271 3.558-8.521 39.614-39.144 56.648-80.587 89.117-113.111 14.804-14.832 20.188-37.236 25.393-58.902C282.515 39.293 291.817 0 312 0c24 0 72 8 72 81.452z"/></svg>
                <svg [class.active]="alertFilterObj.missedReading == 'unaddressed'" (click)="alertFilterObj.missedReading='unaddressed'" class="alertAddressedSelection" xmlns="http://www.w3.org/2000/svg" style="width: 20px;fill: #212529; cursor: pointer;"  viewBox="0 0 512 512"><!-- Font Awesome Pro 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) --><path d="M466.27 286.69C475.04 271.84 480 256 480 236.85c0-44.015-37.218-85.58-85.82-85.58H357.7c4.92-12.81 8.85-28.13 8.85-46.54C366.55 31.936 328.86 0 271.28 0c-61.607 0-58.093 94.933-71.76 108.6-22.747 22.747-49.615 66.447-68.76 83.4H32c-17.673 0-32 14.327-32 32v240c0 17.673 14.327 32 32 32h64c14.893 0 27.408-10.174 30.978-23.95 44.509 1.001 75.06 39.94 177.802 39.94 7.22 0 15.22.01 22.22.01 77.117 0 111.986-39.423 112.94-95.33 13.319-18.425 20.299-43.122 17.34-66.99 9.854-18.452 13.664-40.343 8.99-62.99zm-61.75 53.83c12.56 21.13 1.26 49.41-13.94 57.57 7.7 48.78-17.608 65.9-53.12 65.9h-37.82c-71.639 0-118.029-37.82-171.64-37.82V240h10.92c28.36 0 67.98-70.89 94.54-97.46 28.36-28.36 18.91-75.63 37.82-94.54 47.27 0 47.27 32.98 47.27 56.73 0 39.17-28.36 56.72-28.36 94.54h103.99c21.11 0 37.73 18.91 37.82 37.82.09 18.9-12.82 37.81-22.27 37.81 13.489 14.555 16.371 45.236-5.21 65.62zM88 432c0 13.255-10.745 24-24 24s-24-10.745-24-24 10.745-24 24-24 24 10.745 24 24z"/></svg>
              </div>
            </div>
          <div  >
              <div *ngIf="isAlertLoading" class="d-flex justify-content-center text-center">
                <mdb-progress-bar class="progress primary-color-dark mb-0" mode="indeterminate"></mdb-progress-bar>
              </div>
              <div class="table-responsive">
                <table mdbTable #tableEl1="mdbTable" class="table table-bordered w-100 rpm-device-table">
                  <thead class="bg-dynamic-2c text-white">
                  <tr>
                    <th scope="col">ID</th>
                    <th scope="col" style="min-width: 150px;">Patient Name</th>
                    <th scope="col">Modality</th>
                    <!-- <th scope="col" style="min-width: 95px;">Alert Reason</th> -->
                    <!-- <th scope="col" style="min-width: 120px;">Reading</th> -->
                    <th scope="col" style="min-width: 120px;">Alert Date</th>
                  </tr>
                  </thead>
                  <tbody>
                  <tr *ngFor="let row of rpmAlertListTimeLapse; let i = index" [ngClass]="{'my-class-rpmalert' : row.isDue}">
                    <ng-container *ngIf="alertFilterObj.missedReading == 'all' || (alertFilterObj.missedReading == 'addressed' && row.addressedById)
                    || (alertFilterObj.missedReading == 'unaddressed' && !row.addressedById)" >
                      <th *ngIf="i+1 >= tableEl1Page.firstItemIndex && i < tableEl1Page.lastItemIndex"
                          scope="row">{{i + 1}}</th>
                      <td *ngIf="i+1 >= tableEl1Page.firstItemIndex && i < tableEl1Page.lastItemIndex">
                        <div class="action-button d-flex justify-content-between align-items-center " >
                          <div class="d-inline-flex justify-content-between w-100 align-items-center">
                            <div>
                              <svg (click)="SetAddressedBy(row)" class="mr-1" xmlns="http://www.w3.org/2000/svg" *ngIf="row.addressedById" style="width: 14px;fill: #4eb048;" viewBox="0 0 512 512"><!-- Font Awesome Pro 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) --><path d="M104 224H24c-13.255 0-24 10.745-24 24v240c0 13.255 10.745 24 24 24h80c13.255 0 24-10.745 24-24V248c0-13.255-10.745-24-24-24zM64 472c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24zM384 81.452c0 42.416-25.97 66.208-33.277 94.548h101.723c33.397 0 59.397 27.746 59.553 58.098.084 17.938-7.546 37.249-19.439 49.197l-.11.11c9.836 23.337 8.237 56.037-9.308 79.469 8.681 25.895-.069 57.704-16.382 74.757 4.298 17.598 2.244 32.575-6.148 44.632C440.202 511.587 389.616 512 346.839 512l-2.845-.001c-48.287-.017-87.806-17.598-119.56-31.725-15.957-7.099-36.821-15.887-52.651-16.178-6.54-.12-11.783-5.457-11.783-11.998v-213.77c0-3.2 1.282-6.271 3.558-8.521 39.614-39.144 56.648-80.587 89.117-113.111 14.804-14.832 20.188-37.236 25.393-58.902C282.515 39.293 291.817 0 312 0c24 0 72 8 72 81.452z"/></svg>
                              <svg (click)="SetAddressedBy(row)" class="mr-1" xmlns="http://www.w3.org/2000/svg" *ngIf="!row.addressedById"  viewBox="0 0 512 512" style="width: 14px;fill:#212529"><!-- Font Awesome Pro 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) --><path d="M466.27 286.69C475.04 271.84 480 256 480 236.85c0-44.015-37.218-85.58-85.82-85.58H357.7c4.92-12.81 8.85-28.13 8.85-46.54C366.55 31.936 328.86 0 271.28 0c-61.607 0-58.093 94.933-71.76 108.6-22.747 22.747-49.615 66.447-68.76 83.4H32c-17.673 0-32 14.327-32 32v240c0 17.673 14.327 32 32 32h64c14.893 0 27.408-10.174 30.978-23.95 44.509 1.001 75.06 39.94 177.802 39.94 7.22 0 15.22.01 22.22.01 77.117 0 111.986-39.423 112.94-95.33 13.319-18.425 20.299-43.122 17.34-66.99 9.854-18.452 13.664-40.343 8.99-62.99zm-61.75 53.83c12.56 21.13 1.26 49.41-13.94 57.57 7.7 48.78-17.608 65.9-53.12 65.9h-37.82c-71.639 0-118.029-37.82-171.64-37.82V240h10.92c28.36 0 67.98-70.89 94.54-97.46 28.36-28.36 18.91-75.63 37.82-94.54 47.27 0 47.27 32.98 47.27 56.73 0 39.17-28.36 56.72-28.36 94.54h103.99c21.11 0 37.73 18.91 37.82 37.82.09 18.9-12.82 37.81-22.27 37.81 13.489 14.555 16.371 45.236-5.21 65.62zM88 432c0 13.255-10.745 24-24 24s-24-10.745-24-24 10.745-24 24-24 24 10.745 24 24z"/></svg>
                              <a class="mb-0 link text-dynamic-2c text-left" style="cursor: pointer;margin:0;" container="body"
                              routerLink="/rpm/PatientRpm/{{row.patientId}}"
                                title="{{'Facility: ' + row.facilityName }}  {{'\n Phone: ' + row.phone }}  {{ '\n Email: ' + row.email}}"
                                placement="right">{{row.patientName}}
                              </a>
                            </div>

                            <button class="btn btn-icon btn-dynamic-2c">
                              <span title="Alerts History" class=" fa-lg fa fa-history" style="cursor: pointer;" (click)="isPatientModalityDetails=false;selectedRpmAlertOutOfRange=row;getRpmReadingHistory(outOfRangeAlertsHistoryModal)"></span>
                            </button>
                          </div>
                          <!-- <button (click)="selectedRpmAlert=row;resetEncounterModal(rpmEncounterModal);rpmEncounterDto.rpmServiceType=2;rpmServiceType= 5" title="Create Encounter"
                            class="btn btn-dynamic-2c btn-icon my-1 ml-0 mr-0" >
                            <i class="fa fa-bolt"></i>
                          </button> -->
                        </div>
                      </td>
                      <td  *ngIf="i+1 >= tableEl1Page.firstItemIndex && i < tableEl1Page.lastItemIndex">{{row.modality}}</td>
                      <!-- <td *ngIf="i+1 >= tableEl1Page.firstItemIndex && i < tableEl1Page.lastItemIndex" >
                        <i title="Alerts History" class=" fa-lg fa fa-history text-dynamic-2c" style="cursor: pointer;" (click)="isPatientModalityDetails=false;selectedRpmAlertOutOfRange=row;getRpmReadingHistory(outOfRangeAlertsHistoryModal)"></i>
                        {{row.alertReason}}</td> -->
                      <!-- <td *ngIf="i+1 >= tableEl1Page.firstItemIndex && i < tableEl1Page.lastItemIndex">{{row.reading}}</td> -->
                      <td *ngIf="i+1 >= tableEl1Page.firstItemIndex && i < tableEl1Page.lastItemIndex">{{row.alertTime | dateFormatPipe}}</td>
                    </ng-container>
                  </tr>
                  <tr *ngIf="!rpmAlertListTimeLapse">
                    <td colspan="5" class="py-3">No data to display</td>
                  </tr>
                  </tbody>
                  <tfoot class="grey lighten-5 w-100">
                  <tr>
                    <td colspan="5">
                      <mdb-table-pagination #tableEl1Page [tableEl]="tableEl1" [searchDataSource]="rpmAlertListTimeLapse"></mdb-table-pagination>
                    </td>
                  </tr>
                  </tfoot>
                </table>
              </div>
          </div>
      </div>
  </div>
</div>
</div>

<div class="d-flex align-items-end form-group mt-2">
  <div class="row flex-1">
    <div class="col-6 pr-0">
      <label for="searchBy">Search Patient</label>
      <div class="d-flex align-items-center justify-content-start">
        <input [hidden]="filterPatientDto.filterBy === 2" type="text" #searchPatient
        [(ngModel)]="filterPatientDto.searchParam" autocomplete="off"
        class="form-control form-control-sm box-shadow w-100" id="searchBy"
        placeholder="{{ filterPatientDto.filterBy === 1 ? 'Name / EMR ID' : filterPatientDto.filterBy === 2 ? 'Date of Birth e.g yyyy-MM-dd': 'Phone No'}}" />
      <input [hidden]="filterPatientDto.filterBy !== 2" id="searchBy" type="text"
        class="bg-white form-control form-control-sm box-shadow w-100" #dateDPicker="dpDayPicker" autocomplete="off"
        [dpDayPicker]="datePickerConfigForFilterDOB" placeholder="MM-DD-YYYY" [(ngModel)]="filterPatientDto.searchParam"
        (ngModelChange)="filterPatientDto.searchParam.length == 10 ? filterPatients(): ''"
        [theme]="'dp-material ccm-date-picker'" [mode]="'day'" />
      </div>
    </div>
    <div class="col-6 pl-2">
      <label for="namea">Filter By</label>
      <ng-select class="ng-select-small"  [(ngModel)]="filterPatientDto.filterBy"
        (ngModelChange)="filterPatientDto.searchParam = '';filterPatients()" [closeOnSelect]="true" [multiple]="false"
        [searchable]="true" placeholder="Filter By">
        <ng-option [value]="1">Name, EMR ID </ng-option>
        <ng-option [value]="2">Date of Birth </ng-option>
        <ng-option [value]="3">Phone No </ng-option>
      </ng-select>
    </div>
  </div>
  <div class="d-inline-flex">
    <button type="button" class="btn btn-dynamic-2c btn-sm my-0 flex-shrink-0 mr-0" appDebounceClick (debounceClick)="home.toggle()"
    ><i class="fa fa-filter fa-lg"></i>
        Filter</button>
        <button type="button" class="btn btn-dynamic-secondary-2c btn-sm my-0 flex-shrink-0"
              (click)="clearDatePickerSelection();resetFilters()"><i
                class="fa fa-refresh fa-lg"></i> Reset</button>
        <button [disabled]="isDownloadingPatientsData" class="btn px-3 m-0 collapse-btn btn-dynamic-2c btn-icon" (click)="GetRPMPatientListExcelFile()" title="Download Excel">
          <span *ngIf="isDownloadingPatientsData"  class="spinner-border spinner-border-sm" role="status"
            aria-hidden="true"></span>
          <i *ngIf="!isDownloadingPatientsData" class="fa fa-download"></i>
        </button>
  </div>
</div>
<div class="search-filter collapseable" mdbCollapse #home="bs-collapse">
  <div class="panel mt-3" style="overflow: visible;">
    <div class="panel-header d-flex justify-content-between align-items-center">
      <h3>Search Filter</h3>
      <div>
        <button type="button" class="close pull-right" aria-label="Close" (click)="home.hide()">
          <span aria-hidden="true">×</span>
        </button>
      </div>
    </div>
    <div class="panel-body">
      <div class="row">
        <div class="col-xl-3 col-lg-6 col-sm-6">
          <div class="form-group">
            <label for="name">Assigned/Unassigned</label>
            <ng-select [(ngModel)]="filterPatientDto.Assigned" [searchable]="false"
              class="ng-select-small" placeholder="Assigned/Unassigned"
              [ngClass]="{'my-class': filterPatientDto.Assigned > 0}" [closeOnSelect]="true">
              <ng-option [value]="0">All Patients </ng-option>
              <ng-option [value]="1">Assigned</ng-option>
              <ng-option [value]="2">Unassigned</ng-option>
            </ng-select>
          </div>
        </div>
        <div class="col-xl-3 col-lg-6 col-sm-6">
          <div class="form-group mb-0">
            <label class="w-100">Assigned Date </label>
            <input *ngIf="showAssignDateField" id="assignedDateField" class="form-control form-control-sm box-shadow w-100" type="text" autocomplete="nope"
              [(ngModel)]="selectedDateRange" name="daterangeInput" daterangepicker [options]="options"
              (selected)="selectDate($event, daterange, 'assignDate')" placeholder="Date" (cancelDaterangepicker)="clearDate('assignDate');clearDatePickerSelection();" />
            <input *ngIf="!showAssignDateField" id="assignedDateField" class="form-control form-control-sm box-shadow w-100" type="text" autocomplete="nope"
              [(ngModel)]="selectedDateRange" name="daterangeInput" daterangepicker [options]="options"
              (selected)="selectDate($event, daterange, 'assignDate')" placeholder="Date" (cancelDaterangepicker)="clearDate('assignDate');clearDatePickerSelection();" />
          </div>
        </div>
        <div class="col-xl-3 col-lg-6 col-sm-6">
          <div class="form-group">
          <label for="name">Encounter Time</label>
            <ng-select [(ngModel)]="filterPatientDto.rpmTimeRange"  (ngModelChange)="fillValue()" (add)="filterEcounterTime($event)"
              [searchable]="false" [closeOnSelect]="true" class="ng-select-small" placeholder="Encounter Time"
              [multiple]="true">
              <!-- <ng-option [value]="-1">NA</ng-option> -->
              <ng-option [value]="item.value" *ngFor="let item of rpmEncounterTimeEnumList">{{item.name}} </ng-option>
            </ng-select>
          </div>
        </div>
        <div class="col-xl-3 col-lg-6 col-sm-6">
          <div class="form-group mb-0">
            <label class="w-100">Last Reading Date </label>
            <input *ngIf="showLastReadingDateField" id="lastReadingDate" class="form-control form-control-sm box-shadow w-100" type="text" autocomplete="nope"
              [(ngModel)]="selectedDateRangeOfLastReading" name="daterangeInput" daterangepicker [options]="options"
              (selected)="selectDate($event, daterangeOfLastReading, 'lastReadingDate')" placeholder="Date" (cancelDaterangepicker)="clearDate('lastReadingDate');clearLastReadingDateSelection()" />
              <input *ngIf="!showLastReadingDateField" id="lastReadingDate" class="form-control form-control-sm box-shadow w-100" type="text" autocomplete="nope"
              [(ngModel)]="selectedDateRangeOfLastReading" name="daterangeInput" daterangepicker [options]="options"
              (selected)="selectDate($event, daterangeOfLastReading, 'lastReadingDate')" placeholder="Date" (cancelDaterangepicker)="clearDate('lastReadingDate');clearLastReadingDateSelection()" />
          </div>
        </div>
        <div class="col-xl-3 col-lg-6 col-sm-6">
          <div class="form-group mb-0">
            <label class="w-100">Last Log Date </label>
            <input *ngIf="showLastLogDateField" id="lastLogDate" class="form-control form-control-sm box-shadow w-100" type="text" autocomplete="nope"
              [(ngModel)]="selectedDateRangeOfLastLog" name="daterangeInput" daterangepicker [options]="options"
              (selected)="selectDate($event, daterangeOfLastReading, 'lastLogDate')" placeholder="Date" (cancelDaterangepicker)="clearDate('lastLogDate');clearLastLogDateSelection()" />
            <input *ngIf="!showLastLogDateField" id="lastLogDate" class="form-control form-control-sm box-shadow w-100" type="text" autocomplete="nope"
              [(ngModel)]="selectedDateRangeOfLastLog" name="daterangeInput" daterangepicker [options]="options"
              (selected)="selectDate($event, daterangeOfLastReading, 'lastLogDate')" placeholder="Date" (cancelDaterangepicker)="clearDate('lastLogDate');clearLastLogDateSelection()" />
          </div>
        </div>
        <div class="col-xl-3 col-lg-6 col-sm-6">

          <label>Reading Days</label>
          <div>
            <div class="position-relative" style="top: 25px;">
              <div  id="popTemplates" placement="bottom" [mdbPopover]="popTemplates" #popTemplate="bs-mdbPopover" >
              </div>
              <ng-template #popTemplates>
                <div class="p-3 pt-4 position-relative mt-4"  >
                  <span (click)="popTemplate.hide()" class="fa fa-times cursor-pointer" style="position: absolute;right: 8px;top: -13px;font-weight: 600;"></span>
                  <div class="row">

                    <div class="col-6 pr-1">
                      <div class="form-group mb-1">
                        <input type="number" placeholder="From" class="form-control" [(ngModel)]="fromTransmissionDays">
                      </div>
                    </div>
                    <div class="col-6 pl-1">
                      <div class="form-group mb-1">
                        <input type="number" placeholder="To" class="form-control" [(ngModel)]="toTransmissionDays">
                      </div>
                    </div>
                    <div class="col-12 text-right">
                      <button class="btn btn-sm btn-danger mb-0" (click)="popTemplate.hide()">cancel</button>
                      <button class="btn btn-sm btn-dynamic-2c mb-0" [disabled]="fromTransmissionDays == null || toTransmissionDays == null" (click)="assignTransmissionDate();popTemplate.hide()">Save</button>
                    </div>
                  </div>
                </div>
              </ng-template>
            </div>
            <button type="button"  class="btn btn-outline-defualts btn-sm m-0" (click)="popTemplate.show()" >
              From {{filterPatientDto.FromTransmissionDays}} , To {{filterPatientDto.ToTransmissionDays}}
              <i class="fa fa-caret-down ml-1"></i>
            </button>
          </div>
        </div>
        <div class="col-xl-3 col-lg-6 col-sm-6">
          <div class="form-group">
          <label for="name">RPM Monthly Status</label>
            <ng-select [(ngModel)]="filterPatientDto.rpmMonthlyStatus"  (ngModelChange)="fillRpmMonthlyStatusValue()" (add)="filterMonthlyStatus($event)"
              [searchable]="false" [closeOnSelect]="true" class="ng-select-small" placeholder="RPM Monthly Status"
              [multiple]="true">
              <ng-option [value]="''">All</ng-option>
              <ng-option [value]="item.value" *ngFor="let item of rpmMonthlyStatusList">{{item.name}} </ng-option>
            </ng-select>
          </div>
        </div>
        <div class="col-xl-3 col-lg-6 col-sm-6">
          <div class="form-group">
            <label for="smsConsented">SMS Consent</label>
            <ng-select [(ngModel)]="filterPatientDto.communicationConsent" id="smsCOnsented" appendTo="body" [searchable]="false"
              [closeOnSelect]="true" [clearable]="false" class="ng-select-small" placeholder="Sms Consented">
              <ng-option *ngFor="let item of communicationConsentList" [value]="item.value">{{item.name}}</ng-option>
            </ng-select>
          </div>
        </div>
        <div class="col-xl-3 col-lg-6 col-sm-6">
          <div class="form-group">
            <label for="smsConsented">Patient Not Responded</label>
            <ng-select [(ngModel)]="filterPatientDto.patientNotRespond" id="smsCOnsented" appendTo="body" [searchable]="false"
              [closeOnSelect]="true" [clearable]="false" class="ng-select-small" placeholder="Sms Consented">
              <ng-option *ngFor="let item of daysPatientNotRespondList" [value]="item.value">{{item.name}}</ng-option>
            </ng-select>
          </div>
        </div>
        <!-- <div class="col-xl-3 col-lg-6 col-sm-6">
          <div class="form-group">
          <label for="name">RPM Monthly Status</label>
            <ng-select [(ngModel)]="filterPatientDto.rpmMonthlyStatus"  (ngModelChange)="rpmMonthlyStatusFilterChanged()" (add)="filterMonthlyStatus($event)"
              [searchable]="false" [closeOnSelect]="true" class="ng-select-small" placeholder="RPM Monthly Status"
              [multiple]="true">
              <ng-option [value]="''">All</ng-option>
              <ng-option [value]="item.value" *ngFor="let item of rpmMonthlyStatusList">{{item.name}} </ng-option>
            </ng-select>
          </div>
        </div> -->
        <!-- <div class="col-xl-3 col-lg-6 col-sm-6">
          <div class="form-group">
          <label for="name">RPM Status</label>
            <ng-select [(ngModel)]="filterPatientDto.rpmStatus" (ngModelChange)="syncQuickActions()"
              [searchable]="false" [clearable]="false" [closeOnSelect]="true" class="ng-select-small" placeholder="RPM Status"
              [multiple]="false">
              <ng-option [value]="-1">All</ng-option>
              <ng-option [value]="item.value" *ngFor="let item of rpmMonthlyStatusListFromEnum">{{item.name}} </ng-option>
            </ng-select>
          </div>
        </div> -->
        <div class="col-xl-12 col-lg-12 col-sm-12 text-right">
          <div class="btn-group" style="padding-top: 1.85rem;">
            <button type="button" class="btn btn-dynamic-2c btn-sm my-0 flex-shrink-0"
              (click)="filterPatients();scrollToTable();"><i class="fa fa-filter fa-lg"></i> Search</button>
            <!-- <button type="button" class="btn btn-dynamic-secondary-2c btn-sm my-0 flex-shrink-0"
              (click)="resetFilter();FillCareProvider();filterPatients();initialiceCCMMonthlyParamObj();GetMonthlyCcmData()"><i
                class="fa fa-refresh fa-lg"></i> Reset</button> -->
            <!-- <button type="button"  class="btn btn-dynamic-secondary-2c btn-sm my-0 flex-shrink-0 float-right"
              (click)="getPatientListExcelFile()"> Download</button> -->
          </div>
        </div>
        </div>

      </div>
    </div>


  </div>

<div mdbModal #deletePatientModal="mdbModal" class="modal fade" tabindex="-1" role="dialog"
aria-labelledby="myBasicModalLabel" aria-hidden="true">
<div class="modal-dialog modal-dialog-centered modal-md flat-modal modal-dialog-scrollable" role="document">
  <div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close pull-right" aria-label="Close" (click)="deletePatientModal.hide()">
        <span aria-hidden="true">×</span>
      </button>
      <h4 class="modal-title w-100">Delete Patient</h4>
    </div>
    <div class="modal-body">
      <div class="row">
        <div class="col-sm-12">

          <div class="alert alert-danger" role="alert">

            <p class="mb-0" style="font-size: 14px;">Only delete the patient in case the patient was added
              erroneously
              or there is a duplicate record.<br>
              For any other reason please change the CCM status of the patient.
              Deleted patients will be erased from the database along with their previous records. In most cases
              changing status is
              more appropriate. Never delete the patient with current month activity else it will affect the
              invoice,
              please contact
              support for appropriate action.
            </p>
          </div>

        </div>
        <!-- <div class="col-sm-12 mb-2">
          <small class="text-dynamic-2c text-uppercase font-500">User Information</small>
        </div> -->
        <div class="col-sm-12">
          <div class="form-group">
            <label for="practiceName">Delete Status <sup class="text-danger">*</sup></label>
            <ng-select class="ng-select-small" [(ngModel)]="deletePatientDto.reasonDeleted" [multiple]="false"
              [searchable]="true" placeholder="Status">
              <ng-option [value]="0">None</ng-option>
              <ng-option [value]="1">Deceased </ng-option>
              <ng-option [value]="2">Duplicate Entry </ng-option>
              <ng-option [value]="3">Added Erronously </ng-option>
            </ng-select>
          </div>

          <div class="form-group">
            <label for="reason">Reason <sup class="text-danger">*</sup></label>
            <textarea type="text" id="reason" rows="15" [(ngModel)]="deletePatientDto.reasonDeleteDetails"
              placeholder="Reason" class="form-control" style="height: 150px;"></textarea>
          </div>
        </div>

      </div>
    </div>
    <div class="modal-footer">
      <button type="submit" class="btn btn-dark btn-sm" (click)="deletePatientModal.hide()">Close</button>
      <button type="submit" class="btn btn-dynamic-2c btn-sm" (click)="deletePatientModal.hide();deletePatient()"
        [disabled]="!deletePatientDto.reasonDeleted || !deletePatientDto.reasonDeleteDetails">Delete</button>
    </div>
  </div>
</div>
</div>
<div class="position-relative patients-list">
<!-- <div class="position-absolute d-flex" style="right: 0;">
  <mdb-checkbox [default]="true" [(ngModel)]="filterPatientDto.showActivePatientsWithNoReadings" (change)="filterPatients()" class="mr-2">Show Active Patients With No Readings</mdb-checkbox>
  <mdb-checkbox [default]="true" [(ngModel)]="filterPatientDto.showInActivePatientsWithReadings" (change)="filterPatients()" class="mr-2">Show InActive Patients With Readings</mdb-checkbox>
  <mdb-checkbox [default]="true" [(ngModel)]="filterPatientDto.showAll" (change)="checkShowAllValue();filterPatients()">Show All
  </mdb-checkbox>
</div>  -->
<!-- <div class="position-absolute d-flex" style="right: 0;">

  <div class="form-group">
    <div class="form-check form-check-inline">
      <input type="radio" class="form-check-input"  id="healthCareAdvancedDirectives" [value]="true"
        [(ngModel)]="filterPatientDto.showActivePatientsWithNoReadings" (ngModelChange)="filterPatientDto.showInActivePatientsWithReadings = false;filterPatientDto.showAll = false;filterPatients()"
        name="healthCareAdvancedDirectives" mdbInput>
      <label class="form-check-label" for="healthCareAdvancedDirectives">Show Active Patients With No Readings</label>
    </div>
    <div class="form-check form-check-inline">
      <input type="radio" class="form-check-input"  id="healthCareAdvancedDirectives1" [value]="true"
        [(ngModel)]="filterPatientDto.showInActivePatientsWithReadings" (ngModelChange)="filterPatientDto.showActivePatientsWithNoReadings = false;filterPatientDto.showAll = false;filterPatients()"
        name="healthCareAdvancedDirectives1" mdbInput>
      <label class="form-check-label" for="healthCareAdvancedDirectives1">Show InActive Patients With Readings</label>
    </div>
    <div class="form-check form-check-inline">
      <input type="radio" class="form-check-input"  id="healthCareAdvancedDirectives2" [value]="true"
        [(ngModel)]="filterPatientDto.showAll" (ngModelChange)="filterPatientDto.showActivePatientsWithNoReadings = false;filterPatientDto.showInActivePatientsWithReadings = false;filterPatients()"
        name="healthCareAdvancedDirectives2" mdbInput>
      <label class="form-check-label" for="healthCareAdvancedDirectives2">Show All</label>
    </div>
  </div>


</div> -->
<app-custom-list-for-patient-lists #customListForPatientsListCompRef  *hasClaim="['CanViewCustomList']" (deselectRows)="deselectCheckedRows()" (selectedCustomList)="fillCustomListValue($event)"></app-custom-list-for-patient-lists>
<!-- <div *hasClaim="['CanViewCustomList']" style="top:-2px;" class="col-xl-6 col-lg-7 col-md-8 custom-list-dropdown px-0">
  <div class="d-flex align-items-center mb-2" *ngIf="CustomListDto && CustomListDto.length > 0">
    <div class="d-inline-flex align-items-center w-100">
      <label class="mb-0" for="name">Apply Custom List</label>
      <ng-select [(ngModel)]="filterPatientDto.customListId" [searchable]="false" [closeOnSelect]="true"
        (ngModelChange)="filterPatients()"  class="flex-grow-1 ml-3 ng-select-small" placeholder="Custom Lists"
        [ngClass]="{'my-class': filterPatientDto.customListId > 0}">
        <ng-option [value]="0">Select Custom List</ng-option>
        <ng-option [value]="item.id" *ngFor="let item of CustomListDto">{{item.name}} </ng-option>
      </ng-select>
    </div>
    <div class="d-inline-flex">
      <div class="" *hasClaim="['CanViewCustomList']">
        <ng-container  *ngIf="(CustomListDto && CustomListDto.length) && (selected && selected.length) && filterPatientDto.customListId == 0" >
          <div title="Add to custom list" class="dropdown" mdbDropdown  [isDisabled]="addingPatientToCustomList">
            <button mdbDropdownToggle mdbBtn class="btn btn-icon btn-dynamic-2c mt-0 mb-0  mr-0" placement="left">
             <i class="fa fa-plus"></i>
            </button>
            <div class="dropdown-menu dropdown-menu-right ">
              <a class="dropdown-item" *ngFor="let item of CustomListDto"
                (click)="$event.stopPropagation();AddPatientsToList(item.id)"><i
                  class="fa fa-arrow-alt-circle-up fa-lg mr-1"></i>{{item.name}}
                </a>
            </div>
          </div>
        </ng-container>

      </div>
      <button title="Delete from custom list" [disabled]="isDeletingPatientFromCustomList" *ngIf="(CustomListDto && CustomListDto.length) && (selected && selected.length) && filterPatientDto.customListId > 0" class="btn btn-icon my-0 btn-danger "
        (click)="removePatientsFromList()" >
        <span class="fa fa-trash"></span>
      </button>
    </div>
  </div>

</div> -->
<div class="text-right" style="position: absolute;right: 5px;top: 40px;">
  <p class="mb-0 text-danger" style="font-size: 12px;">Daily reading of Continous Glucose Monitoring are based on average of the day</p>
</div>
<div *ngIf="isLoading" class="d-flex justify-content-center text-center loadingrow">
<mdb-progress-bar class="progress primary-color-dark mb-0" mode="indeterminate"></mdb-progress-bar>
</div>

<table datatable [dtOptions]="dtOptions" id="example" [dtTrigger]="dtTrigger"
class="cell-border hover text-nowrap ccm-datatable">
<thead>
  <tr>

    <th>
      <div class="text-center">
      <div class="custom-control custom-checkbox">
        <input class="custom-control-input" type="checkbox" id="selectAll" [(ngModel)]="gridCheckAll"
          (change)="gridAllRowsCheckBoxChecked($event)">
        <label class="custom-control-label" for="selectAll"></label>
      </div>
      </div>
    </th>
    <th>ID</th>
    <th>
      <span style="white-space: nowrap; display: block;">Name</span>
    </th>
    <th style="width: 24px;">Chat &nbsp;</th>
    <th>Time</th>
    <th>Days</th>
    <th>RPM Status</th>
    <th [hidden]="filterPatientDto.serviceMonth !== currentMonth" >RPM Monthly Status</th>
    <th>Assigned Date</th>
    <th>Last Visit</th>
    <th>Last Reading Date</th>
    <th>Last Log Date</th>
    <th>Rpm Coordinator</th>
    <!-- <th>CP Name</th> -->
    <!-- <th>Action</th> -->
  </tr>
</thead>
<tbody>
  <tr *ngFor="let row of rows; let i = index">
    <!-- (click)="row.checked = !row.checked; selectRow(row)" -->
    <td>
      <div class="text-center">
        <div class="custom-control custom-checkbox">
          <input class="custom-control-input" type="checkbox" id="{{(i + 1) + rowIndex}}" [(ngModel)]="row.checked"
            (click)="rowCheckBoxChecked($event, row)">
          <label class="custom-control-label" for="{{(i + 1) + rowIndex}}"></label>
        </div>
      </div>
    </td>
    <td>
      <small class="mr-3">{{ i + 1 + rowIndex }}</small>
    </td>
    <td class="position-relative">
      <div class="d-flex justify-content-between align-items-center">
        <!-- <small class="mr-3">{{(i + 1) + rowIndex}}</small> -->
      <div class="d-inline-flex align-items-center">
        <span *ngIf="row.profileStatus" (click)="OpenEncounterLogsModal(row,openEncounterLogsModal)" class="status-bullet bg-success" title="Profile Complete&#013;Click to see Logs History"></span>
        <span *ngIf="!row.profileStatus" (click)="OpenEncounterLogsModal(row,openEncounterLogsModal)" class="status-bullet bg-danger" title="Profile Incomplete&#013;Click to see Logs History"></span>
        <a class="mb-0 text-capitalize link text-dynamic-2c text-left ml-2" placement="right" container="body" [mdbTooltip]="PatientInfoPop"
          style="white-space: nowrap; height: 36px; display: inline-flex;margin-right:20px;min-width: 101px;
          align-items: center" (click)="onClickRow(row, $event)">
          {{row.fullName}} </a>

        <ng-template #PatientInfoPop>
          <div class="p-2">
            <p class="mb-0"><strong>DOB</strong> {{row.dateOfBirth | dateFormatPipe}} </p>
            <p class="mb-0"><strong>EMR ID:</strong> {{row.patientEmrId}} </p>
          </div>
        </ng-template>
      </div>
        <div class="action-button d-flex justify-content-end">
          <span title="{{row.lastAppLaunchDate}}"  (click)="getChatGroup(row)" *ngIf="row.lastAppLaunchDate && row.isActiveMobileUser" class=" fa-mobile-custom-active my-1 mr-1" >
            <svg xmlns="http://www.w3.org/2000/svg" fill="#ffffff" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 72.93 122.88" style="enable-background:new 0 0 72.93 122.88" xml:space="preserve"><style type="text/css">.st023{fill-rule:evenodd;clip-rule:evenodd;}</style><g><path class="st023" d="M10.94,0h51.04C68,0,72.93,4.93,72.93,10.94v100.99c0,6.02-4.93,10.94-10.94,10.94l-51.04,0 C4.93,122.88,0,117.95,0,111.94V10.95C0,4.93,4.93,0,10.94,0L10.94,0z M36.46,100.1c3.91,0,7.09,3.17,7.09,7.09 c0,3.91-3.18,7.09-7.09,7.09c-3.92,0-7.09-3.17-7.09-7.09C29.37,103.28,32.55,100.1,36.46,100.1L36.46,100.1z M25.17,8.86h22.59 c0.16,0,0.3,0.14,0.3,0.3v3.3c0,0.16-0.14,0.3-0.3,0.3H25.17c0,0,0,0,0,0c-0.16,0-0.3-0.13-0.3-0.3v0l0-3.3c0,0,0,0,0,0 C24.87,8.99,25,8.86,25.17,8.86L25.17,8.86L25.17,8.86L25.17,8.86z M9.65,21.53h53.63c0.98,0,1.78,0.81,1.78,1.78v70.01 c0,0.97-0.81,1.78-1.78,1.78H9.65c-0.97,0-1.78-0.8-1.78-1.78V23.3C7.87,22.33,8.67,21.53,9.65,21.53L9.65,21.53z"/></g></svg>
          </span>
          <span title="{{row.lastAppLaunchDate}}"  (click)="getChatGroup(row)" *ngIf="row.lastAppLaunchDate && !row.isActiveMobileUser" class=" fa-mobile-custom-inactive my-1 mr-1" >
            <svg xmlns="http://www.w3.org/2000/svg" fill="#ffffff" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 72.93 122.88" style="enable-background:new 0 0 72.93 122.88" xml:space="preserve"><style type="text/css">.st023{fill-rule:evenodd;clip-rule:evenodd;}</style><g><path class="st023" d="M10.94,0h51.04C68,0,72.93,4.93,72.93,10.94v100.99c0,6.02-4.93,10.94-10.94,10.94l-51.04,0 C4.93,122.88,0,117.95,0,111.94V10.95C0,4.93,4.93,0,10.94,0L10.94,0z M36.46,100.1c3.91,0,7.09,3.17,7.09,7.09 c0,3.91-3.18,7.09-7.09,7.09c-3.92,0-7.09-3.17-7.09-7.09C29.37,103.28,32.55,100.1,36.46,100.1L36.46,100.1z M25.17,8.86h22.59 c0.16,0,0.3,0.14,0.3,0.3v3.3c0,0.16-0.14,0.3-0.3,0.3H25.17c0,0,0,0,0,0c-0.16,0-0.3-0.13-0.3-0.3v0l0-3.3c0,0,0,0,0,0 C24.87,8.99,25,8.86,25.17,8.86L25.17,8.86L25.17,8.86L25.17,8.86z M9.65,21.53h53.63c0.98,0,1.78,0.81,1.78,1.78v70.01 c0,0.97-0.81,1.78-1.78,1.78H9.65c-0.97,0-1.78-0.8-1.78-1.78V23.3C7.87,22.33,8.67,21.53,9.65,21.53L9.65,21.53z"/></g></svg>
          </span>
          <!-- <button type="button" (click)="OpenPatientSetting(row)" class="btn btn-danger btn-icon my-1 mr-0">
            <i class="fa fa-comments"></i>
          </button> -->
          <!-- <ng-container *hasClaim="['TelephonyCommunication']">
            <button *ngIf="row.telephonyCommunication" type="button" (click)="getChatGroup(row, 2)" class="btn btn-dynamic-2c btn-icon my-1 ml-0 position-relative">
              <i class="fa fa-comments"></i>
              <div class="comments-counts" *ngIf="row.unAssociatedCommunication > 0">{{row.unAssociatedCommunication}}</div>
            </button>
            <button *ngIf="!row.telephonyCommunication" type="button" (click)="getChatGroup(row, 2)" class="btn btn-danger btn-icon my-1 ml-0 position-relative">
              <i class="fa fa-comments"></i>
              <div class="comments-counts" *ngIf="row.unAssociatedCommunication > 0">{{row.unAssociatedCommunication}}</div>
            </button>
          </ng-container> -->
          <!-- <ng-container *hasClaim="['TelephonyCommunication']">
            <button type="button" [class.btn-dynamic-2c]="row.telephonyCommunication" [class.btn-danger]="!row.telephonyCommunication"  class="btn  btn-icon my-1 ml-0 position-relative">
              <i (click)="getChatGroup(row, 2)" class="fa fa-comments"></i>
              <div (click)="selectedPatient=row;OpenRPMEncounterModel()" class="comments-counts" *ngIf="row.unAssociatedCommunication > 0">{{row.unAssociatedCommunication}}</div>
            </button>
          </ng-container> -->
          <!-- <button (click)="SaveFilterState()" routerLink="/rpm/PatientRpm/{{row.id}}" title="View RPM" -->
            <div (appIsOutside)="popdiagnose.isOpen=false">
              <button style="cursor: pointer;" class="btn btn-dynamic-2c my-1 mr-0 btn-icon" id="popTemplate{{rowIndex}}"
            #popdiagnose="bs-mdbPopover"  placement="right" container="body" triggers="click"
            [mdbPopover]="diagnosePopUp" (click)="loadDiagnoses(row.id);" title="Diagnosis History"><i class="fa fa-stethoscope"></i></button>


              <ng-template #diagnosePopUp >
                  <div  style="max-height:200px;overflow-y:auto; padding: .70rem;"  malihu-scrollbar
                  [scrollbarOptions]="scrollbarOptionsTimeline"  >
                    <div>
                    <div class="d-flex justify-content-between align-items-center">
                      <p class="mb-1"><strong>Diagnosis Record</strong></p>
                      <button class="btn btn-dynamic-2c btn-sm mt-0 mr-0" (click)="$event.stopPropagation();navigation(row.id)" >Edit</button>
                    </div>
                    <table class="table table-bordered custom-table-diagnosis">
                      <thead class="bg-dynamic-2c text-white">
                        <tr>
                          <th title="ICD Code">ICD</th>
                          <th title="ICD Description">ICD Desc</th>
                          <th title="Note">Note</th>
                          <th title="Is Chronic">Is Chr</th>
                          <th title="Is RPM">Is Rpm</th>
                          <th title="Diagnose Date">Dia Date</th>
                          <th title="Active/Resolve">Act/Res</th>
                          <th title="Resolve Date">Res Date</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let item of tabledata" >
                          <td>{{item.icdCode}}</td>
                          <td title="{{item.description}}" >
                            <span style="display:inline-block;width: 50px;text-overflow:ellipsis;overflow: hidden;white-space: nowrap;">
                              {{item.description}}
                            </span>
                          </td>
                          <td title="{{item.note}}">
                            <span style="display:inline-block;width: 50px;text-overflow:ellipsis;overflow: hidden;white-space: nowrap;">
                              {{item.note}}
                            </span>
                          </td>
                          <td>
                            <div *ngIf="item.isChronic == true">
                              <span class="text-dynamic-2c"><i class="fa fa-check fa-lg"></i></span>
                            </div>
                            <div *ngIf="item.isChronic == false ">
                              <span class="text-danger"><i class="fa fa-close fa-lg"></i></span>
                            </div>
                          </td>
                          <td>
                            <div *ngIf="item.isOnRpm == true">
                              <span class="text-dynamic-2c"><i class="fa fa-check fa-lg"></i></span>
                            </div>
                            <div *ngIf="item.isOnRpm == false ">
                              <span class="text-danger"><i class="fa fa-close fa-lg"></i></span>
                            </div>
                          </td>
                          <td>{{item.diagnosisDate | dateFormatPipe}}</td>
                          <td><span>{{diagnoseStatusEnum[item.status]}}</span></td>
                          <td>{{item.resolvedate | dateFormatPipe}}</td>
                        </tr>
                      </tbody>
                    </table>
                    </div>

                  </div>
              </ng-template>
            </div>
          <button type="button" class="btn btn-dynamic-2c btn-icon my-1 mr-0 hover-btn-inline"  >
            <i class="fa fa-ellipsis-h"></i>
          </button>
          <div class="hover-body d-flex align-items-center">
            <button [disabled]="!row.isRPMConsentTaken || row.rpmStatus !== 0"  (click)="checkRpmRevoked(row)" title="View RPM"
            class="btn btn-dynamic-2c btn-icon my-1 ml-1" >
              <i class="fa fa-play"></i>
            </button>
            <button (click)="OpenQuickViewModal(row)" title="Patient Insights"
              class="btn btn-dynamic-2c btn-icon my-1 ml-0" >
              <i class="fa fa-exclamation-circle"></i>
            </button>
            <button (click)="openPatientNote(row)" title="Patient Note"
              class="btn btn-dynamic-2c btn-icon my-1 ml-0" >
              <i class="fa fa-pencil"></i>
            </button>
            <button [disabled]="!row.isRPMConsentTaken || row.rpmStatus !== 0" (click)="selectedPatient = row;selectedRpmAlert=row;rpmServiceType= 5;getRpmEncounterTime();resetEncounterModal(rpmEncounterModal);rpmEncounterDto.rpmServiceType=0;" title="Create Encounter"
              class="btn btn-dynamic-2c btn-icon my-1 ml-0" >
              <i class="fa fa-bolt"></i>
            </button>
            <button title="Consent" [class.status-primary]="row.isRPMConsentTaken" [class.status-danger]="!row.isRPMConsentTaken"
              class="btn btn-dynamic-2c btn-icon my-1 ml-0 mr-0" routerLink="/admin/consentdoc/{{row.id}}" >
              <i class="fa fa-clipboard"></i>
            </button>
            <button title="RPM Notification" (click)="OpenRpmNotifications(row)"
              class="btn btn-dynamic-2c btn-icon my-1 ml-2 mr-0" >
              <i class="fa fa-bell"></i>
            </button>
            <!-- <button class="btn btn-icon btn-dynamic-2c z-depth-0 flex-shrink-0 my-1 mr-0 ml-2"
                  title="Financial Hardship Form"
                  (click)="sendToPatientModal.show();assignFinancialHardshipFormValue(row)">
                  <i class="fa fa-file"></i>
                </button> -->
          </div>
          <button  title="Complaint Dialog" (click)="openComplaintsModal(row)"
            class="btn btn-dynamic-2c btn-icon my-1 ml-2 mr-0"
            [class.status-danger]="row.complaintStatusColor === 1"
            [class.status-warning]="row.complaintStatusColor === 2"
            [class.status-primary]="row.complaintStatusColor === 3"
            >
            <i class="fa fa-bug"></i>
          </button>
          <!-- <a class="btn btn-danger btn-icon my-1"
            (click)="deletePatientDto.patientId=row.id;deletePatientModal.show();"><i class="fa fa-trash"></i></a> -->
        </div>

      </div>
      <!-- {{ row.fullName }} -->
      <!-- <div class="d-flex justify-content-between align-items-center">
        <a class="mb-0 text-capitalize link text-dynamic-2c text-left ml-2" style="white-space: nowrap; width: 200px;"
          (click)="onClickRow(row)">
          {{ row.fullName }}</a>
      </div> -->
    </td>
    <td class="text-center">
      <ng-container *hasClaim="['ChatService','TelephonyCommunication']">
        <button type="button" [class.btn-dynamic-2c]="row.telephonyCommunication" [class.btn-danger]="!row.telephonyCommunication"  class="btn  btn-icon my-1 ml-0 position-relative">
          <i (click)="getChatGroup(row, 2)" class="fa fa-comments"></i>
          <div (click)="selectedPatient=row;OpenRPMEncounterModel()" class="comments-counts" *ngIf="row.unAssociatedCommunication > 0">{{row.unAssociatedCommunication}}</div>
        </button>
      </ng-container>
    </td>
    <td>
      <div *ngIf="+row.currentMonthCompletedTime >= 20" style="width: 100px; height: 15px;" id="progress-bar">
        <mdb-progress value="{{row.currentMonthCompletedTime}}" min="0" max="20" type="success">
          <span class="min-label" data-label="min"> {{row.currentMonthCompletedTime}} </span></mdb-progress>
      </div>
      <div *ngIf="+row.currentMonthCompletedTime < 20" style="width: 100px; height: 15px;" id="progress-bar">
        <mdb-progress value="{{row.currentMonthCompletedTime}}" min="0" max="20" type="primary">
          <span class="min-label" data-label="min"> {{row.currentMonthCompletedTime}} </span></mdb-progress>
      </div>
    </td>
    <td>
      {{row.transmissionDays}} days
    </td>

    <td>

      <div class="d-flex justify-content-between align-items-center" style="width: 150px;">
        <div >
          <a class="link text-dynamic-2c mr-1" [title]="row.LastStatusChangedByNameAndDate"
            (click)="changeStatus(row);ccmStatusModal.show();">{{rpmStatusEnum[row.rpmStatus]}}
          </a>
        </div>

        <div>
          <i class="fa fa-history text-dynamic-2c fa-lg mr-2" title="Status History" style="cursor: pointer;" (click)="getRpmStatusHistory(row.id)"></i>
          <span class="status-bullet"
          [class.bg-danger]="row.qualityCheckStatus=== 1"
        [class.bg-success]="row.qualityCheckStatus===0"
        [class.bg-warning]="row.qualityCheckStatus===2"

          (click)="selectedPatient=row;openRPMQualityCheckModal(row)" title="RPM Quality Check"></span>
        </div>
      </div>

     <!-- {{rpmStatusEnum[row.rpmStatus]}} -->
      <!-- {{ row.psychiatristName }} -->
    </td>
    <td [hidden]="filterPatientDto.serviceMonth !== currentMonth">

      <div class="d-flex justify-content-between align-items-center" style="width: 120px;">
        <a class="link text-dynamic-2c" [mdbTooltip]="rpmMSTT" (mouseover)='delayForMouseOverRPMMSToolTip(row.id)' (mouseleave)="clearMouseIntervalRPMMSToolTip(row.id)"
        placement="right" container="body"
          (click)="changeStatus(row);rpmMonthlyStatusModal.show();">{{rpmMonthlyStatusEnum[row.rpmMonthlyStatus]}}</a>
          <ng-template #rpmMSTT>
            <div class="p-2">
              <p class="mb-0  text-left" [innerHTML]="rpmMSToolTip"> </p>
            </div>
          </ng-template>
        <!-- <span class="status-bullet"
        [class.bg-grey]="row.qualityChecked===rpmQualityCheckedEnum.Deferred"
        [class.bg-success]="row.qualityChecked===rpmQualityCheckedEnum.Passed"
        [class.bg-danger]="row.qualityChecked===rpmQualityCheckedEnum.Failed"
        (click)="selectedPatient=row;GetPatientRPMDetails(row);rpmQualityCheckModal.show()" title="RPM Quality Check"></span> -->
      </div>
    </td>
    <td>
      <div class="d-flex justify-content-start align-items-center" style="width: 100px;" >
        <ng-container>
          <a title="Assigned Date" (click)="changeStatus(row);rpmAssignDateMOdal.show();"><i
              class="fa fa-calendar text-dynamic-secondary-2c  mr-1" style="font-size: 20px;"></i>
          </a>
        </ng-container>
        <span *ngIf="row.rpmDateAssigned">

          {{row.rpmDateAssigned | dateFormatPipe}}
        </span>
      </div>
    </td>
    <td>{{row.recentPcpAppointment  | dateFormatPipe}}</td>
    <td>
      <div class="d-flex justify-content-between align-items-center">
        <span *ngIf="row.lastReadingDate != '0001-01-01T00:00:00'">
          {{row.lastReadingDate | dateFormatPipe}}
        </span>
        <span (click)="isPatientModalityDetails=true;selectedPatient = row;GetPHDevicesByPatientId(row);" >
          <i class="fa fa-history text-dynamic-2c fa-lg ml-2" title="Last Reading Date History" style="cursor: pointer;"></i>
        </span>
      </div>

    </td>
    <td>
      <span *ngIf="row.lastLogDate != '0001-01-01T00:00:00'">
        {{row.lastLogDate | dateFormatPipe}}
      </span>
    </td>


    <td>
      <div class="user-name-list">
        <div title="{{item.fullName}}" class="name-caption" *ngFor="let item of row.rpmCareCoordinators">
          <span>{{item['nameAbbreviation']}}</span></div>
      </div>
    </td>

    <!-- <td style="width:120px">

    </td> -->
  </tr>
</tbody>
<!-- <tbody *ngIf="rows.length === 0">
  <td class="bg-white p-3 text-danger" colspan="12">No Record Found</td>
 </tbody> -->
</table>

</div>

<div mdbModal #rpmMonthlyStatusModal="mdbModal" class="modal fade" tabindex="-1" role="dialog"
aria-labelledby="myBasicModalLabel" aria-hidden="true" mdbTableScroll>
<div class="modal-dialog" role="document">
  <div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close pull-right" aria-label="Close" (click)="rpmMonthlyStatusModal.hide()">
        <span aria-hidden="true">×</span>
      </button>
      <h4 class="modal-title w-100" id="myModalLabel">RPM
        Monthly Status</h4>
    </div>
    <div class="modal-body">
      <div >
        <ul class="status-list">
          <li *ngFor="let item of rpmMonthlyStatusList" [class.active]="selectedPatient.rpmMonthlyStatus=== item.value"> <a
              class="link"
              (click)="rpmMonthlyStatusChangeDto.rpmMonthlyStatus = item.value;assignRpmMonthlyStatus() ">{{item.name}}
            </a>
          </li>
        </ul>
      </div>
    </div>

    <div class="modal-footer">

      <button type="button" (click)="rpmMonthlyStatusModal.hide()" class="waves-light btn-sm btn btn-sm btn-dynamic-secondary-2c"
        aria-label="Close" mdbWavesEffect>Cancel</button>
      <!-- <button type="button" mdbBtn color="primry" (click)="addRequiredData()" class="relative waves-light"
        mdbWavesEffect>Add Data</button> -->
    </div>
  </div>
</div>
</div>
<div mdbModal #ccmStatusModal="mdbModal" class="modal fade" tabindex="-1" role="dialog"
aria-labelledby="myBasicModalLabel" aria-hidden="true" mdbTableScroll>
<div class="modal-dialog" role="document">
  <div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close pull-right" aria-label="Close" (click)="ccmStatusModal.hide()">
        <span aria-hidden="true">×</span>
      </button>
      <h4 class="modal-title w-100" id="myModalLabel">RPM
        Status</h4>
    </div>
    <div class="modal-body">
      <div >
        <ul class="status-list">
          <li *ngFor="let item of rpmStatusList" [class.active]="selectedPatient.rpmStatus=== item.value"> <a
              class="link"
              (click)="selectedPatient.rpmStatus= item.value;rpmStatusChangeDto.newStatusValue = item.value;AssignRPMStatus(selectedPatient.id) ">{{item.text}}
            </a>
          </li>
        </ul>
      </div>
    </div>

    <div class="modal-footer">

      <button type="button" (click)="ccmStatusModal.hide()" class="waves-light btn btn-sm btn-dynamic-secondary-2c"
        aria-label="Close" mdbWavesEffect>Cancel</button>
      <!-- <button type="button" mdbBtn color="priary" (click)="addRequiredData()" class="relative waves-light"
        mdbWavesEffect>Add Data</button> -->
    </div>
  </div>
</div>
</div>
<div mdbModal #quickEncounterModal="mdbModal" class="modal fade" tabindex="-1" role="dialog"
  aria-labelledby="myquickEncounterModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable" role="document">
      <div class="modal-content ">
          <div class="modal-header">
              <button type="button" class="close pull-right" aria-label="Close" (click)="quickEncounterModal.hide()">
                  <span aria-hidden="true">×</span>
              </button>
              <h4 class="modal-title w-100" id="myModalLabel">Service Name</h4>
          </div>
          <div class="modal-body">
              <div class="form-check form-check-inline">
                  <input type="radio" class="form-check-input" id="enc-call" name="rpmEnounter" [value]="0" [(ngModel)]="rpmServiceType" (click)="quickEncounterModal.hide();resetEncounterModal(rpmEncounterModal);rpmEncounterDto.rpmServiceType= 0" mdbInput>
                  <label class="form-check-label" for="enc-call">Interactive Call</label>
              </div>
              <!-- <div class="form-check form-check-inline">
                  <input type="radio" class="form-check-input" id="enc-sms" name="rpmEnounter" [value]="1" [(ngModel)]="rpmServiceType" (click)="quickEncounterModal.hide();smsAlertDate();sendAlertSms.show();" mdbInput>
                  <label class="form-check-label" for="enc-sms">SMS</label>
              </div> -->
              <!-- <div class="form-check form-check-inline">
                  <input disabled type="radio" class="form-check-input" id="enc-phy" name="rpmEnounter" [value]="2" [(ngModel)]="rpmServiceType" (click)="quickEncounterModal.hide();resetEncounterModal(rpmEncounterModal);rpmEncounterDto.rpmServiceType=2" mdbInput>
                  <label class="form-check-label" for="enc-phy">Interactive Communication</label>
              </div> -->
              <div class="form-check form-check-inline">
                  <input type="radio" class="form-check-input" id="enc-phy" name="rpmEnounter" [value]="3" [(ngModel)]="rpmServiceType" (click)="quickEncounterModal.hide();resetEncounterModal(rpmEncounterModal);rpmEncounterDto.rpmServiceType=2" mdbInput>
                  <label class="form-check-label" for="enc-phy">Text</label>
              </div>
              <!-- <div class="form-check form-check-inline">
                  <input type="radio" class="form-check-input" id="enc-phy" name="rpmEnounter" [value]="2" [(ngModel)]="rpmServiceType" (click)="quickEncounterModal.hide();resetEncounterModal(rpmEncounterModal);rpmEncounterDto.rpmServiceType=2" mdbInput>
                  <label class="form-check-label" for="enc-phy">Voice Mail</label>
              </div> -->
              <!-- <div class="form-check form-check-inline">
                  <input type="radio" class="form-check-input" id="enc-phy" name="rpmEnounter" [value]="3" [(ngModel)]="rpmServiceType" (click)="quickEncounterModal.hide();resetEncounterModal(rpmEncounterModal);rpmEncounterDto.rpmServiceType=2" mdbInput>
                  <label class="form-check-label" for="enc-phy">Text</label>
              </div> -->
              <div class="form-check form-check-inline">
                  <input type="radio" class="form-check-input" id="enc-phy" name="rpmEnounter" [value]="4" [(ngModel)]="rpmServiceType" (click)="quickEncounterModal.hide();resetEncounterModal(rpmEncounterModal);rpmEncounterDto.rpmServiceType=2" mdbInput>
                  <label class="form-check-label" for="enc-phy">Voice Mail</label>
              </div>
              <div class="form-check form-check-inline">
                  <input type="radio" class="form-check-input" id="enc-phy" name="rpmEnounter" [value]="6" [(ngModel)]="rpmServiceType" (click)="quickEncounterModal.hide();resetEncounterModal(rpmEncounterModal);rpmEncounterDto.rpmServiceType=2" mdbInput>
                  <label class="form-check-label" for="enc-phy">Data Analysis</label>
              </div>
              <div class="form-check form-check-inline">
                  <input type="radio" class="form-check-input" id="enc-phy" name="rpmEnounter" [value]="5" [(ngModel)]="rpmServiceType" (click)="quickEncounterModal.hide();resetEncounterModal(rpmEncounterModal);rpmEncounterDto.rpmServiceType=2" mdbInput>
                  <label class="form-check-label" for="enc-phy">Other</label>
              </div>
          </div>
          <div class="modal-footer">
              <button type="button" class="waves-light btn btn-sm btn-dynamic-secondary-2c" aria-label="Close"
                  (click)="quickEncounterModal.hide()" mdbWavesEffect>Close</button>
          </div>
      </div>
  </div>
</div>

<div mdbModal #assignCareProviderModal="mdbModal" class="modal fade" tabindex="-1" role="dialog"
  aria-labelledby="myBasicModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg flat-modal" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close pull-right" aria-label="Close" (click)="assignCareProviderModal.hide()">
          <span aria-hidden="true">×</span>
        </button>
        <h4 class="modal-title w-100">Assign RPM Coordinator</h4>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="w-100 px-3 " *ngIf="selectedPatientsCareProvidersList && selectedPatientsCareProvidersList.length > 0">
            <div class="file-field d-flex align-items-center mb-2">
              <div *ngFor="let careProvider of selectedPatientsCareProvidersList" class="file-item">
                <small class="mb-0">{{careProvider.fullName}}<a
                    (click)="deSelectPatientCareProviders(careProvider.rpmCareCoordinatorId)"><i
                      class="ml-1 mr-3 fa fa-times fa-lg text-danger"></i>
                  </a></small>
              </div>
            </div>
          </div>
          <div class="col-sm-12">
            <div class="form-group">
              <label for="practiceName">RPM Coordinator</label>
              <ng-select class="ng-select-small"
                [closeOnSelect]="false" [(ngModel)]="assignRemoveCareProvidersToPatientsDto.careCoordinatorIdsToAssign"
                [multiple]="true" [searchable]="true" placeholder="RPM Coordinator">
                <ng-option *ngFor="let item of careProvidersList" [value]="item.id">{{item.lastName}},{{item.firstName}}
                </ng-option>
              </ng-select>
            </div>
          </div>
          <div class="col-sm-12">
            <div class="form-group">
              <label for="practiceName">Care Facilitator</label>
              <ng-select class="ng-select-small" [(ngModel)]="assignRemoveCareProvidersToPatientsDto.careFacilitatorId"
                [closeOnSelect]="true" [multiple]="false" [searchable]="true" placeholder="Care Facilitator">
                <ng-option [value]="0">Select Care Facilitator</ng-option>
                <ng-option [value]="-1">Remove All</ng-option>
                <ng-option *ngFor="let item of careFacilitatorsList" [value]="item.id">{{item.lastName}},{{item.firstName}}
                </ng-option>
              </ng-select>
            </div>
          </div>
          <div class="col-sm-12">
            <div class="form-group">
              <div class="input-group form-group">
                <label class="w-100">Patient Assigned Date<small class="text-danger">*</small></label>
                <input type="text" class="form-control form-control-sm border" style="border-radius:4px ;" #dateDPicker="dpDayPicker"
                [dpDayPicker]="datePickerConfig3" placeholder="MM-DD-YYYY"
                [(ngModel)]="dateAssigned"
                [theme]="'dp-material ccm-date-picker'" [mode]="'day'"  />
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-dynamic-2c btn-sm" [disabled]="!selected || selected.length < 1"
          (click)="assignCareProviderModal.hide();assignRemoveCareProvidersToPatients(null);">Save</button>
        <!-- <button type="submit" class="btn btn-dynamic-2c btn-sm"
          (click)="clearCareProviders()">Clear</button> -->
        <button type="button" class="btn btn-dynamic-2c btn-sm" (click)="assignCareProviderModal.hide()">Clear</button>
      </div>
    </div>
  </div>
</div>
<div mdbModal #downloadRpmDataModal="mdbModal" class="modal fade" tabindex="-1" role="dialog"
aria-labelledby="myBasicModalLabel" aria-hidden="true" (close)="clearRpmDownloadDto()">
<div class="modal-dialog modal-dialog-centered modal-md flat-modal" role="document">
  <div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close pull-right" aria-label="Close" (click)="downloadRpmDataModal.hide()">
        <span aria-hidden="true">×</span>
      </button>
      <h4 class="modal-title w-100">Download RPM Data</h4>
    </div>
    <div class="modal-body">
      <div class="row">
        <div class="col-sm-12 mb-2">
          <small class=" text-uppercase font-500">Please select your option</small>
        </div>
     <div class="col-sm-12">

        <div class="d-flex align-items-center mb-2">
          <div class="form-group mb-0">
            <div class="form-check form-check-inline" *ngIf="selected?.length > 0">
              <input type="radio" class="form-check-input" id="materialInline2" name="download" [(ngModel)]="downloadData"
                [value]="'selected'" mdbInput>
              <label class="form-check-label" for="materialInline2">Selected Patients</label>
            </div>
            <!-- Material inline 2 -->
            <div class="form-check form-check-inline">
              <input type="radio" class="form-check-input" id="materialInline3" name="download" [(ngModel)]="downloadData"
                [value]="'active'" mdbInput>
              <label class="form-check-label" for="materialInline3">Active</label>
            </div>
            <!-- Material inline 2 -->
            <div class="form-check form-check-inline">
              <input type="radio" class="form-check-input" id="materialInline4" name="download" [(ngModel)]="downloadData"
                [value]="'completed'" mdbInput>
              <label class="form-check-label" for="materialInline4">Completed</label>
            </div>
          </div>
        </div>
      </div>
      </div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-dynamic-2c btn-sm"
          (click)="donwloadRpmData()" [disabled]="isDownloadingRpmData || !downloadData"> <span *ngIf="isDownloadingRpmData" class="spinner-border spinner-border-sm mr-1" role="status"
          aria-hidden="true"></span>PROCEED</button>
        <button type="button" class="btn btn-dynamic-secondary-2c btn-sm" (click)="downloadRpmDataModal.hide()">CLOSE</button>
      </div>
    </div>
  </div>
</div>
</div>

<div style="overflow-y:auto" mdbModal #sendAlertSms="mdbModal" class="modal fade" tabindex="-1" role="dialog"
id="AlertModal" aria-labelledby="myBasicModalLabel" aria-hidden="true">
<div class="modal-dialog modal-dialog-scrollable flat-modal p-4" role="document">
  <div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close pull-right" aria-label="Close" (click)="sendAlertSms.hide()">
        <span aria-hidden="true">×</span>
      </button>
      <h4 class="text-dynamic-2c modal-title font-500 mr-3">SMS Alert </h4>
    </div>
    <div class="modal-body">
      <div class="form-group">
        <label>Time Out</label>
        <input type="text" [dpDayPicker]="datePickerConfig" placeholder="MM-DD-YYYY"
          [(ngModel)]="sendAlertSmsObj.timeOut" [theme]="'dp-material ccm-date-picker'" [mode]="'daytime'"
          class="bg-white form-control">
      </div>
      <div class="form-group">
        <label>SMS Note</label>
        <textarea rows="13" [(ngModel)]="sendAlertSmsObj.messageText" class="form-control"></textarea>
        <p><span class="text-danger">Disclaimer:</span> This is an automated SMS, please do not reply.</p>
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" (click)="sendAlertSms.hide()" aria-label="Close" class="waves-light btn-sm btn-dynamic-secondary-2c btn" >Close</button>
      <button type="button" [disabled]="isSendingAlertSms || !sendAlertSmsObj.timeOut || !sendAlertSmsObj.messageText" mdbbtn="" (click)="SendAlertSms(sendAlertSms)" class="btn btn-dynamic-2c btn-sm relative waves-light btn-sm btn-dynamic-2c btn">Send</button>
    </div>
  </div>
</div>
</div>
<div style="overflow-y:auto" mdbModal #rpmEncounterModal="mdbModal" class="modal fade" tabindex="-1" role="dialog"
id="AlertModal" aria-labelledby="myBasicModalLabel" aria-hidden="true" (open)="rpmEncounterModalOpened()" (closed)="AddEncounterClosed()">
<div class="modal-dialog modal-dialog-scrollable modal-dialog-centered flat-modal p-4" style="max-width:650px ;" role="document">
  <div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close pull-right" aria-label="Close" (click)="rpmEncounterModal.hide()">
        <span aria-hidden="true">×</span>
      </button>
      <h4 class="text-dynamic-2c modal-title font-500 mr-3">Add Encounter</h4>
    </div>
    <div class="modal-body">
      <div class="encounter-body">
        <div class="row">
          <div class="col-sm-12" *ngIf="securityService && securityService.securityObject.fullName">
            <!-- <p><strong>Provider Name</strong> {{securityService.securityObject.fullName}}</p> -->
          </div>
          <div class="col-sm-6">
            <div class="form-group">
              <label>Service Name<sup class="text-danger">*</sup></label>
              <ng-select [searchable]="true"
                class="ng-select-small" placeholder="Select Service Type" [(ngModel)]="rpmEncounterDto.rpmServiceType" (click)="$event.stopPropagation();">
                <ng-option [value]="0">Interactive Call</ng-option>
                <!-- <ng-option disabled [value]="2">Interactive Communication</ng-option> -->
                <ng-option [value]="3">Text</ng-option>
                <ng-option [value]="4">Voice Mail</ng-option>
                <ng-option [value]="6">Data Analysis</ng-option>
                <ng-option [value]="5">Other</ng-option>
              </ng-select>
            </div>
          </div>

          <div class="col-sm-6 pl-sm-0">
            <div class="input-group">
              <label class="w-100">Date<sup class="text-danger">*</sup></label>
              <input type="text" class="form-control form-control-sm" #dateDPicker="dpDayPicker"
                 [dpDayPicker]="datePickerConfig1" [(ngModel)]="rpmEncounterDto.encounterDate"
                [theme]="'dp-material ccm-date-picker'" [mode]="'daytime'" />
                <a class="input-group-append">
                  <span class="input-group-text text-white bg-dynamic-2c" id="category">
                    <i class="fa fa-calendar fa-lg"></i>
                  </span>
                </a>
            </div>
          </div>
          <div class="col-sm-6">
            <div class="row">
              <div class="col-lg-6 col-md-6 col-sm-6 ">
                <div class="form-group">
                  <label class="w-100">Start Time<sup class="text-danger">*</sup></label>
                  <input type="text" class="form-control form-control-sm" #dateDpTime="dpDayPicker"
                    [dpDayPicker]="timePickerConfig" [(ngModel)]="rpmEncounterDto.startTime"
                    [theme]="'dp-material ccm-date-picker'" [mode]="'time'" />
                  <!-- <a (click)="dateDpTime.api.open()" class="input-group-append">
                <span class="input-group-text text-white bg-dynamic-2c" id="category"><i
                    class="fa fa-clock-o fa-lg"></i></span>
              </a> -->
                </div>
              </div>
              <div class="col-lg-6 col-md-6 col-sm-6 pl-sm-0">
                <div class="form-group">
                  <label class="w-100">End Time<sup class="text-danger">*</sup></label>
                  <input type="text" readonly class="form-control form-control-sm" [(ngModel)]="rpmEncounterDto.endTime" >
                  <!-- <input type="text" readonly class="form-control form-control-sm" #dateDpEndTime="dpDayPicker"
                  [dpDayPicker]="timePickerConfig" formControlName="endTime" [theme]="'dp-material ccm-date-picker'"
                  [mode]="'time'" />
                <a (click)="dateDpEndTime.api.open()" class="input-group-append">
                  <span class="input-group-text text-white bg-dynamic-2c" id="category"><i
                      class="fa fa-clock-o fa-lg"></i></span>
                </a> -->
                </div>
              </div>
            </div>
          </div>

          <div class="col-sm-6 pl-sm-0">
            <div class="d-flex w-100">
              <div class="form-group flex-grow-1">
                <label class="w-100">Duration<sup class="text-danger">*</sup></label>
                <input #durationInput type="text" placeholder="In Minutes" [(ngModel)]="rpmEncounterDuration" (input)="durationChanged($event.target.value)"
                  class="form-control form-control-sm" OnlyNumbers >
                <!-- <a (click)="dateDpEndTime.api.open()" class="input-group-append">
                <span class="input-group-text text-white bg-dynamic-2c" id="category"><i
                    class="fa fa-clock-o fa-lg"></i></span>
              </a> -->
              </div>
              <div class="form-group ml-3 flex-grow-1">
                <label for="endTime">Timer</label>
                <div class="d-flex">
                  <input type="text" id="stopwatchFieldRPM2"
                  class="form-control form-control-sm text-dynamic-secondary-2c" placeholder="00:00:00">
                  <button *ngIf="stopWatchInterval" class="btn btn-dynamic-2c my-0 mr-0 px-2 btn-sm " (click)="ResetStopWatch()">Stop </button>
                  <button *ngIf="!stopWatchInterval" class="btn btn-dynamic-2c my-0 mr-0 px-2 btn-sm " (click)="startStopWatch()">Start </button>

                </div>

              </div>
            </div>
          </div>

          <div class="col-sm-12">
            <div class="form-form form-group">
              <label for="form12">Notes<sup class="text-danger">*</sup></label>
              <!-- <textarea type="text" id="form12" rows="6" class="form-control" [(ngModel)]="rpmEncounterDto.note" ></textarea> -->
              <app-two-c-text-area #myFIeldRefRPM [value]="rpmEncounterDto.note" [height]="'140px'" [PatientId]="rpmEncounterDto.patientId" (valueChanged)="rpmEncounterDto.note=$event"></app-two-c-text-area>
          </div>
          <!-- <div class="d-flex align-items-center">
            <div class="custom-control custom-checkbox w-info-90">
              <input type="checkbox" [disabled]="!rpmEncounterDto.billingProviderId"
                [(ngModel)]="rpmEncounterDto.isProviderRpm" class="custom-control-input" id="cptcheck">
              <label class="custom-control-label" for="cptcheck">CPT 99091</label>
            </div>
            <a id="cpt99091" class="ml-3" container="body" [mdbPopover]="cpt99091" placement="bottom"
              triggers="focus"><i class="fa fa-exclamation-circle text-success fa-lg"></i></a>
            <ng-template #cpt99091>
              <div class="bg-dark text-white py-3 pl-3 pr-2">
                <div class="who-covered" (click)="$event.stopPropagation()" [innerHTML]="rpmEncounterCovered"
                  malihu-scrollbar [scrollbarOptions]="scrollbarOptionsTimeline" style="max-height: 300px;"></div>
              </div>
            </ng-template>

          </div> -->
          </div>
        </div>
      </div>
      <div *ngIf="rpmEncounterDto.id === 0 && (!patientEncounterMonthlyStatusAcknowledge || (selectedPatient.rpmMonthlyStatus === rpmMonthlyStatusEnum['Not Started']))" class="d-flex justify-content-between alert alert-warning alert-dismissible animated fade show mt-3" role="alert">
        <strong >Acknowledge/update monthly status to save</strong>
      </div>
      <div *ngIf="!rpmEncounterTime?.isServicetypeCallOrText && totalRpmDuration >= 20 && !gettingRpmEncounterTimeDuration" class="d-flex justify-content-between alert alert-warning alert-dismissible animated fade show" role="alert">
        <strong >RPM monthly encounter duration will be 20 or more without any call or text.</strong>
      </div>

    </div>

    <div class="modal-footer d-flex justify-content-between align-items-center">
      <div>
        <div *ngIf="rpmEncounterDto.id === 0" class=" d-flex justify-content-between mb-2 align-items-center">
          <p class="m-0"><strong> Monthly Status: </strong></p>
          <div style="padding: 2px;" class=" ml-3 border rounded" [class.border-success]="patientEncounterMonthlyStatusAcknowledge && (PatientEncounterMonthlyStatus !== rpmMonthlyStatusEnum['Not Started'])"
          [class.border-warning]="!patientEncounterMonthlyStatusAcknowledge || (PatientEncounterMonthlyStatus === rpmMonthlyStatusEnum['Not Started'])">
            <div class="btn-group cursor-pointer"  mdbDropdown>
              <mdb-badge style="line-height: 14px;width: 120px;"  mdbDropdownToggle success="true" (click)="patientEncounterMonthlyStatusAcknowledge=true;">{{PatientEncounterMonthlyStatusTExt}}</mdb-badge>

              <div style="bottom: 50px;top: auto;right: -4px;" class="dropdown-menu dropdown-menu-right status-dropdown">
                <div>
                  <a (click)="patientEncounterMonthlyStatusAcknowledge=true;rpmEncounterDto.rpmMonthlyStatus = item.value;PatientEncounterMonthlyStatus=item.value;PatientEncounterMonthlyStatusTExt=item.name;" *ngFor="let item of rpmMonthlyStatusEnumList" class="dropdown-item">{{item.name}}</a>
                </div>

              </div>
            </div>
          </div>

        </div>
      </div>
      <div>
        <button type="button" (click)="rpmEncounterModal.hide()" aria-label="Close" class="waves-light btn-sm btn-dynamic-secondary-2c btn" >Close</button>
        <button type="button" [disabled]="!rpmEncounterDuration || !patientEncounterMonthlyStatusAcknowledge ||!rpmEncounterDto.encounterDate || !rpmEncounterDto.note || isAddEncounter || rpmEncounterDto.rpmServiceType == null" (click)="addRpmEncounter(rpmEncounterModal)" class="relative waves-light btn-sm btn-dynamic-2c btn">
          <span *ngIf="isAddEncounter" class="spinner-border spinner-border-sm" role="status"
          aria-hidden="true"></span>Add Encounter</button>
      </div>

    </div>
  </div>
</div>
</div>
<div mdbModal #rpmAssignDateMOdal="mdbModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myBasicModalLabel" aria-hidden="true">
<div class="modal-dialog" role="document">
  <div class="modal-content">
    <div class="modal-header">
      <h4 class="modal-title w-100 text-center" id="myModalLabel">Rpm Assigned Date
      </h4>
    </div>
    <div class="modal-body">
      <div class="row">
        <div class="col-sm-12">
          <div class=" form-group mt-3">
            <label class="w-100">Rpm Assigned Date<small class="text-danger">*</small></label>
            <!-- <mdb-date-picker #datPickerRef class="custom-datepicker" [options]="myDatePickerOptions"
              [(ngModel)]="dischargeDate" [outlineInput]="true" [inline]="true" name="mydate"
              [placeholder]="'Discharge Date'">
            </mdb-date-picker> -->
            <input type="text" class="form-control form-control-sm" #dateDPicker="dpDayPicker"
                [dpDayPicker]="datePickerConfig4" placeholder="MM-DD-YYYY" [(ngModel)]="selectedPatientDateAssigned"
                [theme]="'dp-material ccm-date-picker'" [mode]="'day'" />
          </div>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" [disabled]="assigningRpmDate" class="waves-light btn btn-sm btn-dynamic-2c"
        aria-label="Close" (click)="AssignRpmDate(rpmAssignDateMOdal);" mdbWavesEffect> <span *ngIf="assigningRpmDate"
          class="mr-1 spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Save</button>
      <button type="button" class="waves-light btn btn-sm btn-dynamic-secondary-2c" aria-label="Close"
        (click)="rpmAssignDateMOdal.hide()" mdbWavesEffect>Close</button>
      <!-- <butmdbModalton type="button" mdbBtn color="primry" (click)="addRequiredData()" class="relative waves-light"
        mdbWavesEffect>Add Data</button> -->
    </div>
  </div>
</div>
</div>
<div mdbModal #outOfRangeAlertsHistoryModal="mdbModal" class="modal  fade" tabindex="-1" role="dialog" aria-labelledby="myBasicModalLabel" aria-hidden="true" (close)="clearData()">
<div class="modal-dialog modal-lg" role="document">
  <div class="modal-content">
    <div class="modal-header">
      <h4 class="modal-title w-100 text-center" id="myModalLabel">Reading History
      </h4>
    </div>
    <div class="modal-body">
      <div class="row">
        <div *ngIf="isPatientModalityDetails" class="col-12">
          <div class="border-0">
            <div class="modality-info p-0" >
              <div class="row w-100">
                <div *ngFor="let item of devicesList" class="col-sm-6 col-lg-4"  >
                  <div class="modality-list ">
                    <div  class="item position-relative my-2"  [class.active]="selectedModalityCode === item.modality"
                    (click)="clearData();selectedModalityCode = item.modality;getSelectedModalityHistory()">
                      <span  *ngIf="item.isIotDevice" class="dot4g">4G</span>
                      <div class="flex-1 d-flex align-items-center" style="margin: 0 10px;">
                        <img src="/assets/rpm-devices/mbp.svg" *ngIf="item.modality == 'BP'" alt="Blood Pressure">
                        <img src="/assets/rpm-devices/mw.svg" *ngIf="item.modality == 'WT'" alt="Weight">
                        <img src="/assets/rpm-devices/pulse.svg" *ngIf="item.modality == 'PO'" alt="Pulse Oximetry">
                        <img src="/assets/rpm-devices/mbg.svg" style="width: 32px;" *ngIf="item.modality == 'BG'"
                          alt="Blood Glucose">
                        <img src="/assets/rpm-devices/activity.svg" *ngIf="item.modality == 'AT'" alt="Activity">
                        <img src="/assets/rpm-devices/mcgm.svg" *ngIf="item.modality == 'CGM'" alt="Continuous Blood Glucose">
                        <p style="font-size: 10px;" title="{{item.modalityName}}" *ngIf="item.modalityName"><strong>{{item.modalityName}}</strong></p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-12 px-0">

          <mdb-tabset #outOfRangeAlertsHistoryTabs [buttonClass]="'classic-tabs classic-tabs-c tabs-outline-primary tabs-2'" [contentClass]="'tab-shadow border'"
          class="classic-tabs classic-tabs-c tabs-outline-primary">

          <mdb-tab heading="Reading History">

            <div style="margin-right: 1rem;">
              <table class="table table-bordered table-hover mb-0">
                <colgroup>
                  <col width="50%">
                  <col width="50%">
                </colgroup>
                <thead class="bg-dynamic-2c text-white">
                  <tr>
                    <th>Date</th>
                    <th>Reading</th>
                  </tr>
                </thead>

              </table>
            </div>

            <div malihu-scrollbar [scrollbarOptions]="dropdownScroll" style="max-height: 400px; margin-right: 1rem;">
              <table class="table table-bordered table-hover">
                <colgroup>
                  <col width="50%">
                  <col width="50%">
                </colgroup>
                <tbody *ngIf="isWtDevice">
                  <tr *ngIf="!weightDataList || !weightDataList.length">
                    <td>No Record Found</td>
                  </tr>
                  <tr *ngFor="let witem of weightDataList">
                    <td>{{witem.measurementDate | dateFormatPipe: 'time'}}</td>
                    <td>Wt: {{witem.weightValue}}</td>
                  </tr>
                </tbody>
                <tbody *ngIf="isBpDevice">
                  <tr *ngIf="!BPDeviceDataList || !BPDeviceDataList.length">
                    <td>No Record Found</td>
                  </tr>
                  <tr *ngFor="let bpitem of BPDeviceDataList">
                    <td>
                       <!-- <a class="" (click)="openReadingDateCalender(bpitem)">
                      <i *hasClaim="'CanModifyRPMEncounter'" class="fa fa-calendar text-dynamic-secondary-2c mx-2"
                          style="font-size: 20px;" title="Edit Date"
                          placement="right"></i>
                        </a> -->
                        {{bpitem.measurementDate}}</td>
                    <td>Sys: {{bpitem.highPressure}}, dys: {{bpitem.lowPressure}}, HR: {{bpitem.heartRate}}</td>
                  </tr>
                </tbody>
                <!-- <mdb-date-picker #datePicker class="myDate-111" name="mydate" [outlineInput]="false"  (dateChanged)="editRpmReading($event)" [options]="myDatePickerOptions" [placeholder]="'Selected date'"
                  [(ngModel)]="selectedDate" required></mdb-date-picker> -->
                <tbody *ngIf="isPoDevice">
                  <tr *ngIf="!pulseOximetryDataList || !pulseOximetryDataList.length">
                    <td>No Record Found</td>
                  </tr>
                  <tr *ngFor="let poitem of pulseOximetryDataList">
                    <td>{{poitem.measurementDate | dateFormatPipe: 'time'}}</td>
                    <td>OS: {{poitem.bloodOxygen}}, HR: {{poitem.heartRate}}</td>
                  </tr>
                </tbody>
                <tbody *ngIf="isAtDevice">
                  <tr *ngIf="!activityDataList || !activityDataList.length">
                    <td>No Record Found</td>
                  </tr>
                  <tr *ngFor="let aitem of activityDataList">
                    <td>{{aitem.measurementDate | dateFormatPipe: 'time'}}</td>
                    <td>Cal.: {{aitem.calories}}, Dist.: {{aitem.distanceTraveled}}, Steps: {{aitem.steps}}</td>
                  </tr>
                </tbody>
                <tbody *ngIf="isBgDevice">
                  <tr *ngIf="!BGDeviceDataList || !BGDeviceDataList.length">
                    <td>No Record Found</td>
                  </tr>
                  <tr *ngFor="let bgitem of BGDeviceDataList">
                    <td>{{bgitem.measurementDate | dateFormatPipe: 'time'}}</td>
                    <td>BG: {{bgitem.bg | number : '1.0-0'}}</td>
                  </tr>

                </tbody>
              </table>
            </div>


          </mdb-tab>

          <mdb-tab heading="Last 30 Days Statistics">
            <div *ngIf="isBpDevice"  class="col-sm-12">
              <div *ngIf="isLoadingRpmModalityStatistics" class="d-flex justify-content-center text-center">
                <mdb-progress-bar class="progress primary-color-dark mb-0" mode="indeterminate"></mdb-progress-bar>
              </div>
              <h5 class="bg-dynamic-2c p-2 mb-0" style="font-size: 20px;font-weight: 600;color:#fff;border-left:1px solid #fff;border-right:1px solid #fff;">Blood Pressure</h5>
              <div class="table-responsive">
                <table class="table reading-rpm-table">
                  <thead>
                    <tr>
                      <th>Description</th>
                      <th># of Reading</th>
                      <th>High</th>
                      <th>Low</th>
                      <th>Average</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let item of bloodPressureStatistics">
                      <td>{{item.description}}</td>
                      <td>{{item.readingCount}}</td>
                      <td>{{item.high}}</td>
                      <td>{{item.low}}</td>
                      <td>{{item.average}}</td>
                    </tr>

                  </tbody>
                  <tbody *ngIf="bloodPressureStatistics.length === 0">
                    <td class="bg-white p-3 text-danger" colspan="12">No Record Found</td>
                  </tbody>
                </table>
              </div>
            </div>
            <div *ngIf="isBgDevice" class="col-sm-12">
              <div *ngIf="isLoadingRpmModalityStatistics" class="d-flex justify-content-center text-center">
                <mdb-progress-bar class="progress primary-color-dark mb-0" mode="indeterminate"></mdb-progress-bar>
              </div>
              <h5 class="bg-dynamic-2c p-2 mb-0" style="font-size: 20px;font-weight: 600;color:#fff;border-left:1px solid #fff;border-right:1px solid #fff;">Blood Glucose</h5>
              <div class="table-responsive">
                <table class="table reading-rpm-table">
                  <thead>
                    <tr>
                      <th>Description</th>
                      <th># of Reading</th>
                      <th>High</th>
                      <th>Low</th>
                      <th>Average</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let item of bloodGlucoseStatistics">
                      <td>{{item.description}}</td>
                      <td>{{item.readingCount}}</td>
                      <td>{{item.high}}</td>
                      <td>{{item.low}}</td>
                      <td>{{item.average}}</td>
                    </tr>
                  </tbody>
                  <tbody *ngIf="bloodGlucoseStatistics.length === 0">
                    <td class="bg-white p-3 text-danger" colspan="12">No Record Found</td>
                  </tbody>
                </table>
              </div>
            </div>


            <div *ngIf="isWtDevice" class="col-sm-12">
              <div *ngIf="isLoadingRpmModalityStatistics" class="d-flex justify-content-center text-center">
                <mdb-progress-bar class="progress primary-color-dark mb-0" mode="indeterminate"></mdb-progress-bar>
              </div>
              <h5 class="bg-dynamic-2c p-2 mb-0" style="font-size: 20px;font-weight: 600;color:#fff;border-left:1px solid #fff;border-right:1px solid #fff;">Weight</h5>
              <div class="table-responsive">
                <table class="table reading-rpm-table">
                  <thead>
                    <tr>
                      <th>Description</th>
                      <th># of Reading</th>
                      <th>High</th>
                      <th>Low</th>
                      <th>Average</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let item of weightStatistics">
                      <td>{{item.description}}</td>
                      <td>{{item.readingCount}}</td>
                      <td>{{item.high}}</td>
                      <td>{{item.low}}</td>
                      <td>{{item.average}}</td>
                    </tr>
                  </tbody>
                  <tbody *ngIf="weightStatistics.length === 0">
                    <td class="bg-white p-3 text-danger" colspan="12">No Record Found</td>
                  </tbody>
                </table>
              </div>
            </div>
          </mdb-tab>
        </mdb-tabset>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" class="waves-light btn btn-sm btn-dynamic-secondary-2c" aria-label="Close"
        (click)="outOfRangeAlertsHistoryModal.hide()" mdbWavesEffect>Close</button>
      <!-- <butmdbModalton type="button" mdbBtn color="primay" (click)="addRequiredData()" class="relative waves-light"
        mdbWavesEffect>Add Data</button> -->
    </div>
  </div>
</div>
</div>
<div mdbModal #openEncounterLogsModal="mdbModal" class="modal fade" id="frameModalTop" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-xl mt-2" role="document" >

    <!--Content-->
    <div class="modal-content">

      <!--Body-->
      <div class="modal-body mb-0 p-0" *ngIf="openEncounterLogsModal.isShown">
        <div class="embed-responsive embed-responsive-16by9 z-depth-1-half" style="height: calc(100vh - 20px);">
          <iframe class="embed-responsive-item" [src]="ccmLogsModalLink" allowfullscreen></iframe>
        </div>
      </div>

    </div>
    <!--/.Content-->

  </div>
</div>
<div mdbModal #viewPdfModal="mdbModal" class="modal fade" tabindex="-1" role="dialog"
aria-labelledby="myBasicModalLabel" [config]="{backdrop: true, ignoreBackdropClick: true}" aria-hidden="true"
(close)="objectURLStrAW=''">
<div class="modal-dialog modal-xl" role="document">
  <div class="modal-content">
    <div class="modal-body" style="height:calc(100vh - 50px); padding: 0px;">
      <button type="button" class="close pull-right document-close" aria-label="Close" (click)="viewPdfModal.hide()">
        <span aria-hidden="true">×</span>
      </button>
      <app-pdf-view *ngIf="objectURLStrAW" [documentUrl]="objectURLStrAW"></app-pdf-view>
    </div>
  </div>
</div>
</div>
<div mdbModal #rpmStatusHistoryModal="mdbModal" class="modal fade bottom" tabindex="-1" role="dialog"
  aria-labelledby="addDepartmentLabel" aria-hidden="true" [config]="{backdrop: true, ignoreBackdropClick: true}">
  <div class="modal-dialog modal-680 modal-dialog-scrollable" role="document">

    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close pull-right" aria-label="Close" (click)="rpmStatusHistoryModal.hide() ">
          <span aria-hidden="true">×</span>
        </button>
        <h4 class="modal-title w-100" id="myModalLabel">Rpm Status History</h4>
      </div>
      <div class="modal-body">
        <div>
          <div class=" timeline-main toDoList type-action-1"  *ngFor="let rpmStatus of rpmStatusHistoryList">
              <div class="timeline-item "  >
                  <div class="mb-2 d-flex justify-content-between align-items-center">
                      <p class="mb-0"><span class="fa fa-user fa-lg mr-2"></span><strong>{{rpmStatus.updatedBy}}</strong> changed the status to {{rpmStatusEnum[rpmStatus.status]}}</p>

                      <small *ngIf="rpmStatus.status== 0 || rpmStatus.status== 3 || rpmStatus.status== 4" class="badge badge-success">{{rpmStatusEnum[rpmStatus.status]}}</small>
                      <small *ngIf="rpmStatus.status== 1 || rpmStatus.status== 2" class="badge badge-warning">{{rpmStatusEnum[rpmStatus.status]}}</small>
                      <small *ngIf="rpmStatus.status== 5 || rpmStatus.status== 6 || rpmStatus.status== 7" class="badge badge-danger">{{rpmStatusEnum[rpmStatus.status]}}</small>
                      <small *ngIf="rpmStatus.status > 7" class="badge badge-success">{{rpmStatusEnum[rpmStatus.status]}}</small>
                  </div>
              </div>
              <div class="date-time">
                  <p class="mb-0">{{rpmStatus.updatedOn | dateFormatPipe}}</p>
              </div>
          </div>
      </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-dark btn-sm" aria-label="Close"
          (click)="rpmStatusHistoryModal.hide()">Close</button>
      </div>
    </div>
  </div>
</div>
<div mdbModal #sendToPatientModal="mdbModal" class="modal fade" tabindex="-1" role="dialog"
  aria-labelledby="myBasicModalLabel" aria-hidden="true" (close)="clearFinancialHardshipFormValues()" >
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close pull-right" aria-label="Close" (click)="sendToPatientModal.hide()">
          <span aria-hidden="true">×</span>
        </button>
        <h4 class="modal-title w-100" id="myModalLabel">Send to Patient</h4>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-lg-12 col-md-12 col-sm-12">
            <div class="form-group">
              <label for="defaultLoginFormsignature">Email</label>
              <div class="d-flex">
                <input [disabled]="hasEmail" type="email" [(ngModel)]="financialFormSendToPatientDto.email" name="email"
                  autocomplete="new-email" id="defaultLoginFormemail" class="form-control form-control-sm"
                  placeholder="Email">
              </div>
            </div>
          </div>
          <div class="col-lg-12 col-md-12 col-sm-12">
            <div class="form-group">
              <label for="defaultLoginFormsignature">Phone</label>
              <div class="d-flex">
                <input [disabled]="hasPhoneNo" type="Phone" mask="(000)000-0000" [(ngModel)]="financialFormSendToPatientDto.phoneNo" name="Phone"
                  autocomplete="new-Phone" id="defaultLoginFormPhone" class="form-control form-control-sm"
                  placeholder="Phone">
              </div>
            </div>
          </div>
          <div class="col-lg-12 col-md-12 col-sm-12">
            <div class="file-field flex-wrap align-items-center">
              <div class="btn btn-success btn-icon mx-0 mt-0">
                <span class="w-100"><i class="fa fa-paperclip"></i></span>
                <input type="file" mdbFileSelect #select (change)="onUploadOutput($event);">
              </div>
              <div class="file-path-wrapper">
                <input *ngIf="financialFormSendToPatientDto.documentTitle"
                  class="file-path" type="text" class="form-control form-control-sm" readonly
                  placeholder="Upload your file" [value]="financialFormSendToPatientDto.documentTitle">
                <input *ngIf="!financialFormSendToPatientDto.documentTitle" class="file-path" type="text"
                  class="form-control form-control-sm " placeholder="Upload your file" [value]="">
              </div>
            </div>
          </div>
          <div class="col-lg-12 col-md-12 col-sm-12" *ngIf="financialFormSendToPatientDto.documentTitle">
            <div class="card d-flex px-3 py-2 justify-content-between align-items-center" style="flex-direction: row;">
              <div class="d-inline-flex align-items-center">
                <span class="fa fa-2x text-dynamic-2c fa-file mr-2"></span>
                <h6 style="font-weight:500 ;font-size: 13px;" class="m-0">{{financialFormSendToPatientDto.documentTitle}}</h6>
              </div>
              <div style="cursor:pointer" (click)="financialFormSendToPatientDto.documentTitle= '';financialFormSendToPatientDto.documentLink= '';">
                <i class="fa fa-times fa-lg"></i>
              </div>
            </div>
          </div>
          <p ></p>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="waves-light btn btn-sm btn-dynamic-secondary-2c" aria-label="Close"
          (click)="sendToPatientModal.hide()" mdbWavesEffect>Close</button>
        <button
          [disabled]="sendingToPatient || uploadingDocument || !financialFormSendToPatientDto.documentTitle ||(!financialFormSendToPatientDto.email && !financialFormSendToPatientDto.phoneNo)"
          (click)="uploadFinancialFormToS3()" type="button"
          class="relative waves-light btn btn-sm btn-dynamic-2c" mdbWavesEffect>
          <span *ngIf="sendingToPatient || uploadingDocument" class="spinner-border spinner-border-sm" role="status"
            aria-hidden="true"></span>
          Send</button>
      </div>
    </div>
  </div>
</div>
<app-rpm-quality-check></app-rpm-quality-check>
<!-- <app-rpm-quick-encounter #addRPmEncounterRef ></app-rpm-quick-encounter> -->

<!-- <app-patient-notification-setting #patinetRpmAlertSettingRef ></app-patient-notification-setting> -->
