<div mdbModal #modalityConfigMOdal="mdbModal" class="modal fade" role="dialog" aria-labelledby="myBasicModalLabel"
  aria-hidden="true" [config]="{backdrop: true, ignoreBackdropClick: true}">
  <div class="modal-dialog modal-fluid m-0" role="document">
    <div class="modal-content rounded-0">
      <div class="modal-header">
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalityConfigMOdal.hide()">
          <span aria-hidden="true">Ã—</span>
        </button>
        <h4 class="modal-title w-100" id="myModalLabel">Configure Modality</h4>
      </div>
      <div class="modal-body" malihu-scrollbar *ngIf="ShowAsMOdal">
        <ng-container *ngTemplateOutlet="modalitytabs"></ng-container>
      </div>
    </div>
  </div>
</div>


<div *ngIf="!ShowAsMOdal">
  <div class="d-flex align-item-center justify-content-start">
    <h4 class="mr-3 mb-0"><a class="text-dark" (click)="navigateBack()"><i class="fa fa-arrow-left"></i></a></h4>
    <h1 class="page-title">Modality Configuration</h1>
  </div>
  <ng-container *ngIf="canConfigureModalities === false && isLoadingDevice === false">
    <div #alert class="alert alert-warning alert-dismissible animated fade show"
          role="alert">
          <strong>No Modalities to be configured!</strong> <button class="btn btn-dynamic-secondary-2c btn-sm center-block pull-right mt-0"
          (click)="navigateBack()" title="Go Back">Go Back </button>
        </div>
  </ng-container>
  <ng-container *ngIf="canConfigureModalities === true">
    <ng-container *ngTemplateOutlet="modalitytabs"></ng-container>
  </ng-container>
</div>

<ng-template #modalitytabs>
  <div class="row">
    <div class="col-sm-12 p-0">

      <mdb-tabset #mdbModalityTabs [buttonClass]="'modality-tabs rounded-0'"
        [contentClass]="'m-0 p-0 z-depth-0 bg-transparent'" class="modality-tabs">

        <mdb-tab heading="Select Modality" class="modality-config">

          <div class="tab-header">
            <div class="d-flex justify-content-between">
              <p class="m-0"><strong>Select Modality</strong></p>
              <button class="btn btn-dynamic-2c btn-sm m-0 mr-0" *ngIf="!UnknownDevice"
                [disabled]="!selectedDevice.isActive" (click)="mdbModalityTabs.setActiveTab(2)" title="Next">Next <i
                  class="fa fa-angle-right"></i></button>
              <button class="btn btn-dynamic-2c btn-sm m-0 mr-0" *ngIf="UnknownDevice"
                (click)="mdbModalityTabs.setActiveTab(3)" title="Next">Next <i class="fa fa-angle-right"></i></button>
            </div>
          </div>

          <div class="bg-white p-3">
            <div class="modality">
              <div class="modality-type-list">
                <ul>
                  <li *ngFor="let item of modalitiesList">
                    <a class="btn btn-md btn-block text-capitalize font-500"
                      (click)="selectedModality=item;getDevicesBymodality();UnknownDevice=false;GetIntegrationChecklistbyModalityId();"
                      [ngClass]="[selectedModality.id === item.id ? 'btn-dynamic-2c': 'btn-outline-secondary']">{{item.name}}</a>
                  </li>
                </ul>

                <div class="p-3 border mt-3" *ngIf="selectedDevice.description">

                  <p>{{selectedDevice.description | slice:0:100}}</p>

                </div>


              </div>
              <div class="modality-list mx-3 border p-3">
                <div appCcmLoader>
                  <div class="loader-wrap" *ngIf="isLoadingDevice">
                    <div class="text-dynamic-2c la-ball-pulse ccm-loader">
                      <div></div>
                      <div></div>
                      <div></div>
                    </div>
                  </div>
                </div>
                <div class="d-flex justify-content-between align-items-center mb-2">
                  <!-- Material switch -->
                  <!-- <div class="switch">
                    <label>Own Device
                      <input type="checkbox" [(ngModel)]="UnknownDevice" (ngModelChange)="planType=2;deviceInventoryId=0;verifySerialText1.value='';verifySerialText2.value=''">
                      <span class="lever"></span>
                    </label>
                  </div> -->
                  <label for="search-modality">Search Device</label>
                  <button class="btn btn-dynamic-2c btn-sm m-0 mr-0"
                    (click)="UnknownDevice=!UnknownDevice;unKnownSelected()" title="Manual Device">Manual Device </button>
                </div>
                <div class="form-group">
                  <input type="text" name="searchText" [(ngModel)]="searchText" placeholder="Type Name of Device Model"
                    id="search-modality" class="form-control form-control-sm">
                </div>
                <div class="devices-list">
                  <div class="device-item" *ngFor="let item of filterDeviceList"
                    (click)="item.isActive=!item.isActive;UnknownDevice=false;selectedDevice=item;UnCheckAll();getDeviceConsentUrl();"
                    [class.border-success]="item.isActive===true">
                    <div class="device-check">
                      <mdb-checkbox [(ngModel)]="item.isActive"
                        (ngModelChange)="selectedDevice=item;UnCheckAll();getDeviceConsentUrl();" [default]="true"
                        [checkboxPosition]="'right'"></mdb-checkbox>
                    </div>
                    <div class="text-center">
                      <div class="img-block-con">

                       <img src="{{item.imagePath}}" alt="ihealth-core">

                      <!-- <svg [class.fill-primary]="item.isActive == true" *ngIf="item.modalityCode == 'BP'" xmlns="http://www.w3.org/2000/svg" width="60" viewBox="0 0 469.33284 512"><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path d="M42.65625,426.668h68.26953v25.59766A59.79887,59.79887,0,0,0,170.65625,512H332.793a59.79887,59.79887,0,0,0,59.73047-59.73437V438.81641c26.207-9.88672,48.32422-34.5,61.99609-67.47266a8.27736,8.27736,0,0,0,1-2.38672,201.7289,201.7289,0,0,0,13.65235-69.92187c0-.12891.07421-.24219.07421-.36719,0-.12891-.05078-.17188-.05078-.25781,0-1.34766.13672-2.65235.13672-4.01172a205.841,205.841,0,0,0-10.57812-65.707,9.05155,9.05155,0,0,0-.73438-2.21485c-13.20312-37.48828-36.93359-65.707-65.48437-76.49609V42.668A42.72113,42.72113,0,0,0,349.86719,0H42.668A42.7161,42.7161,0,0,0,0,42.668V384A42.71865,42.71865,0,0,0,42.65625,426.668Zm0-17.06641A25.6016,25.6016,0,0,1,17.05859,384V102.39844H281.58984A25.60243,25.60243,0,0,1,307.19141,128v45.35547a148.5761,148.5761,0,0,0-31.34375,53.10937,8.16918,8.16918,0,0,0-.74219,2.25391,205.71882,205.71882,0,0,0-10.582,65.707c0,1.34766.12109,2.65235.13672,3.99219,0,.09375-.05078.17969-.05078.27344s.07031.25781.07812.38672a201.58209,201.58209,0,0,0,13.65234,69.8789,8.30715,8.30715,0,0,0,1.01563,2.42969,149.75019,149.75019,0,0,0,22.09375,37.70312,8.41209,8.41209,0,0,1-2.793.51172H162.125V390.96484a25.603,25.603,0,0,0,17.06641-24.03125v-32.1289a68.109,68.109,0,0,0,5.71875-101.3086c-.03516-.05859-.07422-.11328-.11328-.168-.05079-.05079-.11719-.0625-.168-.11329a68.13581,68.13581,0,0,0-96.207,0c-.05079.05079-.11719.0625-.17188.11329a1.54462,1.54462,0,0,1-.10937.168,68.10111,68.10111,0,0,0,5.71875,101.3086v32.1289a25.603,25.603,0,0,0,17.0664,24.03125v18.63672Zm298.668-259.62109a83.11375,83.11375,0,0,0-17.06641,8.84375V128a42.72113,42.72113,0,0,0-42.668-42.668H51.19141V51.19922H341.32422Zm-255.25,123.23828a50.86162,50.86162,0,0,1,8.85937-21.332A8.40458,8.40458,0,0,0,106.78516,240.043a50.735,50.735,0,0,1,21.33593-8.85938,8.40443,8.40443,0,0,0,16.75782,0,50.6985,50.6985,0,0,1,21.332,8.85938,8.39764,8.39764,0,0,0,11.85547,11.84375,51.00689,51.00689,0,0,1,8.85547,21.332,8.40654,8.40654,0,0,0,0,16.76172,51.13189,51.13189,0,0,1-100.90625,0,8.40654,8.40654,0,0,0,0-16.76172ZM119.457,375.46484a8.5322,8.5322,0,0,1-8.53125-8.53125V344.83984a67.69119,67.69119,0,0,0,51.19922,0v22.09375a8.533,8.533,0,0,1-8.53516,8.53125ZM162.125,426.668H298.65625a25.41966,25.41966,0,0,0,14.88281-5.07813,88.79583,88.79583,0,0,0,27.78516,17.22657v13.44922a8.533,8.533,0,0,1-8.53125,8.53515H170.65625a8.533,8.533,0,0,1-8.53125-8.53515Zm213.332,25.59766a42.71527,42.71527,0,0,1-42.66406,42.668H170.65625a42.71527,42.71527,0,0,1-42.66406-42.668V392.53516h17.0664v59.73047a25.5991,25.5991,0,0,0,25.59766,25.60156H332.793a25.5991,25.5991,0,0,0,25.59766-25.60156v-9.16407a57.84964,57.84964,0,0,0,17.0664,0Zm62.72266-230.39844H367.35156a8.5332,8.5332,0,1,0,0,17.0664h76.9375A175.70686,175.70686,0,0,1,448.55469,256H358.81641a8.53321,8.53321,0,0,0,0,17.06641h92.23047q.85546,8.373,1.07421,17.0664H358.81641a8.53321,8.53321,0,0,0,0,17.06641H451.832c-.35937,5.82031-1.02344,11.49609-1.85937,17.06641H358.81641a8.5332,8.5332,0,0,0,0,17.0664h87.793a173.85461,173.85461,0,0,1-5.0625,17.06641H367.35156a8.5332,8.5332,0,1,0,0,17.0664h66.85938c-15.66016,31.08985-39.94531,51.20313-67.28516,51.20313A65.69917,65.69917,0,0,1,320.21484,404.957a8.97289,8.97289,0,0,0-1.13671-1.10937,117.96746,117.96746,0,0,1-19.42969-28.38282h33.57031a8.5332,8.5332,0,0,0,0-17.0664H292.25781a173.83036,173.83036,0,0,1-5.05859-17.06641h37.48437a8.5332,8.5332,0,1,0,0-17.0664h-40.8125c-.85546-5.57032-1.49609-11.2461-1.86328-17.06641h42.668a8.53321,8.53321,0,1,0,0-17.06641h-42.9375c.11719-5.793.48438-11.48437,1.06641-17.0664h41.8789a8.53321,8.53321,0,1,0,0-17.06641H285.28516c1.16015-5.88672,2.6289-11.55469,4.26953-17.06641h43.66406a8.5332,8.5332,0,0,0,0-17.0664H295.67188a120.74111,120.74111,0,0,1,25.99218-39.36328l.17969-.17188a64.8505,64.8505,0,0,1,45.082-20.19922C396.707,162.13281,422.92969,185.93359,438.17969,221.86719ZM42.65625,17.06641H349.85938A25.59909,25.59909,0,0,1,375.457,42.668V145.69922a57.84964,57.84964,0,0,0-17.0664,0V42.668a8.533,8.533,0,0,0-8.53125-8.53516H42.65625A8.533,8.533,0,0,0,34.125,42.668V85.332H17.05859V42.668A25.5991,25.5991,0,0,1,42.65625,17.06641Z"/><path d="M136.52344,315.73438a8.53387,8.53387,0,0,0,8.53515-8.53516V264.53516a8.5332,8.5332,0,1,0-17.0664,0v42.66406A8.533,8.533,0,0,0,136.52344,315.73438Z"/></g></g></svg>
            <svg [class.fill-primary]="item.isActive == true" *ngIf="item.modalityCode == 'WT'"  xmlns="http://www.w3.org/2000/svg"  width="60" viewBox="0 0 460.05671 511.86041"><title>weight</title><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path d="M240.20277,0c-.01983,0-.03936.00116-.0592.00116.02411,0,.048-.00092.07208-.00092Z"/><path d="M240.23561,0l-.02.00024c1.54456.00019,3.08289.03553,4.61725.09089C243.30629.03711,241.77541,0,240.23561,0Z"/><path d="M444.28,105.364a52.94246,52.94246,0,0,0-40.50573-19.33465H350.328A127.55343,127.55343,0,0,0,235.44234.98279q-.39606-.01649-.79285-.03009C233.11513.89734,231.5768.862,230.03224.86182c-.02411,0-.048.00091-.07208.00091-1.4834.00067-2.96076.03565-4.43488.08728-.349.01221-.69787.02478-1.0462.03974-1.5033.06494-3.00293.14843-4.49518.26562-.04645.00366-.09253.00867-.139.01233q-2.32169.18493-4.62335.45569c-.13489.01562-.27.03021-.40472.04626A127.55944,127.55944,0,0,0,109.71461,86.02936H56.26832a52.94234,52.94234,0,0,0-40.494,19.3269,67.54935,67.54935,0,0,0-14.851,54.51062L47.59718,459.67737c4.65918,30.23608,27.93567,52.183,55.3606,52.183H357.09645c27.40936,0,50.68976-21.947,55.36456-52.17523l46.67383-299.81049A67.55182,67.55182,0,0,0,444.28,105.364Zm-323.7381,6.53461A110.74473,110.74473,0,1,1,263.07429,234.301a2.26256,2.26256,0,0,0-.23,0c-.20276,0-.347.16767-.54193.22223a110.33709,110.33709,0,0,1-64.56207,0c-.195-.05456-.34308-.17932-.54584-.22223a2.26293,2.26293,0,0,0-.23,0A110.72682,110.72682,0,0,1,120.54188,111.89862Zm321.74573,45.38721L395.61378,457.09631a41.43735,41.43735,0,0,1-38.51733,37.76484H102.94221a41.43357,41.43357,0,0,1-38.51342-37.76484L17.75105,157.28583a51.2617,51.2617,0,0,1,10.96369-40.884,36.16788,36.16788,0,0,1,27.55358-13.3382h48.54926a126.7256,126.7256,0,0,0-.7475,46.74152c.14972.87695.29871,1.754.46692,2.62805q.06766.3586.13727.71661a126.731,126.731,0,0,0,6.33478,21.63818c-.02448.01429-.0481.02985-.07257.04413a127.97576,127.97576,0,0,0,91.55139,78.52466l.00519-.037q4.8412,1.09013,9.7406,1.78534c.31665.04419.63244.09107.94983.13294.47595.06445.95269.11975,1.4292.17871a129.0052,129.0052,0,0,0,15.43951.9314c3.9129,0,7.7818-.18592,11.605-.53028a125.14223,125.14223,0,0,0,15.80652-2.49811l.00952.06818a127.97414,127.97414,0,0,0,91.68445-78.52924c-.03925-.02294-.07715-.04785-.11639-.07074a126.753,126.753,0,0,0,8.72473-43.85571q.01254-.7001.01776-1.402c.0072-.869.00116-1.73822-.00958-2.6076-.00678-.52441-.00684-1.05035-.0199-1.57324q-.0444-1.795-.14221-3.58972c-.02942-.55732-.0691-1.11194-.10566-1.66736q-.08459-1.2758-.19305-2.55072c-.04028-.46936-.07965-.939-.12494-1.4068-.13159-1.34436-.27661-2.68805-.45142-4.02967l-.00158-.01153q-.29151-2.23581-.664-4.46466l-.01654-.10016q-.37491-2.237-.83-4.46521h48.54926A36.18983,36.18983,0,0,1,431.32783,116.437,51.25662,51.25662,0,0,1,442.28761,157.28583Z"/><path d="M230.01936,60.4798a8.51784,8.51784,0,0,0,8.51911-8.51911V43.44543a8.51719,8.51719,0,1,0-17.03437,0v8.51526A8.517,8.517,0,0,0,230.01936,60.4798Z"/><path d="M184.3163,66.49188a8.5137,8.5137,0,0,0,7.38458,4.25763,8.377,8.377,0,0,0,4.25757-1.15014,8.51124,8.51124,0,0,0,3.11914-11.62269L194.82,50.6a8.51744,8.51744,0,0,0-14.75348,8.51519Z"/><path d="M152.00215,93.40607l7.37677,4.25763a8.51573,8.51573,0,0,0,8.5152-14.74958l-7.37671-4.25763a8.51575,8.51575,0,0,0-8.51526,14.74958Z"/><path d="M292.14455,174.32013l7.37677,4.26154a8.51841,8.51841,0,0,0,8.5191-14.75348l-7.37677-4.25763a8.5167,8.5167,0,0,0-8.5191,14.74957Z"/><path d="M161.882,128.61713a8.517,8.517,0,0,0-8.5191-8.5152h-8.5152a8.51715,8.51715,0,1,0,0,17.0343h8.5152A8.51779,8.51779,0,0,0,161.882,128.61713Z"/><path d="M298.15669,128.61713a8.5203,8.5203,0,0,0,8.51911,8.5191h8.5191a8.51715,8.51715,0,0,0,0-17.0343h-8.5191A8.51947,8.51947,0,0,0,298.15669,128.61713Z"/><path d="M160.51741,178.58167l7.37671-4.26154a8.51573,8.51573,0,0,0-8.5152-14.74957l-7.37677,4.25763a8.51742,8.51742,0,1,0,8.51526,14.75348Z"/><path d="M296.45674,98.80609a8.42938,8.42938,0,0,0,4.25763-1.14239l7.37671-4.25763A8.51672,8.51672,0,1,0,299.572,78.65649l-7.3767,4.25763a8.51745,8.51745,0,0,0,4.26147,15.892Z"/><path d="M264.088,69.59937a8.3627,8.3627,0,0,0,4.26147,1.15014,8.51359,8.51359,0,0,0,7.38452-4.25763l4.25763-7.37671A8.51743,8.51743,0,1,0,265.23817,50.6l-4.25763,7.3767A8.51634,8.51634,0,0,0,264.088,69.59937Z"/><path d="M265.32344,437.16418h-51.103a8.51716,8.51716,0,1,0,0,17.03431h51.103a8.51716,8.51716,0,0,0,0-17.03431Z"/><path d="M281.82344,380.92566h-84.103a8.51715,8.51715,0,1,0,0,17.0343h84.103a8.51715,8.51715,0,0,0,0-17.0343Z"/><path d="M297.32344,324.68713h-115.103a8.51716,8.51716,0,1,0,0,17.03431h115.103a8.51716,8.51716,0,0,0,0-17.03431Z"/><path d="M196.85487,201.42633a48.36368,48.36368,0,0,0,66.32532,0,8.27968,8.27968,0,0,0-5.70746-14.28241,8.06346,8.06346,0,0,0-5.56488,2.15051,31.77064,31.77064,0,0,1-13.36938,7.57489v-100.84a8.51719,8.51719,0,0,0-17.03437,0v100.842a31.7699,31.7699,0,0,1-13.37689-7.577,8.06335,8.06335,0,0,0-5.56488-2.15051A8.27968,8.27968,0,0,0,196.85487,201.42633Z"/></g></g></svg>
            <svg [class.fill-primary]="item.isActive == true" *ngIf="item.modalityCode == 'PO'" xmlns="http://www.w3.org/2000/svg"  width="60" viewBox="0 0 512.00036 512.00045"><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path d="M384.00036.00045a128.08979,128.08979,0,0,0-126.293,108.07422,34.071,34.071,0,0,0-35.83984-1.11719v-21.625a34.13229,34.13229,0,0,0-51.19922-29.57422v-21.625A34.13213,34.13213,0,0,0,136.53552.00045a33.54651,33.54651,0,0,0-24.05859,9.98438,33.61636,33.61636,0,0,0-10.07422,24.14843v30.1836a33.84792,33.84792,0,0,0-17.07032-4.582A34.24529,34.24529,0,0,0,51.19958,93.86764v95.57422A44.91359,44.91359,0,0,0,23.16052,179.645a22.54218,22.54218,0,0,0-16.21484,6.73438A22.69661,22.69661,0,0,0,.00036,202.84811v95.08594a132.59051,132.59051,0,0,0,41.0625,96.23046A141.39108,141.39108,0,0,0,59.73474,409.7192v76.6836a25.59827,25.59827,0,0,0,25.59765,25.59765H221.86755a25.6016,25.6016,0,0,0,25.60156-25.59765V404.48092a95.46747,95.46747,0,0,0,20.75-35.35547c.51172,2.19531.85547,4.41406,1.4336,6.60547a117.00279,117.00279,0,0,0,80.21484,84.01172V486.4028a25.5991,25.5991,0,0,0,25.60156,25.59765h17.06641a25.59827,25.59827,0,0,0,25.59766-25.59765V459.87155A117.34729,117.34729,0,0,0,498.348,375.73092a460.70645,460.70645,0,0,0,13.65234-111.19531V128.00045A128.00134,128.00134,0,0,0,384.00036.00045Zm-128,338.89453a78.94729,78.94729,0,0,1-22.58593,55.53516,9.18407,9.18407,0,0,0-.85547.80078A79.04776,79.04776,0,0,1,194.348,416.18014a8.53341,8.53341,0,1,0,3.76953,16.64062,96.71576,96.71576,0,0,0,32.28516-13.832V486.4028a8.533,8.533,0,0,1-8.53516,8.53125H85.33239a8.53221,8.53221,0,0,1-8.53125-8.53125V419.96139a138.25353,138.25353,0,0,0,32.27344,11.67187,8.537,8.537,0,1,0,3.71875-16.66406,122.29239,122.29239,0,0,1-59.67187-32.87109,116.05634,116.05634,0,0,1-36.05469-84.16406V202.84811a5.98066,5.98066,0,0,1,1.90234-4.36328,5.78954,5.78954,0,0,1,4.19141-1.707,28.07319,28.07319,0,0,1,28.03906,28.01562v31.207a8.53321,8.53321,0,1,0,17.06641,0V93.86764a17.06836,17.06836,0,0,1,34.13672,0,7.45734,7.45734,0,0,0,.29687,1.46094,7.49537,7.49537,0,0,0-.29687,1.46484v82.40625a8.5332,8.5332,0,1,0,17.0664,0V96.79342a7.80111,7.80111,0,0,0-.30078-1.46484,7.46525,7.46525,0,0,0,.30078-1.46094V34.13326a17.06641,17.06641,0,0,1,34.13282,0V179.19967a8.5332,8.5332,0,1,0,17.0664,0V85.33248a17.06641,17.06641,0,0,1,34.13281,0v93.86719a8.53321,8.53321,0,1,0,17.06641,0V136.53561a17.06641,17.06641,0,1,1,34.13281,0ZM392.53552,494.93405H375.46911a8.533,8.533,0,0,1-8.53515-8.53125V398.9692a67.99122,67.99122,0,0,1,34.13281,0v87.4336A8.5322,8.5322,0,0,1,392.53552,494.93405Zm25.59766-53.15235V405.87936c1.16015.71094,2.4414,1.30859,3.51562,2.082a8.4448,8.4448,0,0,0,5.01953,1.64062,8.53536,8.53536,0,0,0,5.03516-15.42968,72.05667,72.05667,0,0,0-18.4336-9.38672,6.90576,6.90576,0,0,0-.85156-.33985,87.288,87.288,0,0,0-56.78125,0,6.72194,6.72194,0,0,0-.85547.33985,72.0323,72.0323,0,0,0-18.42968,9.38672,8.53255,8.53255,0,0,0,10.05078,13.78906c1.07422-.77344,2.35547-1.37109,3.51562-2.082v36.0625a100.76137,100.76137,0,0,1-63.65625-70.32422,444.8243,444.8243,0,0,1-8.99609-47.35156h29.93359a8.53321,8.53321,0,1,0,0-17.06641H275.3363c-1.41406-14.19141-2.26953-28.42187-2.26953-42.66406v-128H426.66833a8.53321,8.53321,0,0,0,0-17.06641H273.50427a110.82137,110.82137,0,0,1,221.01172,0H460.80114a8.53321,8.53321,0,1,0,0,17.06641H494.934v128c0,14.24219-.85157,28.47265-2.26953,42.66406h-151.332a8.53321,8.53321,0,0,0,0,17.06641H490.73474a443.423,443.423,0,0,1-8.94141,47.32812A100.24344,100.24344,0,0,1,418.13318,441.7817Z"/><path d="M341.33239,281.602a8.5332,8.5332,0,1,0,0-17.0664h-8.53125V170.66842a8.53446,8.53446,0,0,0-14.5664-6.03516l-17.06641,17.06641a8.53352,8.53352,0,0,0,12.06641,12.06641l2.5-2.5v73.26953h-8.53516a8.5332,8.5332,0,0,0,0,17.0664Z"/><path d="M375.46911,281.602a8.44769,8.44769,0,0,0,7.84766-11.77734,9.85526,9.85526,0,0,0-1.78906-2.81641,8.89363,8.89363,0,0,0-2.81641-1.793,8.54866,8.54866,0,0,0-6.48437,0,8.80745,8.80745,0,0,0-2.81641,1.793,9.86737,9.86737,0,0,0-1.793,2.81641,8.58108,8.58108,0,0,0-.68359,3.24219,8.4503,8.4503,0,0,0,8.53515,8.53515Z"/><path d="M409.60193,264.53561a8.5332,8.5332,0,1,0,0,17.0664H452.266a17.06606,17.06606,0,0,0,17.0664-17.0664V230.4028a17.0694,17.0694,0,0,0-17.0664-17.07032H418.13318V179.19967h42.668a8.53321,8.53321,0,0,0,0-17.06641h-42.668a17.06607,17.06607,0,0,0-17.06641,17.06641v34.13281a17.06941,17.06941,0,0,0,17.06641,17.07032H452.266v34.13281Z"/><path d="M418.13318,42.66842H349.86755a8.53321,8.53321,0,1,0,0,17.06641h68.26563a8.53321,8.53321,0,1,0,0-17.06641Z"/><path d="M401.06677,76.80123H366.934a8.53321,8.53321,0,0,0,0,17.06641h34.13281a8.53321,8.53321,0,1,0,0-17.06641Z"/><path d="M338.83239,343.83639a8.53226,8.53226,0,0,0-12.0664,0l-8.53125,8.53125a8.53227,8.53227,0,0,0,0,12.06641l8.53125,8.53515a8.53351,8.53351,0,0,0,12.0664-12.0664l-2.5-2.5,2.5-2.50391A8.52753,8.52753,0,0,0,338.83239,343.83639Z"/><path d="M441.23474,343.83639a8.53214,8.53214,0,0,0-12.06641,12.0625l2.5,2.50391-2.5,2.5a8.53348,8.53348,0,1,0,12.06641,12.0664l8.53125-8.53515a8.53227,8.53227,0,0,0,0-12.06641Z"/></g></g></svg>
            <svg [class.fill-primary]="item.isActive == true" *ngIf="item.modalityCode == 'BG'" xmlns="http://www.w3.org/2000/svg" style="width:40px"  width="40"  viewBox="0 0 380 512"><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path d="M329,40H49A9.99924,9.99924,0,0,0,39,50V252a9.99924,9.99924,0,0,0,10,10H329a9.99924,9.99924,0,0,0,10-10V50A9.99924,9.99924,0,0,0,329,40ZM319,242H59V60H319Z"/><path d="M330,0H50A50.05635,50.05635,0,0,0,0,50V252c0,79.34766,61.93359,144.49219,140,149.66016V502a9.99924,9.99924,0,0,0,10,10h80a9.99924,9.99924,0,0,0,10-10V401.66016C318.06641,396.49609,380,331.34766,380,252V50A50.05635,50.05635,0,0,0,330,0ZM220,492H160V472h60Zm0-40H160V402h60ZM360,252A130.1455,130.1455,0,0,1,230,382H150A130.1455,130.1455,0,0,1,20,252V50A30.0328,30.0328,0,0,1,50,20H330a30.0328,30.0328,0,0,1,30,30Z"/><path d="M170,282H69a9.99679,9.99679,0,0,0-9.98828,10.5c.09375,1.88672,1.35156,18.9375,16.17969,36.05078C94.42969,350.74609,126.32813,362,170,362a9.99924,9.99924,0,0,0,10-10V292A9.99924,9.99924,0,0,0,170,282Zm-10,59.77344C105.56641,339.23047,87.668,315.99609,81.80859,302H160Z"/><path d="M311,282H210a9.99924,9.99924,0,0,0-10,10v60a9.99924,9.99924,0,0,0,10,10c43.67188,0,75.57031-11.25391,94.80859-33.44922,14.82813-17.11328,16.08594-34.16406,16.17969-36.05078A9.99679,9.99679,0,0,0,311,282Zm-91,59.77344V302h78.17969C292.30469,316.03516,274.39063,339.23438,220,341.77344Z"/><path d="M169,222a10,10,0,1,0-10-10A10.01428,10.01428,0,0,0,169,222Z"/><path d="M89,222h40a10,10,0,0,0,0-20H89a10,10,0,0,0,0,20Z"/><path d="M249,222a10,10,0,1,0-10-10A10.01428,10.01428,0,0,0,249,222Z"/><path d="M209,222a10,10,0,1,0-10-10A10.01428,10.01428,0,0,0,209,222Z"/></g></g></svg>
           <svg [class.fill-primary]="item.isActive == true" *ngIf="item.modalityCode == 'AT'"  xmlns="http://www.w3.org/2000/svg"  width="60" viewBox="0 0 511.91323 494.34597"><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path d="M503.30638,102.4l-.883-.883c-11.476-11.476-31.779-11.476-43.255,0l-45.903,46.786a5.89819,5.89819,0,0,1-8.828,0l-64.442-60.027a35.29064,35.29064,0,0,0-22.952-8.828h-96.221a7.46355,7.46355,0,0,0-5.297,1.766l-81.214,77.683c-11.476,12.359-12.359,31.779-1.766,43.255a29.93432,29.93432,0,0,0,44.138,0l57.379-60.91h20.303L120.18838,291.31h-82.979c-20.303,0-36.193,15.007-37.076,33.545a33.2506,33.2506,0,0,0,9.71,26.483c7.062,6.179,15.89,10.593,25.6,10.593h123.587a8.01444,8.01444,0,0,0,6.179-2.648l63.559-67.972,52.965,55.614-15.89,102.4a35.80934,35.80934,0,0,0,19.421,41.49,31.19346,31.19346,0,0,0,15.007,3.531,34.6285,34.6285,0,0,0,15.89-3.531c8.828-4.414,15.89-13.241,18.538-23.835l27.365-147.421c0-2.648-.883-6.179-2.648-7.945l-73.269-73.269,58.262-58.262,40.607,40.607a30.378,30.378,0,0,0,42.372,0l75.917-75.917A30.37823,30.37823,0,0,0,503.30638,102.4Zm-12.359,30.014-75.917,75.917c-5.297,4.414-13.241,4.414-17.655,0l-46.786-46.786a8.53385,8.53385,0,0,0-12.359,0l-70.621,70.621a8.01255,8.01255,0,0,0-2.648,6.179c0,2.648.883,4.414,3.531,7.062l75.917,75.917-26.483,142.124a24.41244,24.41244,0,0,1-9.71,11.476c-4.414,1.766-9.71,2.648-15.007,0-7.945-3.531-11.476-12.359-9.71-22.069l16.772-107.697a10.0252,10.0252,0,0,0-2.648-7.062l-62.676-65.324a8.01261,8.01261,0,0,0-6.179-2.648c-2.648,0-5.297.883-6.179,2.648l-67.09,71.503H35.44438a17.96432,17.96432,0,0,1-13.241-5.297,21.685,21.685,0,0,1-4.414-13.241c0-9.71,8.828-16.772,19.421-16.772h86.51c2.648,0,4.414-.883,6.179-.883l150.069-167.724c2.648-2.648,2.648-6.179,1.766-9.71-.883-3.531-4.414-5.297-7.945-5.297h-44.138a9.53538,9.53538,0,0,0-6.179,2.648l-60.028,63.559a10.86716,10.86716,0,0,1-8.828,4.414,14.17589,14.17589,0,0,1-9.71-4.414,13.652,13.652,0,0,1,.883-18.538l78.566-75.034h93.572a16.28783,16.28783,0,0,1,10.593,4.414l64.441,60.028a24.5508,24.5508,0,0,0,33.545-.883l45.904-46.786c4.414-4.414,13.241-4.414,17.655,0l.883.883A12.27775,12.27775,0,0,1,490.94737,132.414Z"/><path d="M406.20237,105.931a52.9655,52.9655,0,1,0-52.966-52.965A53.12145,53.12145,0,0,0,406.20237,105.931Zm0-88.276a35.31,35.31,0,1,1-35.31,35.31A35.41381,35.41381,0,0,1,406.20237,17.655Z"/></g></g></svg>
 -->


                      </div>
                      <div class="device-desc">
                        <strong>{{item.deviceName}}</strong>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </mdb-tab>

        <mdb-tab heading="Purchase Plan" [disabled]="!selectedDevice.isActive || UnknownDevice">

          <div class="tab-header">
            <div class="d-flex justify-content-between">
              <p class="m-0"><strong>Purchase Plan</strong></p>
              <div>
                <button class="btn btn-dynamic-2c btn-sm m-0" (click)="mdbModalityTabs.setActiveTab(1)"><i
                    class="fa fa-angle-left"></i> Prev</button>
                <button class="btn btn-dynamic-2c btn-sm m-0 ml-2"
                  [disabled]="!agreementChecked || (!deviceInventoryId && planType !== 2)"
                  (click)="mdbModalityTabs.setActiveTab(3)" title="Next">Next <i
                    class="fa fa-angle-right fa-lg"></i></button>
              </div>
            </div>
          </div>
          <div class="bg-white p-3">
            <div class="plan-packages">
              <div class="package-1" [style.border-color]="planType === 0 ? '#4EB048' : ''"
                (click)="planType=0;verifySerialText2.value='';verifySerialText3.value=''">
                <div class="p-img">
                  <img src="{{selectedDevice.imagePath}}" alt="ihealth-core">
                </div>

                <div class="p-desc">
                  <p class="tag">Buy</p>
                  <p><strong>{{selectedDevice.deviceName}} </strong></p>
                  <p class="text-black-50"><strong class="text-dynamic-secondary-2c">Price: </strong>${{selectedDevice.price}}
                  </p>
                  <p class="text-black-50"><strong class="text-dynamic-secondary-2c">Available In: </strong> 12 x
                    ${{(selectedDevice.price/12) | number}}</p>
                  <label class="mx-0">Serial Number</label>
                  <div class="form-group mb-0 flex-grow-1">
                    <input #verifySerialText1 type="text" name="" placeholder="Enter Device Serial No."
                      class="form-control form-control-sm">
                  </div>
                </div>
              </div>

              <div class="package-1" [style.border-color]="planType === 1 ? '#4EB048' : ''"
                (click)="planType=1;verifySerialText1.value='';verifySerialText3.value=''">
                <div class="p-img">
                  <img src="{{selectedDevice.imagePath}}" alt="ihealth-core">
                </div>
                <div class="p-desc">
                  <p class="tag">Lease to Buy</p>
                  <p><strong>{{selectedDevice.deviceName}}</strong></p>
                  <p class="text-black-50"><strong class="text-dynamic-secondary-2c">Price: </strong> ${{selectedDevice.price}} +
                    50%
                  </p>
                  <p class="text-black-50"><strong class="text-dynamic-secondary-2c">Available In: </strong> 12 x
                    ${{calculatePercentage(selectedDevice.price/12) | number}}</p>
                  <label class="mx-0">Serial Number</label>
                  <div class="form-group mb-0 flex-grow-1">
                    <input #verifySerialText2 type="text" name="" placeholder="Enter Device Serial No."
                      class="form-control form-control-sm">
                  </div>
                </div>
              </div>
              <div class="package-1" [style.border-color]="planType === 2 ? '#4EB048' : ''"
                (click)="planType=2;deviceInventoryId=0;verifySerialText1.value='';verifySerialText2.value=''">
                <div class="p-img">
                  <img src="{{selectedDevice.imagePath}}" alt="ihealth-core">
                </div>
                <div class="p-desc">
                  <p>Own</p>
                  <p><strong>I have my own device</strong></p>
                  <p></p>
                  <label class="mx-0">Serial Number</label>
                  <div class="form-group mb-0 flex-grow-1">
                    <input type="text" #verifySerialText3 name="" class="form-control form-control-sm">
                  </div>
                </div>
              </div>
            </div>
            <hr>
            <div class="plan-agreement">
              <div class="panel z-depth-0">
                <div class="panel-header">
                  <h3>Purchase Agreement</h3>
                </div>
                <div class="panel-body">
                  <p> Lorem ipsum dolor sit amet consectetur adipisicing elit. Ipsum, tenetur enim voluptatum ipsa
                    est
                    sunt amet ex? Consequatur fugit, numquam repellendus quam dignissimos magnam nesciunt
                    reprehenderit qui? Perferendis, odio esse.
                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Ipsum, tenetur enim voluptatum ipsa
                    est
                    sunt amet ex? Consequatur fugit, numquam repellendus quam dignissimos magnam nesciunt
                    reprehenderit qui? Perferendis, odio esse. </p>

                  <mdb-checkbox [default]="true" [(ngModel)]="agreementChecked">
                    <p>I have read the Purchase Agreement carefully and agreed with it.</p>
                  </mdb-checkbox>
                </div>

              </div>
            </div>
          </div>

          <div class="d-flex justify-content-end py-2">
            <div>
              <button class="btn btn-dynamic-2c btn-sm m-0" (click)="mdbModalityTabs.setActiveTab(1)"><i
                  class="fa fa-angle-left"></i> Prev</button>

              <button class="btn btn-dynamic-2c btn-sm m-0 ml-2"
                [disabled]="!agreementChecked || (!deviceInventoryId && planType !== 2)"
                (click)="mdbModalityTabs.setActiveTab(3)" title="Next">Next <i
                  class="fa fa-angle-right fa-lg"></i></button>

            </div>
          </div>
        </mdb-tab>

        <mdb-tab heading="Integration Checklist"
          [disabled]="(!agreementChecked || (!deviceInventoryId && planType !== 2)) && !UnknownDevice">

          <div class="tab-header">
            <div class="d-flex justify-content-between">
              <p class="m-0"><strong>Integration Checklist</strong></p>
              <div>
                <button class="btn btn-dynamic-2c btn-sm m-0" *ngIf="!UnknownDevice" (click)="mdbModalityTabs.setActiveTab(2)"><i
                    class="fa fa-angle-left"></i> Prev</button>
                <button class="btn btn-dynamic-2c btn-sm m-0" *ngIf="UnknownDevice" (click)="mdbModalityTabs.setActiveTab(1)"><i
                    class="fa fa-angle-left"></i> Prev</button>

                <button class="btn btn-dynamic-2c btn-sm m-0 ml-2" [disabled]="!isCheckListCompleted"
                  (click)="mdbModalityTabs.setActiveTab(4)">Next<i class="fa fa-angle-right"></i></button>

              </div>
            </div>
          </div>
          <div class="bg-white p-3">
            <div class="row">
              <div class="col-12">
                <h3 class="text-dynamic-2c mb-0"> I health Care Checklist</h3>
                <p>Device Name: {{selectedModality.name}}</p>

                <mdb-checkbox [default]="true" *ngFor="let item of intigrationCheckList" [(ngModel)]="item.isChecked"
                  (ngModelChange)="getCheckListStatus()">
                  <p>{{item.title}} <strong *ngIf="item.isMandatory" class="text-danger"> *</strong></p>
                </mdb-checkbox>
              </div>
            </div>
          </div>

        </mdb-tab>
        <mdb-tab heading="Alerts" [disabled]="!isCheckListCompleted">

          <div class="tab-header">
            <div class="d-flex justify-content-between">
              <p class="m-0"><strong>Alerts</strong></p>


              <div>
                <button class="btn btn-dynamic-2c btn-sm m-0" (click)="mdbModalityTabs.setActiveTab(3)"><i
                    class="fa fa-angle-left"></i> Prev</button>
                <button class="btn btn-dynamic-2c btn-sm m-0 ml-2"
                  [disabled]="isSavingData || !modalityConfDto.alerts.notify.timeUnit || !modalityConfDto.alerts.notify.timeLapse"
                  (click)="SaveModalityConf();" title="save"> <i
                    class="fa fa-angle-right"></i>
                    <span *ngIf="isSavingData" class="spinner-border spinner-border-sm" role="status"
                aria-hidden="true"></span> Next</button>
                <!-- <a *ngIf="!isLoading" class="btn btn-dynamic-2c btn-sm" title="excel"><i
            class="fa fa-file-excel fa-lg"></i> Excel</a> -->
              </div>

            </div>
          </div>

          <div class="bg-white p-3">
            <div class="row">
              <div class="col-lg-12 col-sm-12">
                <div class="p-3 border" *ngIf="selectedModality && selectedModality.code === 'BP'">
                  <label>Blood Pressure</label>

                  <div class="d-flex align-items-center justify-content-start flex-nowrap mb-4">
                    <label class="mx-3">DBP Low</label>
                    <div class="form-group mb-0 flex-grow-1">
                      <input type="number" min="0" oninput="validity.valid||(value='');" [(ngModel)]="modalityConfDto.alerts.threshold.bloodPressure.minLowPressure"
                        (blur)="CheckMinMaxvalue()" name="" class="form-control form-control-sm">
                    </div>
                    <label class="mx-3">DBP High</label>
                    <div class="form-group mb-0 flex-grow-1">
                      <input type="number" min="0" oninput="validity.valid||(value='');" [(ngModel)]="modalityConfDto.alerts.threshold.bloodPressure.minHighPressure"
                        (blur)="CheckMinMaxvalue()" name="" class="form-control form-control-sm">
                    </div>

                  </div>
                  <div class="d-flex align-items-center justify-content-start flex-nowrap mb-4">
                    <label class="mx-3">SBP Low</label>
                    <div class="form-group mb-0 flex-grow-1">
                      <input type="number" min="0" oninput="validity.valid||(value='');" [(ngModel)]="modalityConfDto.alerts.threshold.bloodPressure.maxLowPressure"
                        (blur)="CheckMinMaxvalue()" name="" class="form-control form-control-sm">
                    </div>
                    <label class="mx-3">SBP High</label>
                    <div class="form-group mb-0 flex-grow-1">
                      <input type="number"min="0" oninput="validity.valid||(value='');" [(ngModel)]="modalityConfDto.alerts.threshold.bloodPressure.maxHighPressure"
                        (blur)="CheckMinMaxvalue()" name="" class="form-control form-control-sm">
                    </div>
                  </div>
                </div>
                <div class="p-3 border" *ngIf="selectedModality && selectedModality.code === 'WT'">
                  <label>Weight</label>
                  <div class="d-flex align-items-center justify-content-start flex-nowrap mb-4">
                    <label class="mx-3">Min</label>
                    <div class="form-group mb-0 flex-grow-1">
                      <input type="number" min="0" oninput="validity.valid||(value='');" [(ngModel)]="modalityConfDto.alerts.threshold.weight.minWeight"
                        (blur)="CheckMinMaxvalue()" name="" class="form-control form-control-sm">
                    </div>
                    <label class="mx-3">Max</label>
                    <div class="form-group mb-0 flex-grow-1">
                      <input type="number" min="0" oninput="validity.valid||(value='');" [(ngModel)]="modalityConfDto.alerts.threshold.weight.maxWeight"
                        (blur)="CheckMinMaxvalue()" name="" class="form-control form-control-sm">
                    </div>
                  </div>
                </div>
                <div class="p-3 border" *ngIf="selectedModality && selectedModality.code === 'PO'">
                  <label>Pulse</label>
                  <div class="d-flex align-items-center justify-content-start flex-nowrap mb-4">
                    <label class="mx-3">Min Blood Oxygen</label>
                    <div class="form-group mb-0 flex-grow-1">
                      <input type="number"min="0" oninput="validity.valid||(value='');" [(ngModel)]="modalityConfDto.alerts.threshold.pulse.minBloodOxygen"
                        (blur)="CheckMinMaxvalue()" name="" class="form-control form-control-sm">
                    </div>
                    <label class="mx-3">Max Blood Oxygen</label>
                    <div class="form-group mb-0 flex-grow-1">
                      <input type="number" min="0" oninput="validity.valid||(value='');" [(ngModel)]="modalityConfDto.alerts.threshold.pulse.maxBloodOxygen"
                        (blur)="CheckMinMaxvalue()" name="" class="form-control form-control-sm">
                    </div>
                  </div>
                </div>
                <div class="p-3 border" *ngIf="selectedModality && selectedModality.code === 'BG'">
                  <label>Blood Glucose</label>
                  <div class="d-flex align-items-center justify-content-start flex-nowrap mb-4">
                    <label class="mx-3">Min</label>
                    <div class="form-group mb-0 flex-grow-1">
                      <input type="number" min="0" oninput="validity.valid||(value='');" [(ngModel)]="modalityConfDto.alerts.threshold.bloodGlucose.minGlucose"
                        (blur)="CheckMinMaxvalue()" name="" class="form-control form-control-sm">
                    </div>
                    <label class="mx-3">Max</label>
                    <div class="form-group mb-0 flex-grow-1">
                      <input type="number" min="0" oninput="validity.valid||(value='');" [(ngModel)]="modalityConfDto.alerts.threshold.bloodGlucose.maxGlucose"
                        (blur)="CheckMinMaxvalue()" name="" class="form-control form-control-sm">
                    </div>
                  </div>
                </div>
                <div class="p-3 border" *ngIf="selectedModality && selectedModality.code === 'AT'">
                  <label>Activity</label>
                  <div class="d-flex align-items-center justify-content-start flex-nowrap mb-4">
                    <label class="mx-3">Min Steps</label>
                    <div class="form-group mb-0 flex-grow-1">
                      <input type="number" min="0" oninput="validity.valid||(value='');" [(ngModel)]="modalityConfDto.alerts.threshold.activity.minSteps"
                        (blur)="CheckMinMaxvalue()" name="" class="form-control form-control-sm">
                    </div>
                    <label class="mx-3">Max Steps</label>
                    <div class="form-group mb-0 flex-grow-1">
                      <input type="number" min="0" oninput="validity.valid||(value='');" [(ngModel)]="modalityConfDto.alerts.threshold.activity.maxSteps"
                        (blur)="CheckMinMaxvalue()" name="" class="form-control form-control-sm">
                    </div>
                  </div>
                </div>

                <div class="p-3 border">
                  <label>Notify</label>
                  <div class="d-flex align-items-center justify-content-start flex-nowrap">
                    <label class="mx-3">Time Lapse</label>
                    <div class="form-group mb-0">
                      <input type="number" [(ngModel)]="modalityConfDto.alerts.notify.timeLapse" name="" OnlyNumbers
                        class="form-control form-control-sm">
                    </div>
                    <div class="ml-3">
                      <label class="mx-3">Time Unit</label>
                      <div class="custom-control custom-radio custom-control-inline">
                        <input type="radio" [(ngModel)]="modalityConfDto.alerts.notify.timeUnit" [value]="'hours'"
                          class="custom-control-input" id="hours" name="inlineDefaultRadiosExample" mdbInput>
                        <label class="custom-control-label" for="hours">Hours</label>
                      </div>
                      <div class="custom-control custom-radio custom-control-inline">
                        <input type="radio" [(ngModel)]="modalityConfDto.alerts.notify.timeUnit" [value]="'days'"
                          class="custom-control-input" id="days" name="inlineDefaultRadiosExample" mdbInput>
                        <label class="custom-control-label" for="days">Days</label>
                      </div>
                    </div>
                  </div>
                </div>


              </div>
            </div>
          </div>


        </mdb-tab>
        <mdb-tab heading="Authorization"
          [disabled]="!modalityConfDto.alerts.notify.timeUnit || !modalityConfDto.alerts.notify.timeLapse || !IsDeviceConfigured">
          <div class="bg-white p-3">
            <p>

              Patient's authorization is required to get his/her device data from vendor's system,
              please click on Connect button and ask Patient to enter his/her credentials,
              this will enable 2C Health Solution to get patient's device information on regular interval of time.
              <br/>
              <br/>
              In case

            </p>
            <ul>
              <li>Patient don't have credentials</li>
              <li>Do not want to share credentials with 2C Health</li>
              <li>Do not have account on Vendor's system</li>
            </ul>
            <p>please proceed with click on Manual Feed</p>
            <!-- <a href="{{deviceConsentUrl}}" target="_blank">{{deviceConsentUrl}}</a> -->
            <!-- <a class="link" (click)="">{{deviceConsentUrl}}</a> -->
            <div class="d-flex justify-content-center">
              <button class="btn btn-dynamic-2c btn-sm center-block" [disabled]="isAuthorized" (click)="onNavigate()"
                title="Connect">Connect </button>
              <button class="btn btn-dynamic-2c btn-sm center-block"
                (click)="isAuthorized=true;mdbModalityTabs.setActiveTab(6)" title="Manual Feed">Manual Feed </button>
            </div>
          </div>

          <div appCcmLoader>
            <div class="loader-wrap" *ngIf="isAuthorizing">
              <div class="text-dynamic-2c la-ball-pulse ccm-loader">
                <div></div>
                <div></div>
                <div></div>
              </div>
            </div>
          </div>

          <div class="alert alert-success mt-4" role="alert" *ngIf="isAuthorized">
            Device Configuration Completed Successfully ! <button class="btn btn-dynamic-2c btn-sm center-block"
              (click)="mdbModalityTabs.setActiveTab(6)" title="Next">Next </button>
          </div>
        </mdb-tab>
        <mdb-tab heading="Finalizing Setup" [disabled]="(!isAuthorized && !UnknownDevice) || !IsDeviceConfigured">
          <div class="ccm-header">
            <div class="ccm-nav">
              <div class="row">
                <div class="col-sm-12 p-0">
                  <mdb-tabset #FStepTabs [buttonClass]="'ccm-navbar'" [contentClass]="'ccm-body p-0'">

                    <mdb-tab heading="CCM Device">
                      <div class="row">
                        <div class="col-12">
                          <div class="bg-white">
                            <div class="d-flex justify-content-end">
                              <button class="btn btn-dynamic-2c btn-sm" (click)="DownloadDeviceData()">Get Test
                                Data</button>
                              <button class="btn btn-dynamic-secondary-2c btn-sm" >Finish</button>
                            </div>
                            <div *ngIf="PatientTestData">
                              <ngx-datatable class="material z-depth-0" [columnMode]="'force'" [headerHeight]="50"
                                [footerHeight]="50" [rowHeight]="30" [scrollbarV]="false" [scrollbarH]="false"
                                [rows]="PatientTestData" [limit]="10">
                                <ngx-datatable-column name="Device Vendor">
                                </ngx-datatable-column>
                                <ngx-datatable-column name="Measurement Date">
                                </ngx-datatable-column>
                                <ngx-datatable-column name="Low Pressure" prop="lowPressure">
                                </ngx-datatable-column>
                                <ngx-datatable-column name="High Pressure" prop="highPressure">
                                </ngx-datatable-column>
                                <ngx-datatable-column name="Bpl" prop="bpl">
                                </ngx-datatable-column>
                                <ngx-datatable-column name="Last Change Time" prop="lastChangeTime">
                                </ngx-datatable-column>
                                <ngx-datatable-column name="BP Unit" prop="bpUnit">
                                </ngx-datatable-column>
                                <ngx-datatable-column name="Time Zone" prop="timeZone">
                                </ngx-datatable-column>

                              </ngx-datatable>
                            </div>
                          </div>
                        </div>
                      </div>
                    </mdb-tab>
                    <!--Panel 2-->
                    <mdb-tab heading="Manual Device">

                      <div class="col-sm-12">


                        <div class="d-flex justify-content-end mb-1">
                          <button class="btn btn-dynamic-2c btn-sm" (click)="getUnRecordImage()">Refresh </button>
                          <button class="btn btn-dynamic-secondary-2c btn-sm" (click)="navigateBack()">Finish</button>

                        </div>


                        <div appCcmLoader>
                          <div class="loader-wrap" *ngIf="loadingTestImages">
                            <div class="text-dynamic-2c la-ball-pulse ccm-loader">
                              <div></div>
                              <div></div>
                              <div></div>
                            </div>
                          </div>
                        </div>
                        <div *ngIf="unRecordImgDto.length === 0">
                          <div class="d-flex justify-content-center">
                            <p><span class="text-warning">No Record Found</span></p>

                          </div>
                        </div>
                        <div class="row" *ngIf="unRecordImgDto">

                          <div class="col-md-3 mb-1" *ngFor="let item of unRecordImgDto">
                            <a><img class="img-fluid z-depth-0 rounded" src="{{item.publicImageUrl}}"></a>
                          </div>

                        </div>

                      </div>



                    </mdb-tab>
                  </mdb-tabset>
                </div>
              </div>

            </div>
          </div>



        </mdb-tab>
      </mdb-tabset>
    </div>
  </div>

</ng-template>
