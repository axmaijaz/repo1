<div class="d-flex align-item-center justify-content-start">
  <!-- <h4 class="mr-3 mb-0"><a class="text-dark" (click)="navigateBack()"><i class="fa fa-arrow-left"></i></a></h4> -->
  <h4 class="mr-3 mb-0"><a class="text-dark" [routerLink]="['/admin/patient/' + PatientId + '/summary']"><i class="fa fa-arrow-left"></i></a></h4>
  <h1 class="page-title">Principal Care Encounter</h1>
</div>

<app-patient-details></app-patient-details>

<div class="ccm-care-plan-body">
  <div class="ccm-body z-depth-0">
    <div class="encounter-section">
       <div class="encounter-body px-3">

        <div class="row">

          <div class="col-lg-12 p-0  ">
            <div class="row justify-content-between m-0 d-block d-sm-none">
              <diV class="col-sm-6 mt-2" >
                <a appDebounceClick (debounceClick)="encounterHistoryTable.toggle()" class="btn btn-dynamic-2c btn-block btn-sm px-3 m-0 mr-2">Encounter History <i [class.fa-angle-down]="encounterHistoryTable.isCollapsed" [class.fa-angle-up]="!encounterHistoryTable.isCollapsed"  class="fa ml-2"></i></a>
                <a appDebounceClick (debounceClick)="attachmentTable.toggle()" class="btn btn-dynamic-2c btn-block btn-sm px-3 m-0 mr-2"><i class="fa fa-paperclip"></i> Attachments <i [class.fa-angle-down]="attachmentTable.isCollapsed" [class.fa-angle-up]="!attachmentTable.isCollapsed"  class="fa fa-lg ml-2"></i></a>
              </diV>
              <diV class="col-sm-6" >
                <div class="row ">
                  <diV class="col-sm-6 col-6 mt-2 pr-1" >
                    <a appDebounceClick (debounceClick)="diagnose.toggle()" class="btn btn-block btn-dynamic-2c btn-sm px-3 m-0 mr-2">Diagnoses  <i [class.fa-angle-down]="diagnose.isCollapsed" [class.fa-angle-up]="!diagnose.isCollapsed"  class="fa ml-2"></i></a>
                  </diV>
                  <diV class="col-sm-6 col-6 mt-2 pl-1" >
                    <a  appDebounceClick (debounceClick)="medication.toggle()" class="btn btn-block btn-dynamic-secondary-2c btn-sm px-3 m-0">Medications <i [class.fa-angle-down]="medication.isCollapsed" [class.fa-angle-up]="!medication.isCollapsed"  class="fa ml-2"></i></a>
                  </diV>
                </div>
              </diV>
            </div>
            <div class="px-3 d-none d-sm-block" >
              <div class="d-flex justify-content-between py-2 border-bottom ">
                <div class="btn-group">
                  <a appDebounceClick (debounceClick)="encounterHistoryTable.toggle()" class="btn btn-dynamic-2c btn-sm px-3 m-0 mr-2">Encounter History <i [class.fa-angle-down]="encounterHistoryTable.isCollapsed" [class.fa-angle-up]="!encounterHistoryTable.isCollapsed"  class="fa ml-2"></i></a>
                  <a appDebounceClick (debounceClick)="attachmentTable.toggle()" class="btn btn-dynamic-2c btn-sm px-3 m-0 mr-2"><i class="fa fa-paperclip"></i> Attachments <i [class.fa-angle-down]="attachmentTable.isCollapsed" [class.fa-angle-up]="!attachmentTable.isCollapsed"  class="fa fa-lg ml-2"></i></a>
                </div>
                <div class="btn-group ml-auto mr-0">
                  <a appDebounceClick (debounceClick)="diagnose.toggle()" class="btn btn-dynamic-2c btn-sm">Diagnoses  <i [class.fa-angle-down]="diagnose.isCollapsed" [class.fa-angle-up]="!diagnose.isCollapsed"  class="fa ml-2"></i></a>
                  <a  appDebounceClick (debounceClick)="medication.toggle()" class="btn btn-dynamic-secondary-2c btn-sm  m-0">Medications <i [class.fa-angle-down]="medication.isCollapsed" [class.fa-angle-up]="!medication.isCollapsed"  class="fa ml-2"></i></a>
                </div>
              </div>
            </div>
            <div mdbCollapse [isCollapsed]="true" #encounterHistoryTable="bs-collapse">
              <div *ngIf="IsEncounterLoading" class="d-flex justify-content-center text-center">
                <mdb-progress-bar class="progress primary-color-dark mb-0" mode="indeterminate"></mdb-progress-bar>
              </div>
             <div class="table-responsive">
              <table class="table table-striped btn-table table-nowrap">
                <thead class="bg-dynamic-2c text-white">
                  <tr>
                    <th>Date</th>
                    <th>Time</th>
                    <th>Duration</th>
                    <th>Endo Specialist</th>
                    <th>Endo CC</th>
                    <th>Endo CF</th>
                    <!-- <th>Psychiatrist</th> -->
                    <th>Note</th>
                    <th style="width: 210px;">Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let item of PRCMEncountersList">
                    <td>{{item.encounterDate |dateFormatPipe }}</td>
                    <td>Start: {{item.startTime}}, End: {{item.endTime}}</td>
                    <td>{{item.duration}}</td>
                    <td>{{item.end_PrCMSpecialistBillerName}}
                      <!-- <div class="user-name-list" *ngIf="item.end_prcm">
                        <div title="{{item.careFacilitatorName}}" class="name-caption">
                          <span>{{item.end_prcm}}</span></div>
                      </div> -->
                    </td>
                    <td>
                      {{item.prCMCareCoordinatorName}}
                      <!-- <div class="user-name-list" *ngIf="item.careFacilitatorNameAbbreviation">
                        <div title="{{item.careFacilitatorName}}" class="name-caption">
                          <span>{{item.careFacilitatorNameAbbreviation}}</span></div>
                      </div> -->
                    </td>
                    <td>{{item.end_PrCMCareFacilitatorName}}
                      <!-- <div class="user-name-list" *ngIf="item.careFacilitatorNameAbbreviation">
                        <div title="{{item.careFacilitatorName}}" class="name-caption">
                          <span>{{item.careFacilitatorNameAbbreviation}}</span></div>
                      </div> -->
                    </td>
                    <td>{{item.note}}</td>
                    <td style="width: 250px;">
                    <div class="d-flex justify-content-end" style="width: 170px;">
                      <button class="btn btn-sm btn-dynamic-2c my-0" (click)="viewEncunterDetail(item,encounterHistory)">View Detail</button>
                      <button class="btn btn-icon btn-dynamic-secondary-2c my-0" (click)="OpenEditPRCMEncounter(item, editPRCMEncounterModal)"><i class="fa fa-pencil"></i></button>
                    </div>
                  </td>
                  </tr>
                </tbody>
              </table>
             </div>

            </div>
            <div mdbCollapse [isCollapsed]="true" #diagnose="bs-collapse">
              <fieldset>
                <app-diagnose [PRCMPatientId]="PatientId"></app-diagnose>
              </fieldset>

            </div>
            <div mdbCollapse [isCollapsed]="true" #medication="bs-collapse">
              <fieldset>
                <app-medication [PRCMPatientId]="PatientId"></app-medication>
              </fieldset>
            </div>
            <div mdbCollapse [isCollapsed]="true" #attachmentTable="bs-collapse">
            <div class="mt-3">
              <div class="col-sm-12">
                <div class="d-flex justify-content-between align-items-center mb-2">
                  <p class="mb-0"><strong>Attachments</strong></p>
                  <button class="btn btn-dynamic-2c btn-sm m-0" (click)="addAttachment.show()">Add New</button>
                </div>
              </div>
              <div class="col-sm-12 px-0">
                <div *ngIf="gettingDocs || IsdeletingDoc" class="d-flex justify-content-center text-center ">
                  <mdb-progress-bar class="progress primary-color-dark mb-0" mode="indeterminate"></mdb-progress-bar>
                </div>
                <div class="table-responsive">
                  <table class="table table-striped btn-table">
                    <thead class="bg-dynamic-2c text-white">
                      <tr>
                        <th>#</th>
                        <th>Title</th>
                        <th>Date</th>
                        <th>Note</th>
                        <!-- <th>Comment</th> -->
                        <th>Action</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let item of documentsList; let i = index">
                        <td>{{i+1}}</td>
                        <td>{{item.title}}</td>
                        <td>{{item.dateCreated | date}}</td>
                        <td>{{item.note}}</td>
                        <!-- <td>Lorem Ipsum doen dheoc</td> -->
                        <td>
                          <div class="d-flex">
                            <button (click)="getPublicUrl(item.path)" class="btn btn-icon btn-dynamic-2c my-0"><i
                                class="fa fa-eye"></i></button>
                            <button class="btn btn-icon btn-danger ml-0 my-0" (click)="DeletePRCMDocument(item.id)"><i class="fa fa-trash"></i></button>
                          </div>
                        </td>
                      </tr>

                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
          </div>


          <div class="enc-time col-xl-6 col-lg-12 col-md-12 col-sm-12 py-3">

            <!-- <ng-select [searchable]="false" [(ngModel)]="currentMonth" class="ng-select-small mb-2" placeholder="Select Previous Encounter"
            (click)="$event.stopPropagation();" (change)="getPRCMEncountersByPatientId()">
            <ng-option [value]="1">January</ng-option>
          </ng-select>

            <p class="mb-3"> <strong class="text-dynamic-2c ">Encounter Time</strong></p> -->
            <!-- <div class="d-flex justify-content-between align-items-center">

                <strong class="text-dynamic-2c mb-3 d-block">Encounter Time</strong>
                <a mdbDropdownToggle class="btn btn-dynamic-2c btn-icon" (click)="AddNew();resetFields()" placement="left"><i
                    class="fa fa-plus"></i></a>
              </div> -->
          <ng-container *ngTemplateOutlet="PRCMAddEditEncounterTemplate"></ng-container>
          </div>
          <div class="col-xl-6 col-lg-12 col-md-12 col-sm-12 py-3">
            <div class="d-flex justify-content-between align-items-center mb-2">
              <p class="mb-0"> <strong class="text-dynamic-2c ">Care Plan</strong></p>
                <div class="btn-group">
                  <button class="btn btn-icon btn-dynamic-secondary-2c" (click)="DownLoadPDF()"><i class="fa fa-download"></i></button>
                  <button class="btn btn-icon btn-dynamic-secondary-2c border-left" (click)="copyCarePlan()"><i class="fa fa-copy"></i></button>
                </div>
            </div>
            <div *ngIf="loadingEditor" class="d-flex justify-content-center text-center">
              <mdb-progress-bar class="progress primary-color-dark mb-0" mode="indeterminate"></mdb-progress-bar>
            </div>
            <editor (onPaste)="OnPasteInTextEditor($event)" (onPostRender)="loadingEditor=false" [(ngModel)]="PRCMCarePlan" #editor12 appOnDebounce [debounceTime]="2000" (onDebounce)="EditPRCMCarePLan()"
            apiKey="d8t35ignh0gnngobzvmdpf3pnxi74f0gcqhmr0xgu5xt0qr5"
            [init]="{
              height: 470,
              menubar: false,
              plugins: [
                'advlist autolink lists link image charmap print preview anchor',
                'searchreplace visualblocks code fullscreen',
                'insertdatetime media table paste code help wordcount'
              ],
              contextmenu: '',
              toolbar:
                'undo redo | formatselect | bold italic backcolor | \
                alignleft aligncenter alignright alignjustify | \
                bullist numlist outdent indent | removeformat | help '
            }"></editor>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<ng-template #PRCMAddEditEncounterTemplate>
  <div class="row">

    <div class="col-sm-6">
      <div class="input-group form-group">
        <label class="w-100">Date <sup class="text-danger">*</sup> </label>
        <input type="text" class="form-control form-control-sm" #dateDPicker="dpDayPicker"
          [dpDayPicker]="datePickerConfig" [ngModel]="addPRCMEncounterDto.encounterDate | dateFormatPipe"
          (ngModelChange)="addPRCMEncounterDto.encounterDate=$event" [theme]="'dp-material ccm-date-picker'"
          [mode]="'day'" />
        <a (click)="dateDPicker.api.open();" class="input-group-append">
          <span class="input-group-text text-white bg-dynamic-2c"><i class="fa fa-calendar fa-lg"></i></span>
        </a>
      </div>
    </div>
    <div class="col-lg-3 col-md-6 col-sm-6">
      <div class="form-group">
        <label class="w-100">Start Time <sup class="text-danger">*</sup> </label>
        <input type="text" class="form-control form-control-sm" #dateDpTime="dpDayPicker"
          [dpDayPicker]="timePickerConfig" [(ngModel)]="addPRCMEncounterDto.startTime"
          [theme]="'dp-material ccm-date-picker'" [mode]="'time'" />
      </div>
    </div>
    <div class="col-lg-3 col-md-6 col-sm-6">
      <div class="form-group">
        <label class="w-100">End Time <sup class="text-danger">*</sup> </label>
        <input type="text" readonly class="form-control form-control-sm"
          [(ngModel)]="addPRCMEncounterDto.endTime">
      </div>
    </div>
    <div class="col-sm-6">
      <div class="form-group">
        <label class="w-100">Duration: <small class="text-info">Enter in Minutes</small></label>
        <input #durationInput [(ngModel)]="durationNO" OnlyNumbers type="number" [readOnly]="!addPRCMEncounterDto.startTime"
          class="form-control form-control-sm"
          (input)="stopCounterOnDuration = false;durationChanged($event.target.value)">

      </div>
    </div>

    <div class="col-sm-6">
      <div class="form-group" >
        <label>Endo Coordinator <sup class="text-danger">*</sup> </label>
        <ng-select [searchable]="true" [loading]=loadingPRCMUsers class="ng-select-small"
          [(ngModel)]="addPRCMEncounterDto.prCMCareCoordinatorId" placeholder="Select coordinator"
          (click)="$event.stopPropagation();">
          <ng-option [value]="item.id" *ngFor="let item of prcmCoordinatorsList">{{item.lastName}},{{item.firstName}}</ng-option>
        </ng-select>
      </div>

    </div>
    <div class="col-sm-6">
      <div class="form-group" >
        <label>Endo Specialist <sup class="text-danger">*</sup> </label>
        <ng-select [searchable]="true" [loading]=loadingPsy class="ng-select-small"
          [(ngModel)]="addPRCMEncounterDto.end_PrCMSpecialistBillerId" placeholder="Select Specialist"
          (click)="$event.stopPropagation();">
          <ng-option [value]="item.id" *ngFor="let item of prcmSpecialistsList">{{item.lastName}},{{item.firstName}}</ng-option>
        </ng-select>
      </div>

      <!-- <div class="form-group" *ngIf="PRCMStatus == 4">
        <label class="w-100">Psychiatrist </label>
        <input class="form-control form-control-sm" [(ngModel)]="addPRCMEncounterDto.gPRCMPsychiatrist" type="text">

      </div> -->
    </div>
    <div class="col-sm-6">
      <div class="form-group" >
        <label>Endo Facilitator <sup class="text-danger">*</sup> </label>
        <ng-select [searchable]="true" [loading]=loadingPsy class="ng-select-small"
          [(ngModel)]="addPRCMEncounterDto.end_PrCMCareFacilitatorId" placeholder="Select clinical Facilitator"
          (click)="$event.stopPropagation();">
          <ng-option [value]="item.id" *ngFor="let item of prCMCareFacilitatorsList">{{item.lastName}},{{item.firstName}}</ng-option>
        </ng-select>
      </div>
    </div>
    <div class="col-sm-6">
      <div class="form-group">
        <label>Service Name <sup class="text-danger">*</sup> </label>
        <ng-select [searchable]="true" class="ng-select-small"
          [(ngModel)]="addPRCMEncounterDto.prCMServiceTypeId" placeholder="Select Service Type"
          (click)="$event.stopPropagation();">
          <ng-option [value]="0">Initial Assessment </ng-option>
          <ng-option [value]="1">PCM Assessment </ng-option>
          <ng-option [value]="2">Help </ng-option>
          <ng-option [value]="3">Appointment </ng-option>
          <ng-option [value]="4">Medication Refill </ng-option>
          <ng-option [value]="5">Education </ng-option>
          <ng-option [value]="6">Community Resources </ng-option>
          <ng-option [value]="7">Urgent Visit/ED </ng-option>
          <ng-option [value]="8">Symptom Exacerbation </ng-option>

          <!-- <ng-option [value]="item.id" *ngFor="let item of serviceTypes">{{item.name}}</ng-option> -->
        </ng-select>
      </div>
    </div>
    <div class="col-sm-12">
      <div class="form-form form-group">
        <label for="form12">Notes <sup class="text-danger">*</sup> </label>
        <app-two-c-text-area #myFIeldRefPCM [value]="addPRCMEncounterDto.note" [height]="'200px'" [PatientId]="patientId" (valueChanged)="addPRCMEncounterDto.note=$event"></app-two-c-text-area>
        <!-- <textarea type="text" style="min-height: 200px;" class="form-control form-control-sm" id="form12"
          rows="6" [(ngModel)]="addPRCMEncounterDto.note"></textarea> -->
        <!-- <div class="invalid invalid-text">
            <small *ngIf="encounterTimeForm.get('note').invalid && encounterTimeForm.get('note').touched"
              class="text-danger">Please write some note.</small>
          </div> -->
      </div>
    </div>

    <div class="col-sm-12 mt-2">
      <sup class="text-danger">*</sup>
      <div class="form-check pl-0 form-check-inline">
        <input [(ngModel)]="addPRCMEncounterDto.cptCode" name="TakeMedications"
          [value]="'G2064'" type="radio" class="form-check-input" mdbInput id="TakeMedications1">
        <label class="form-check-label" for="TakeMedications1">G2064</label>
      </div>
      <div class="form-check pl-0 form-check-inline">
        <input [(ngModel)]="addPRCMEncounterDto.cptCode" name="TakeMedications"
          [value]="'G2065'" type="radio" class="form-check-input" mdbInput id="TakeMedications2">
        <label class="form-check-label" for="TakeMedications2">G2065</label>
      </div>
      <!-- <div class="form-check pl-0 form-check-inline">
        <input [(ngModel)]="addPRCMEncounterDto.cptCode" name="TakeMedications"
          [value]="'99484'" type="radio" class="form-check-input" mdbInput id="TakeMedications3">
        <label class="form-check-label" for="TakeMedications3">G PRCM (CPT 99484)</label>
      </div> -->
      <!-- <a id="tobaccoCessation" class="ml-3" container="body" [mdbPopover]="tobaccoCessation" placement="bottom"
      triggers="focus"><i class="fa fa-exclamation-circle text-success fa-lg"></i></a>
      <ng-template #tobaccoCessation>
        <div class="bg-dark text-white py-3 pl-3 pr-2">
          <div class="who-covered" (click)="$event.stopPropagation()" [innerHTML]="PRCMINfoHtml"
            malihu-scrollbar [scrollbarOptions]="scrollbarOptionsTimeline" style="max-height: 300px;"></div>
        </div>
      </ng-template> -->
    </div>
    <div class="w-100 px-3 d-flex justify-content-end" >
      <button *ngIf="addPRCMEncounterDto.id === 0" [disabled]="IsaddingEncounterLoading || !addPRCMEncounterDto.cptCode || !addPRCMEncounterDto.note || !addPRCMEncounterDto.startTime || !addPRCMEncounterDto.endTime
           || !addPRCMEncounterDto.prCMCareCoordinatorId || !addPRCMEncounterDto.end_PrCMSpecialistBillerId || !addPRCMEncounterDto.end_PrCMCareFacilitatorId" type="submit" (click)="addPRCMEncounter()" mdbBtn
        class="btn btn-dynamic-2c btn-sm m-o">
        <span *ngIf="IsaddingEncounterLoading" class="spinner-border spinner-border-sm" role="status"
          aria-hidden="true"></span>
        Add Encounter</button>
    </div>
  </div>
</ng-template>


<!-- <div class="row">
  <div class="col-lg-12">
    <div class="ccm-header" id="ccm-header">
      <div class="d-flex justify-content-between align-items-center flex-wrap flex-sm-wrap ccm-nav"
        style="min-width: 100%;">
        <ul class="ccm-navbar">
          <li routerLinkActive="active"><a title="Generalized Anxiety Disorder Scale" routerLink="{{'tools/gad7'}}" preserveQueryParams="true">GAD-7</a></li>
          <li routerLinkActive="active"><a title="Drug Abuse Screening Test" [routerLink]="['tools/dast20']" preserveQueryParams="true">DAST 20</a></li>
          <li routerLinkActive="active"><a title="Work and Social Adjustment Scale" [routerLink]="['tools/wsas']" preserveQueryParams="true">WSAS</a></li>
          <li routerLinkActive="active"><a [routerLink]="['tools/phq9']" preserveQueryParams="true">PHQ 9</a></li>
        </ul>
        <div>
        </div>
      </div>

    </div>
  </div>
</div> -->
<router-outlet></router-outlet>

<div mdbModal #diagnoseMedicationModal="mdbModal" class="modal fade rounded-0" style="margin-top: 60px;"
  [config]="{ backdrop: false, ignoreBackdropClick: false }" tabindex="-1" role="dialog"
  aria-labelledby="mytaskModallLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-full-height modal-fluid" role="document">
    <div class="modal-content  rounded-0">
      <div class="modal-body" *ngIf="diagnoseMedicationModal.isShown">
        <div class="d-flex justify-content-between">
          <div class="mb-3">
            <!-- <mdb-checkbox [default]="true" [(ngModel)]="showAll" (change)="getPatientTasksList()">Show All</mdb-checkbox> -->
          </div>
          <button type="button" class="close pull-right" aria-label="Close" (click)="diagnoseMedicationModal.hide()">
            <span aria-hidden="true"><i class="fa fa-angle-up" style="font-size: 1.3rem;"></i></span>
          </button>
        </div>
        <!-- <div *ngIf="taskIsLoading" class="d-flex justify-content-center text-center loadingrow">
          <mdb-progress-bar class="progress primary-color-dark mb-0" mode="indeterminate"></mdb-progress-bar>
        </div> -->
        <ng-container>
          <div [ngSwitch]="switchModalComponent">
            <fieldset>
              <div *ngSwitchCase="1">
                <app-diagnose></app-diagnose>
              </div>
              <div *ngSwitchCase="2">
                <app-medication></app-medication>
              </div>
            </fieldset>
          </div>
        </ng-container>
      </div>
      <!-- <div class="modal-footer rounded-0">
        <button type="button" mdbBtn color="secndary" class="waves-light" aria-label="Close" (click)="taskModal.hide()"
          mdbWavesEffect>Close</button>
        <button type="button" mdbBtn color="priary" class="relative waves-light" mdbWavesEffect>Save changes</button>
      </div> -->
    </div>
  </div>
</div>



<div mdbModal #addAttachment="mdbModal" (open)="file={};PRCMUploadDocObj={};fillDate()" class="modal fade" tabindex="-1"
  role="dialog" aria-labelledby="myBasicModalLabel" aria-hidden="true" mdbTableScroll>
  <div class="modal-dialog modal-dialog-scrollable" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close pull-right" aria-label="Close" (click)="addAttachment.hide()">
          <span aria-hidden="true">×</span>
        </button>
        <h4 class="modal-title w-100">Principal Care Attachment</h4>
      </div>
      <div class="modal-body">
        <div class="border p-3 mb-3">
          <!-- <p class="mb-3"><label> Reference Link: </label> <a>Demo Link</a></p> -->
          <div class="input-group form-group">
            <label style="width: 70px;" class="flex-shrink-0">Date</label>
            <input type="text" [(ngModel)]="PRCMUploadDocObj.dateCreated" class="form-control form-control-sm ml-3" #date="dpDayPicker"
              [dpDayPicker]="datePickerConfig" [theme]="'dp-material ccm-date-picker'" [mode]="'day'" />
            <a (click)="date.api.open();" class="input-group-append">
              <span class="input-group-text text-white bg-dynamic-2c" id="category1"><i
                  class="fa fa-calendar fa-lg"></i></span> </a>
          </div>
          <div class="d-flex">
            <label style="width: 70px;" class="flex-shrink-0" for="result">Name</label>
            <div class="form-group flex-1 ml-3">
              <input type="text" [(ngModel)]="PRCMUploadDocObj.title" class="form-control" id="result"
                placeholder="Name">
            </div>
          </div>
          <div class="form-form form-group d-flex mb-0">
            <label style="width: 70px;" class="flex-shrink-0" for="note">Comment</label>
            <textarea type="text" [(ngModel)]="PRCMUploadDocObj.note" id="note" style="height:100px" rows="6"
              class="form-control ml-3"></textarea>
          </div>
        </div>

        <div class="d-flex align-items-start">
          <label for="file" class="flex-shrink-0" style="width: 70px;">Attachment</label>
          <div class="file-field flex-wrap align-items-center w-100 ml-3">
            <div class="btn btn-success btn-sm mx-0 mt-0">

              <span class="w-100"><i class="fa fa-paperclip fa-lg"></i> Attach File
                <!-- <span  *ngIf="uploadImg" class="mr-1 spinner-border spinner-border-sm" role="status"
                  aria-hidden="true"></span> -->

              </span>
              <input type="file" mdbFileSelect accept=".pdf, .xlsx,.docx, .doc, .odt , .txt, .ppt, .pptx"
                (change)="onUploadOutput($event);" #select>
            </div>
            <span class="text-info" *ngIf="file">{{file.name}}</span>
          </div>
        </div>

      </div>
      <div class="modal-footer">
        <button type="button" [disabled]="!PRCMUploadDocObj.title || !file || !file.name || uploadingDoc" 
          (click)="AddPRCMDocument()" class="btn btn-sm btn-dynamic-2c" mdbWavesEffect>
          <span *ngIf="uploadingDoc" class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
          Submit</button>
        <button type="button" (click)="addAttachment.hide()" class="btn btn-sm btn-dynamic-secondary-2c" aria-label="Close"
          mdbWavesEffect>Cancel</button>

      </div>
    </div>
  </div>
</div>


<div mdbModal #encounterHistory="mdbModal" class="modal fade" tabindex="-1" role="dialog"
  aria-labelledby="myencounterHistoryLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-scrollable" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close pull-right" aria-label="Close" (click)="encounterHistory.hide()">
          <span aria-hidden="true">×</span>
        </button>
        <h4 class="modal-title w-100" id="myModalLabel">Encounter History</h4>
      </div>
      <div class="modal-body">

          <div class="task-patient-info mb-1">
            <div class="row">
              <div class="col-sm-6">
                <p><strong>Endo Specialist: </strong>{{viewEncounterObj.end_PrCMSpecialistBillerName}}</p>
                <p><strong>Endo CC: </strong>
                  <span >
                    {{viewEncounterObj.prCMCareCoordinatorName}}
                  </span>
                  <!-- <span *ngIf="PRCMStatus === 4">
                    {{viewEncounterObj.gPRCMPsychiatrist}}
                  </span> -->
                </p>
                <p><strong>Endo CF: </strong>
                  <span >
                    {{viewEncounterObj.end_PrCMCareFacilitatorName}}
                  </span>
                </p>
                <p><strong>      Date: </strong>{{viewEncounterObj.encounterDate|dateFormatPipe}}</p>
                <!-- <p><strong>Care Facilitator: </strong>{{patientData.careFacilitatorName}}</p> -->
              </div>

              <div class="col-sm-6">
                <p><strong>Start Time: </strong>{{viewEncounterObj.startTime}}</p>
                <p><strong>  End Time: </strong>{{viewEncounterObj.endTime}}</p>
                <p><strong>  Duration: </strong>{{viewEncounterObj.duration}}</p>

              </div>
            </div>
          </div>
          <div class="col-sm-12">
            <div class="form-form form-group">
              <label for="form12">Care Plan Note: </label>
              <textarea type="text" style="min-height: 200px;" class="form-control form-control-sm" id="form12" disabled
                rows="3" [(ngModel)]="viewEncounterObj.note"></textarea>
              <!-- <div class="invalid invalid-text">
                  <small *ngIf="encounterTimeForm.get('note').invalid && encounterTimeForm.get('note').touched"
                    class="text-danger">Please write some note.</small>
                </div> -->
            </div>
          </div>

            <!-- <div class="task-patient-info mb-1">
              <p><strong>Care Plan Note:</strong>{{viewEncounterObj.note}}</p>
              <div>

              </div>
            </div> -->


      </div>

      <div class="modal-footer">
        <button type="button" class="waves-light btn btn-sm btn-dynamic-secondary-2c" aria-label="Close"
          (click)="encounterHistory.hide()" mdbWavesEffect>Close</button>
      </div>
    </div>
  </div>
</div>
<div mdbModal #editPRCMEncounterModal="mdbModal" (close)="OnCloseEditEncounter()" class="modal fade" tabindex="-1" role="dialog"
  aria-labelledby="myeditPRCMEncounterModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-scrollable" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close pull-right" aria-label="Close" (click)="editPRCMEncounterModal.hide()">
          <span aria-hidden="true">×</span>
        </button>
        <h4 class="modal-title w-100" id="myModalLabel">Edit Principal Care Encounter</h4>
      </div>
      <div class="modal-body" *ngIf="editPRCMEncounterModal.isShown">
        <ng-container *ngTemplateOutlet="PRCMAddEditEncounterTemplate"></ng-container>
      </div>

      <div class="modal-footer">
        <button *ngIf="addPRCMEncounterDto.id > 0" [disabled]="IsaddingEncounterLoading || !addPRCMEncounterDto.cptCode || !addPRCMEncounterDto.note || !addPRCMEncounterDto.startTime || !addPRCMEncounterDto.endTime
          || !addPRCMEncounterDto.prCMCareCoordinatorId || !addPRCMEncounterDto.end_PrCMSpecialistBillerId || !addPRCMEncounterDto.end_PrCMCareFacilitatorId" (click)="editPRCMEncounter(editPRCMEncounterModal)" type="button" mdbBtn class="btn btn-dynamic-2c btn-sm m-o">
          <span *ngIf="isEditingPRCMEncounter"  class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
          Edit Encounter</button>
        <button type="button" class="waves-light btn btn-sm btn-dynamic-secondary-2c" aria-label="Close"
          (click)="editPRCMEncounterModal.hide()" mdbWavesEffect>Close</button>
      </div>
    </div>
  </div>
</div>
<div mdbModal #viewPdfModal="mdbModal" class="modal fade" tabindex="-1" role="dialog"
  aria-labelledby="myBasicModalLabel" [config]="{backdrop: true, ignoreBackdropClick: true}" aria-hidden="true"
  (close)="objectURLStrAW=''">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-body" style="height:calc(100vh - 50px); padding: 0px;">
        <button type="button" class="close pull-right document-close" aria-label="Close" (click)="viewPdfModal.hide()">
          <span aria-hidden="true">×</span>
        </button>
        <app-pdf-view *ngIf="objectURLStrAW" [documentUrl]="objectURLStrAW"></app-pdf-view>
      </div>
    </div>
  </div>
</div>
