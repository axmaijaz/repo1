<div class="d-flex justify-content-between">
  <h1 class="page-title flex-sm-grow-1">Mobile App - Health Guidelines</h1>
</div>
<div class="d-flex form-group">
  <div class="flex-grow-1">
    <label for="searchBy">Search Guidelines</label>
    <div class="d-flex align-items-center justify-content-start">
      <input type="text"
        class="form-control form-control-sm box-shadow w-100" id="searchBy" placeholder="Search by Name" (keyup)="updateFilter($event)" />
    </div>
  </div>
  <div class="d-flex align-items-end">
    <button type="button"
      class="btn btn-dynamic-2c btn-sm my-0 flex-shrink-0 mr-0" (click)="addEditHealthGuideModal.show()">
        New Guidelines
    </button>
  </div>
</div>
<div class="table-responsive">
  <div *ngIf="isLoadingHealthGuides" class="d-flex justify-content-center text-center">
    <mdb-progress-bar class="progress primary-color-dark mb-0" mode="indeterminate"></mdb-progress-bar>
  </div>
  <table class="table health-guide-table">
    <thead>
      <tr>
        <th width="30">S.No.</th>
        <th width="35%">TITLE</th>
        <th>URL</th>
        <th  width="150">Action</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of healthGuideLinesList; let i = index">
        <td>{{ i + 1 }}</td>
        <td>{{item.title}}</td>
        <td>{{item.url}}</td>
        <td>
          <button title="Delete" class="btn btn-icon btn-danger my-0 ml-0" (click)="DeleteHealthGuideLines(item.id)"><i class="fa fa-trash"></i></button>
          <button title="Edit" class="btn btn-icon btn-info my-0 ml-0" (click)="openEditHealthGuideModal(item)" ><i class="fa fa-edit"></i></button>
          <button title="View Link" class="btn btn-icon btn-dynamic-2c my-0 ml-0" (click)="viewHealthGuideLink(item.url)" ><i class="fa fa-eye"></i></button>
        </td>
      </tr>
    </tbody>
    <tbody *ngIf="healthGuideLinesList.length === 0">
      <td class="bg-white p-3 text-danger" colspan="12">No Record Found</td>
    </tbody>
  </table>
</div>

<div mdbModal #addEditHealthGuideModal="mdbModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myaddEditHealthGuideModalLabel" aria-hidden="true" (close)="onCloseHealthGuideModal()">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header py-2">
        <button type="button" class="close pull-right" aria-label="Close" (click)="addEditHealthGuideModal.hide()">
          <span aria-hidden="true">Ã—</span>
        </button>
        <h4 *ngIf="!isEditHealthGuide" class="modal-title w-100" style="font-weight: 400;" id="myModalLabel">Add New Health Guide</h4>
        <h4 *ngIf="isEditHealthGuide" class="modal-title w-100" style="font-weight: 400;" id="myModalLabel">Edit Health Guide</h4>
      </div>
      <div class="modal-body">
        <div class="d-flex align-items-center form-group w-100">
          <label class="mb-0 mr-3" style="font-weight: 500;width: 95px;">Guideline Title</label>
          <div class="flex-grow-1">
            <input type="text" [(ngModel)]="healthGuideDto.title"
              class="form-control form-control-sm box-shadow w-100" placeholder="Title" />
          </div>
        </div>
        <div class="d-flex align-items-center form-group w-100 mb-0">
          <label class="mb-0 mr-3" style="font-weight: 500;width: 95px;">Guideline URL</label>
          <div class="flex-grow-1">
            <input type="text" [(ngModel)]="healthGuideDto.url"
              class="form-control form-control-sm box-shadow w-100" placeholder="Url" />
          </div>
        </div>
      </div>
      <div class="modal-footer py-2">
        <button *ngIf="!isEditHealthGuide" type="button" class="btn btn-sm btn-dynamic-2c" [disabled]="!healthGuideDto.title || !healthGuideDto.url || isAddingHealthGuide" (click)="AddEditHealthGuideLine()" >
          <span *ngIf="isAddingHealthGuide" class="spinner-border spinner-border-sm mr-1" role="status"
        aria-hidden="true"></span>Save</button>
        <button *ngIf="isEditHealthGuide" type="button" class="btn btn-sm btn-dynamic-2c" [disabled]="!healthGuideDto.title || !healthGuideDto.url || isAddingHealthGuide " (click)="AddEditHealthGuideLine()">
          <span *ngIf="isAddingHealthGuide" class="spinner-border spinner-border-sm mr-1" role="status"
          aria-hidden="true"></span>Edit</button>
        <button type="button" class="btn btn-sm btn-dynamic-secondary-2c" aria-label="Close" (click)="addEditHealthGuideModal.hide()" >Cancel</button>
      </div>
    </div>
  </div>
</div>
