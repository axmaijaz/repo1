

<div class="right-side-chat shadow" [class.extended-height]="toggleHeight" [class.inside-main]="insideMain && insideSideNav" [class.expanded-class]="!insideMain && insideSideNav">
  <div class="right-side-chat-header" >
      <div class="name-elps">
        <span title="{{selectedGroup?.name}}" *ngIf="insideMain" (click)="RestoreListView()" class="fa fa-arrow-left fa-lg cursor-pointer"></span>
        <span class="ml-1 text-dynamic-2c cursor-pointer" (click)="OpenPatientDetail()">{{selectedGroup?.name}}</span>
      </div>
      <div class="d-flex align-items-center">
        <div (click)="ConfirmChangeFlag()" class="chat-list-box chat-unread" title="Mark as Unread">
          <span class="fa fa-envelope"></span>
        </div>
        <div class="chat-list-box chat-new" title="Following" [class.active]="selectedGroup?.following == true"
        (click)="selectedGroup.following=!selectedGroup?.following;MarkPatientGroupFlags()">
            <!-- <div>
                <h2>{{'Following' || '0'}}</h2>
            </div> -->
            <span class="box-img-icon">
                <!-- <img src="../../../assets/img/new.svg"> -->
                <img style="width: 10px !important;" src="../../../assets/img/flag.svg">
            </span>
        </div>
        <div class="chat-list-box chat-critical" placement="bottom" appendTo="body" mdbTooltip="Critical" [class.active]="selectedGroup?.critical == true"
        (click)="selectedGroup.critical=!selectedGroup?.critical;MarkPatientGroupFlags()">
            <!-- <div>
                <h2>{{'Critical' || '0'}}</h2>
            </div> -->
            <span class="box-img-icon">
                <img src="../../../assets/img/cri.svg">
            </span>
        </div>
        <div class="select-icons">

          <span *ngIf="selection" placement="bottom" appendTo="body" mdbTooltip="Copy Selected Messages" (click)="CopySelectedMessages()">
              <svg style="width: 14px!important;" xmlns="http://www.w3.org/2000/svg" width="17" height="20" viewBox="0 0 17 20" fill="none">
                  <path d="M1.90588 19.0588C1.38177 19.0588 0.932931 18.872 0.559378 18.4985C0.185825 18.1249 -0.000633676 17.6764 1.6179e-06 17.1529V3.81177H1.90588V17.1529H12.3882V19.0588H1.90588ZM5.71765 15.2471C5.19353 15.2471 4.74469 15.0603 4.37114 14.6867C3.99759 14.3132 3.81113 13.8647 3.81177 13.3412V1.90588C3.81177 1.38177 3.99854 0.932931 4.37209 0.559378C4.74565 0.185825 5.19417 -0.000633676 5.71765 1.6179e-06H14.2941C14.8182 1.6179e-06 15.2671 0.186778 15.6406 0.560331C16.0142 0.933884 16.2006 1.3824 16.2 1.90588V13.3412C16.2 13.8653 16.0132 14.3141 15.6397 14.6877C15.2661 15.0612 14.8176 15.2477 14.2941 15.2471H5.71765Z" fill="#939191"/>
              </svg>
          </span>
          <span placement="bottom" appendTo="body" mdbTooltip="Create Encounter" *ngIf="selection" tabindex="0" class="dropdown-chat-modal">
            <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 17 17" fill="none">
                <path d="M12.6135 0.401367C12.2814 0.401367 11.9577 0.529127 11.7022 0.776131L9.8965 2.58181L14.4107 7.10452L16.2164 5.31588C16.7274 4.79632 16.7274 3.98717 16.2164 3.49317L13.5164 0.776131C13.2609 0.529127 12.9372 0.401367 12.6135 0.401367ZM9.29177 3.18654L2.39272 10.0941L4.57316 10.3326L4.72647 12.2831L6.66843 12.4279L6.91543 14.6083L13.8145 7.70074M1.89019 10.8862L0.399658 16.5843L6.10628 15.0597L5.90187 13.22L3.93436 13.0752L3.78105 11.0992" fill="#939191"/>
            </svg>
            <div class="custom-drop-chat">
                <h5>Please Select Service</h5>
                <div class="btn-group p-3">
                    <button *hasClaim="['ccmService']" class="btn btn-custom-chat" (click)="OpenCCMEncounterModel()">CCM</button>
                    <button *hasClaim="['rpmService']" class="btn btn-custom-chat" (click)="OpenRPMEncounterModel()">RPM</button>
                </div>
            </div>
          </span>
          <!-- <span >
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
                <path d="M7.99523 17.179C7.7057 17.179 7.46284 17.0806 7.26664 16.8839C7.07044 16.6872 6.97268 16.444 6.97336 16.1544V10.0071L1.04651 2.42542C0.791045 2.0839 0.752554 1.72531 0.931041 1.34964C1.10953 0.973968 1.42052 0.786133 1.86401 0.786133H16.1702C16.613 0.786133 16.924 0.973968 17.1032 1.34964C17.2823 1.72531 17.2438 2.0839 16.9877 2.42542L11.0608 10.0071V16.1544C11.0608 16.4447 10.9627 16.6882 10.7665 16.8849C10.5703 17.0816 10.3278 17.1797 10.039 17.179H7.99523Z" fill="#939191"/>
            </svg>
          </span> -->
          <span placement="bottom" appendTo="body" mdbTooltip="Selection" (click)="changeSelection()"  [class.active]="selection==true">
              <svg xmlns="http://www.w3.org/2000/svg" width="27" height="27" viewBox="0 0 27 27" fill="none">
                  <path d="M22.8462 0H4.15385C3.05255 0.00120257 1.9967 0.439225 1.21796 1.21796C0.439225 1.9967 0.00120257 3.05255 0 4.15385V22.8462C0.00120257 23.9475 0.439225 25.0033 1.21796 25.782C1.9967 26.5608 3.05255 26.9988 4.15385 27H22.8462C23.9475 26.9988 25.0033 26.5608 25.782 25.782C26.5608 25.0033 26.9988 23.9475 27 22.8462V4.15385C26.9988 3.05255 26.5608 1.9967 25.782 1.21796C25.0033 0.439225 23.9475 0.00120257 22.8462 0ZM20.5258 8.97555L11.8028 19.3602C11.7071 19.4741 11.588 19.5662 11.4536 19.6302C11.3193 19.6941 11.1727 19.7284 11.0239 19.7308H11.0064C10.8608 19.7307 10.7169 19.7001 10.584 19.6408C10.451 19.5815 10.332 19.495 10.2347 19.3868L6.49623 15.2329C6.40128 15.1322 6.32743 15.0136 6.279 14.8839C6.23057 14.7543 6.20855 14.6162 6.21422 14.478C6.2199 14.3397 6.25316 14.2039 6.31205 14.0787C6.37094 13.9534 6.45427 13.8412 6.55715 13.7486C6.66003 13.656 6.78037 13.585 6.91112 13.5396C7.04186 13.4942 7.18035 13.4753 7.31847 13.4842C7.45659 13.4931 7.59153 13.5295 7.71538 13.5913C7.83922 13.6531 7.94947 13.739 8.03964 13.844L10.9791 17.11L18.9357 7.63983C19.1142 7.43349 19.3667 7.30567 19.6386 7.284C19.9106 7.26232 20.1802 7.34855 20.3891 7.52402C20.598 7.6995 20.7294 7.95013 20.755 8.22175C20.7806 8.49336 20.6983 8.76414 20.5258 8.97555Z" fill="#B8B8B8"/>
              </svg>
          </span>
          <ng-container *hasClaim="['TelephonyCommunication']">
            <span placement="bottom" appendTo="body" mdbTooltip="RingCentral" *ngIf="rcService?.rcPhoneInfo?.length" tabindex="0" class="dropdown-chat-modal p-0 border-0">
              <div class="openRingCentral cusor-pointer" >
                <img class="img-fluid  cursor-pointer" src="https://netstorage.ringcentral.com/appext/logo/TXmRITezQwat3ioy9O0kiw~f5vX_dY7SpK-_EUsEkJdqA/fe64c15a-1442-4ebf-8d24-8454afa816e4.png">
              </div>
              <div class="custom-drop-chat">
                  <h5>Open Widget</h5>
                  <div class="btn-group p-3">
                      <!-- <button class="btn btn-custom-chat" (click)="OpenMessageView()">SMS</button> -->
                      <button class="btn btn-custom-chat" (click)="OpenConverSation()">SMS</button>
                      <button class="btn btn-custom-chat" (click)="OpenCallView()">Call</button>
                  </div>
              </div>
            </span>
          </ng-container>
        </div>
      </div>
  </div>
  <div class="right-side-chat-body" [class.myrightmodalsize]="!gettingHistory && !selectedPatient?.telephonyCommunication">
      <div id="chat-body-div" class="chat-body-msg">
        <!-- <cdk-virtual-scroll-viewport itemSize="50" class="box">
          <div class="row" *cdkVirtualFor="let row of rows">
            {{ row }}
          </div>
        </cdk-virtual-scroll-viewport> -->
        <ng-container *ngFor="let item of commHistory">
          <div *ngIf="item.senderUserId != currentUserId" class="msg-out" [class.select]="selection==true" [class.active]="item.selected==true" (click)="selectMessage(item)">
              <div>
                  <span class="msg-avatar" title="{{item.senderName}}">{{item.shortCode}}</span>
              </div>
              <div class="show-name-msg">
                  <div class="show-msg" [innerHTML]="item.message">
                  </div>
                  <div class="date-icon">
                      <span  class="msg-icon" *ngIf="item?.type == CommunicationType.Text">
                          <svg  xmlns="http://www.w3.org/2000/svg" width="15" height="14" viewBox="0 0 15 14" fill="none">
                              <path  d="M4.61111 4.59862H10.3889M4.61111 7.47751H8.94444M11.8333 1C12.408 1 12.9591 1.22748 13.3654 1.63241C13.7717 2.03733 14 2.58652 14 3.15917V8.91696C14 9.4896 13.7717 10.0388 13.3654 10.4437C12.9591 10.8486 12.408 11.0761 11.8333 11.0761H8.22222L4.61111 13.2353V11.0761H3.16667C2.59203 11.0761 2.04093 10.8486 1.6346 10.4437C1.22827 10.0388 1 9.4896 1 8.91696V3.15917C1 2.58652 1.22827 2.03733 1.6346 1.63241C2.04093 1.22748 2.59203 1 3.16667 1H11.8333Z" stroke="#134389" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                          </svg>
                      </span>
                      <span  class="msg-icon" *ngIf="item?.type == CommunicationType.SMS">
                          <svg xmlns="http://www.w3.org/2000/svg" width="13" height="12" viewBox="0 0 13 12" fill="none">
                            <path d="M6.50066 10.5614C10.0905 10.5614 13 8.1978 13 5.28071C13 2.36363 10.0905 0 6.50066 0C2.91079 0 0.001319 2.36363 0.001319 5.28071C0.001319 6.42572 0.450687 7.4844 1.21233 8.35013C1.16409 8.97214 0.922905 9.5256 0.669025 9.94704C0.52939 10.1806 0.387217 10.3685 0.283126 10.4954C0.229811 10.5589 0.189191 10.6071 0.158725 10.6401C0.143492 10.6554 0.133337 10.6681 0.12572 10.6757L0.118104 10.6833C0.00131901 10.8001 -0.0316855 10.9727 0.0317847 11.125C0.0952548 11.2774 0.242505 11.3764 0.407528 11.3764C1.13616 11.3764 1.86988 11.1504 2.47919 10.8864C3.06058 10.6325 3.55565 10.3304 3.85776 10.1095C4.6651 10.4015 5.55876 10.564 6.50066 10.564V10.5614ZM5.15255 3.67619C5.31758 3.62034 5.50037 3.67873 5.607 3.81836L6.50066 5.00906L7.39432 3.81836C7.49841 3.67873 7.6812 3.62034 7.84876 3.67619C8.01633 3.73204 8.12549 3.88691 8.12549 4.06209V6.49934C8.12549 6.72276 7.9427 6.90555 7.71929 6.90555C7.49587 6.90555 7.31308 6.72276 7.31308 6.49934V5.28071L6.82563 5.93065C6.74946 6.0322 6.6276 6.09313 6.50066 6.09313C6.37372 6.09313 6.25186 6.0322 6.17569 5.93065L5.68824 5.28071V6.49934C5.68824 6.72276 5.50545 6.90555 5.28203 6.90555C5.05862 6.90555 4.87582 6.72276 4.87582 6.49934V4.06209C4.87582 3.88691 4.98753 3.73204 5.15255 3.67619ZM9.54723 4.64094V4.65109C9.54976 4.65363 9.56246 4.6714 9.60308 4.69425C9.70209 4.75264 9.8468 4.79834 10.0677 4.86689L10.0829 4.87197C10.2708 4.92782 10.5221 5.00398 10.7227 5.13093C10.9537 5.27564 11.1644 5.51682 11.1695 5.89003C11.1746 6.27085 10.9766 6.55012 10.7176 6.71006C10.4764 6.85985 10.187 6.91063 9.9382 6.90301C9.62847 6.89286 9.3365 6.7913 9.11055 6.71514C9.07501 6.70245 9.042 6.69229 9.009 6.6796C8.79574 6.60851 8.68149 6.37748 8.75258 6.16676C8.82367 5.95604 9.0547 5.83925 9.26542 5.91034C9.30858 5.92557 9.3492 5.93826 9.38982 5.95096C9.62085 6.02966 9.78587 6.08552 9.96359 6.09059C10.0981 6.09567 10.2175 6.06521 10.2886 6.01951C10.319 5.9992 10.3343 5.98142 10.3419 5.96873C10.3469 5.95858 10.3571 5.93826 10.3571 5.90018V5.89511C10.3571 5.87733 10.3571 5.85956 10.2886 5.8164C10.1921 5.75547 10.0448 5.70723 9.83157 5.64122L9.80111 5.63107C9.61831 5.57522 9.37713 5.50413 9.18418 5.38734C8.95568 5.25025 8.73481 5.01414 8.73481 4.64094C8.73227 4.25504 8.95314 3.98846 9.20449 3.83867C9.44313 3.69904 9.72494 3.64826 9.95851 3.6508C10.2124 3.65588 10.4587 3.70919 10.6668 3.76251C10.8826 3.8209 11.0121 4.04178 10.9537 4.26012C10.8953 4.47845 10.6745 4.60539 10.4561 4.547C10.2708 4.49876 10.0981 4.46322 9.94582 4.46068C9.82142 4.45814 9.69701 4.48861 9.61831 4.53431C9.58277 4.55462 9.565 4.57493 9.55738 4.58508C9.5523 4.5927 9.54723 4.60539 9.54723 4.63332V4.64094ZM2.64168 4.64094V4.65109C2.64421 4.65363 2.65691 4.6714 2.69753 4.69425C2.79654 4.75264 2.94126 4.79834 3.16213 4.86689L3.17736 4.87197C3.36524 4.92782 3.61658 5.00398 3.81714 5.13093C4.04817 5.27564 4.25889 5.51682 4.26397 5.89003C4.26905 6.27085 4.07102 6.55012 3.81207 6.71006C3.57088 6.85985 3.28146 6.91063 3.03265 6.90301C2.72038 6.89286 2.41826 6.78876 2.18977 6.71006C2.15676 6.69991 2.1263 6.68975 2.09837 6.6796C1.88511 6.60851 1.77087 6.37748 1.84195 6.16676C1.91304 5.95604 2.14407 5.83925 2.35479 5.91034C2.39033 5.92303 2.42588 5.93319 2.45888 5.94588C2.70007 6.02712 2.87779 6.08805 3.06058 6.09313C3.19514 6.09821 3.31446 6.06774 3.38555 6.02205C3.41601 6.00174 3.43124 5.98396 3.43886 5.97127C3.44394 5.96111 3.45409 5.9408 3.45409 5.90272V5.89764C3.45409 5.87987 3.45409 5.8621 3.38555 5.81894C3.28907 5.75801 3.14182 5.70977 2.92856 5.64376L2.8981 5.63361C2.7153 5.57775 2.47412 5.50667 2.28117 5.38988C2.05267 5.25533 1.8318 5.01922 1.82926 4.64601C1.82672 4.26011 2.0476 3.99354 2.29894 3.84375C2.53759 3.70412 2.81939 3.65334 3.05296 3.65588C3.29415 3.65842 3.61658 3.70919 3.84253 3.76759C4.05833 3.82598 4.18781 4.04686 4.12942 4.26519C4.07102 4.48353 3.85015 4.61047 3.63181 4.55208C3.46425 4.50638 3.20529 4.4683 3.04027 4.46576C2.91587 4.46322 2.79147 4.49369 2.71276 4.53938C2.67722 4.55969 2.65945 4.58 2.65183 4.59016C2.64675 4.59778 2.64168 4.61047 2.64168 4.6384V4.64094Z" fill="#134389"/>
                        </svg>
                      </span>
                      <span *ngIf="item?.serviceType != null" class="encounter-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="13" viewBox="0 0 14 13" fill="none">
                          <path d="M5.71801 9C5.57125 8.98857 5.43472 8.91902 5.33768 8.80626L3.0557 6.48141C3.00486 6.37295 2.98827 6.2511 3.00822 6.13264C3.02817 6.01418 3.08367 5.90493 3.1671 5.81994C3.25052 5.73496 3.35775 5.67841 3.47402 5.65808C3.5903 5.63776 3.7099 5.65466 3.81636 5.70646L5.6952 7.62059L12.1836 1.05675C12.2901 1.00495 12.4097 0.988046 12.526 1.00837C12.6423 1.0287 12.7495 1.08525 12.8329 1.17023C12.9163 1.25522 12.9718 1.36447 12.9918 1.48293C13.0117 1.60139 12.9951 1.72324 12.9443 1.8317L6.09835 8.80626C6.00131 8.91902 5.86478 8.98857 5.71801 9Z" fill="#429D3C"/>
                          <path d="M6.97692 13C5.72836 12.9981 4.50314 12.685 3.42878 12.0931C2.35443 11.5012 1.4702 10.6523 0.868111 9.6346C0.410442 8.87628 0.127583 8.03758 0.0375607 7.17193C-0.104502 5.90238 0.158347 4.62201 0.793319 3.49055C1.42829 2.35908 2.40728 1.42661 3.60815 0.809443C4.42319 0.383629 5.32464 0.120458 6.25504 0.0367009C7.18196 -0.0560657 8.11947 0.0274746 9.01061 0.282245C9.09014 0.29703 9.16547 0.327111 9.23178 0.370562C9.29808 0.414013 9.3539 0.469874 9.39565 0.534565C9.4374 0.599256 9.46416 0.671349 9.47421 0.746223C9.48427 0.821098 9.4774 0.897101 9.45405 0.969362C9.43069 1.04162 9.39137 1.10855 9.33859 1.16584C9.28582 1.22314 9.22076 1.26954 9.14759 1.30208C9.07442 1.33462 8.99474 1.35258 8.91368 1.3548C8.83261 1.35702 8.75194 1.34345 8.67683 1.31498C7.92282 1.10404 7.13113 1.03529 6.34819 1.11276C5.5743 1.18649 4.82444 1.40513 4.14374 1.75551C3.48794 2.09213 2.90812 2.54332 2.43607 3.08434C1.95005 3.63549 1.58711 4.27132 1.36853 4.95461C1.14994 5.63789 1.08009 6.35489 1.16307 7.0636C1.24232 7.78363 1.47731 8.4813 1.8539 9.11462C2.2157 9.72478 2.70064 10.2642 3.28214 10.7034C3.87452 11.1556 4.55792 11.4933 5.29232 11.6967C6.02672 11.9 6.79735 11.965 7.55909 11.8878C8.33297 11.8141 9.08283 11.5955 9.76354 11.2451C10.4193 10.9085 10.9992 10.4573 11.4712 9.91625C11.9572 9.36511 12.3202 8.72927 12.5387 8.04599C12.7573 7.3627 12.8272 6.6457 12.7442 5.93699C12.7288 5.78663 12.7782 5.63673 12.8815 5.52025C12.9849 5.40378 13.1337 5.33027 13.2953 5.31591C13.4569 5.30154 13.618 5.34749 13.7432 5.44365C13.8684 5.53981 13.9474 5.6783 13.9629 5.82866C14.1042 7.09897 13.8402 8.37987 13.2038 9.51141C12.5674 10.643 11.5868 11.575 10.3845 12.1911C9.5608 12.6344 8.64543 12.9101 7.6988 13H6.97692Z" fill="#429D3C"/>
                          </svg>
                      </span>
                      <span class="msg-date">
                        {{item.timeStamp}}
                      </span>
                  </div>
              </div>
          </div>
          <div *ngIf="item.senderUserId == currentUserId" class="msg-in "  [class.select]="selection==true" [class.active]="item.selected==true" (click)="selectMessage(item)">
              <div>
                  <span class="msg-avatar" title="{{item.senderName}}">{{item.shortCode}}</span>
              </div>
              <div class="show-name-msg">
                  <div class="show-msg" [innerHTML]="item.message"></div>
                  <div class="date-icon">
                    <span  class="msg-icon" *ngIf="item?.type == CommunicationType.Text">
                      <svg  xmlns="http://www.w3.org/2000/svg" width="15" height="14" viewBox="0 0 15 14" fill="none">
                          <path  d="M4.61111 4.59862H10.3889M4.61111 7.47751H8.94444M11.8333 1C12.408 1 12.9591 1.22748 13.3654 1.63241C13.7717 2.03733 14 2.58652 14 3.15917V8.91696C14 9.4896 13.7717 10.0388 13.3654 10.4437C12.9591 10.8486 12.408 11.0761 11.8333 11.0761H8.22222L4.61111 13.2353V11.0761H3.16667C2.59203 11.0761 2.04093 10.8486 1.6346 10.4437C1.22827 10.0388 1 9.4896 1 8.91696V3.15917C1 2.58652 1.22827 2.03733 1.6346 1.63241C2.04093 1.22748 2.59203 1 3.16667 1H11.8333Z" stroke="#134389" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                      </svg>
                    </span>
                    <span  class="msg-icon" *ngIf="item?.type == CommunicationType.SMS">
                        <svg xmlns="http://www.w3.org/2000/svg" width="13" height="12" viewBox="0 0 13 12" fill="none">
                          <path d="M6.50066 10.5614C10.0905 10.5614 13 8.1978 13 5.28071C13 2.36363 10.0905 0 6.50066 0C2.91079 0 0.001319 2.36363 0.001319 5.28071C0.001319 6.42572 0.450687 7.4844 1.21233 8.35013C1.16409 8.97214 0.922905 9.5256 0.669025 9.94704C0.52939 10.1806 0.387217 10.3685 0.283126 10.4954C0.229811 10.5589 0.189191 10.6071 0.158725 10.6401C0.143492 10.6554 0.133337 10.6681 0.12572 10.6757L0.118104 10.6833C0.00131901 10.8001 -0.0316855 10.9727 0.0317847 11.125C0.0952548 11.2774 0.242505 11.3764 0.407528 11.3764C1.13616 11.3764 1.86988 11.1504 2.47919 10.8864C3.06058 10.6325 3.55565 10.3304 3.85776 10.1095C4.6651 10.4015 5.55876 10.564 6.50066 10.564V10.5614ZM5.15255 3.67619C5.31758 3.62034 5.50037 3.67873 5.607 3.81836L6.50066 5.00906L7.39432 3.81836C7.49841 3.67873 7.6812 3.62034 7.84876 3.67619C8.01633 3.73204 8.12549 3.88691 8.12549 4.06209V6.49934C8.12549 6.72276 7.9427 6.90555 7.71929 6.90555C7.49587 6.90555 7.31308 6.72276 7.31308 6.49934V5.28071L6.82563 5.93065C6.74946 6.0322 6.6276 6.09313 6.50066 6.09313C6.37372 6.09313 6.25186 6.0322 6.17569 5.93065L5.68824 5.28071V6.49934C5.68824 6.72276 5.50545 6.90555 5.28203 6.90555C5.05862 6.90555 4.87582 6.72276 4.87582 6.49934V4.06209C4.87582 3.88691 4.98753 3.73204 5.15255 3.67619ZM9.54723 4.64094V4.65109C9.54976 4.65363 9.56246 4.6714 9.60308 4.69425C9.70209 4.75264 9.8468 4.79834 10.0677 4.86689L10.0829 4.87197C10.2708 4.92782 10.5221 5.00398 10.7227 5.13093C10.9537 5.27564 11.1644 5.51682 11.1695 5.89003C11.1746 6.27085 10.9766 6.55012 10.7176 6.71006C10.4764 6.85985 10.187 6.91063 9.9382 6.90301C9.62847 6.89286 9.3365 6.7913 9.11055 6.71514C9.07501 6.70245 9.042 6.69229 9.009 6.6796C8.79574 6.60851 8.68149 6.37748 8.75258 6.16676C8.82367 5.95604 9.0547 5.83925 9.26542 5.91034C9.30858 5.92557 9.3492 5.93826 9.38982 5.95096C9.62085 6.02966 9.78587 6.08552 9.96359 6.09059C10.0981 6.09567 10.2175 6.06521 10.2886 6.01951C10.319 5.9992 10.3343 5.98142 10.3419 5.96873C10.3469 5.95858 10.3571 5.93826 10.3571 5.90018V5.89511C10.3571 5.87733 10.3571 5.85956 10.2886 5.8164C10.1921 5.75547 10.0448 5.70723 9.83157 5.64122L9.80111 5.63107C9.61831 5.57522 9.37713 5.50413 9.18418 5.38734C8.95568 5.25025 8.73481 5.01414 8.73481 4.64094C8.73227 4.25504 8.95314 3.98846 9.20449 3.83867C9.44313 3.69904 9.72494 3.64826 9.95851 3.6508C10.2124 3.65588 10.4587 3.70919 10.6668 3.76251C10.8826 3.8209 11.0121 4.04178 10.9537 4.26012C10.8953 4.47845 10.6745 4.60539 10.4561 4.547C10.2708 4.49876 10.0981 4.46322 9.94582 4.46068C9.82142 4.45814 9.69701 4.48861 9.61831 4.53431C9.58277 4.55462 9.565 4.57493 9.55738 4.58508C9.5523 4.5927 9.54723 4.60539 9.54723 4.63332V4.64094ZM2.64168 4.64094V4.65109C2.64421 4.65363 2.65691 4.6714 2.69753 4.69425C2.79654 4.75264 2.94126 4.79834 3.16213 4.86689L3.17736 4.87197C3.36524 4.92782 3.61658 5.00398 3.81714 5.13093C4.04817 5.27564 4.25889 5.51682 4.26397 5.89003C4.26905 6.27085 4.07102 6.55012 3.81207 6.71006C3.57088 6.85985 3.28146 6.91063 3.03265 6.90301C2.72038 6.89286 2.41826 6.78876 2.18977 6.71006C2.15676 6.69991 2.1263 6.68975 2.09837 6.6796C1.88511 6.60851 1.77087 6.37748 1.84195 6.16676C1.91304 5.95604 2.14407 5.83925 2.35479 5.91034C2.39033 5.92303 2.42588 5.93319 2.45888 5.94588C2.70007 6.02712 2.87779 6.08805 3.06058 6.09313C3.19514 6.09821 3.31446 6.06774 3.38555 6.02205C3.41601 6.00174 3.43124 5.98396 3.43886 5.97127C3.44394 5.96111 3.45409 5.9408 3.45409 5.90272V5.89764C3.45409 5.87987 3.45409 5.8621 3.38555 5.81894C3.28907 5.75801 3.14182 5.70977 2.92856 5.64376L2.8981 5.63361C2.7153 5.57775 2.47412 5.50667 2.28117 5.38988C2.05267 5.25533 1.8318 5.01922 1.82926 4.64601C1.82672 4.26011 2.0476 3.99354 2.29894 3.84375C2.53759 3.70412 2.81939 3.65334 3.05296 3.65588C3.29415 3.65842 3.61658 3.70919 3.84253 3.76759C4.05833 3.82598 4.18781 4.04686 4.12942 4.26519C4.07102 4.48353 3.85015 4.61047 3.63181 4.55208C3.46425 4.50638 3.20529 4.4683 3.04027 4.46576C2.91587 4.46322 2.79147 4.49369 2.71276 4.53938C2.67722 4.55969 2.65945 4.58 2.65183 4.59016C2.64675 4.59778 2.64168 4.61047 2.64168 4.6384V4.64094Z" fill="#134389"/>
                      </svg>
                    </span>
                    <span *ngIf="item?.serviceType != null" class="encounter-icon">
                      <svg xmlns="http://www.w3.org/2000/svg" width="14" height="13" viewBox="0 0 14 13" fill="none">
                        <path d="M5.71801 9C5.57125 8.98857 5.43472 8.91902 5.33768 8.80626L3.0557 6.48141C3.00486 6.37295 2.98827 6.2511 3.00822 6.13264C3.02817 6.01418 3.08367 5.90493 3.1671 5.81994C3.25052 5.73496 3.35775 5.67841 3.47402 5.65808C3.5903 5.63776 3.7099 5.65466 3.81636 5.70646L5.6952 7.62059L12.1836 1.05675C12.2901 1.00495 12.4097 0.988046 12.526 1.00837C12.6423 1.0287 12.7495 1.08525 12.8329 1.17023C12.9163 1.25522 12.9718 1.36447 12.9918 1.48293C13.0117 1.60139 12.9951 1.72324 12.9443 1.8317L6.09835 8.80626C6.00131 8.91902 5.86478 8.98857 5.71801 9Z" fill="#429D3C"/>
                        <path d="M6.97692 13C5.72836 12.9981 4.50314 12.685 3.42878 12.0931C2.35443 11.5012 1.4702 10.6523 0.868111 9.6346C0.410442 8.87628 0.127583 8.03758 0.0375607 7.17193C-0.104502 5.90238 0.158347 4.62201 0.793319 3.49055C1.42829 2.35908 2.40728 1.42661 3.60815 0.809443C4.42319 0.383629 5.32464 0.120458 6.25504 0.0367009C7.18196 -0.0560657 8.11947 0.0274746 9.01061 0.282245C9.09014 0.29703 9.16547 0.327111 9.23178 0.370562C9.29808 0.414013 9.3539 0.469874 9.39565 0.534565C9.4374 0.599256 9.46416 0.671349 9.47421 0.746223C9.48427 0.821098 9.4774 0.897101 9.45405 0.969362C9.43069 1.04162 9.39137 1.10855 9.33859 1.16584C9.28582 1.22314 9.22076 1.26954 9.14759 1.30208C9.07442 1.33462 8.99474 1.35258 8.91368 1.3548C8.83261 1.35702 8.75194 1.34345 8.67683 1.31498C7.92282 1.10404 7.13113 1.03529 6.34819 1.11276C5.5743 1.18649 4.82444 1.40513 4.14374 1.75551C3.48794 2.09213 2.90812 2.54332 2.43607 3.08434C1.95005 3.63549 1.58711 4.27132 1.36853 4.95461C1.14994 5.63789 1.08009 6.35489 1.16307 7.0636C1.24232 7.78363 1.47731 8.4813 1.8539 9.11462C2.2157 9.72478 2.70064 10.2642 3.28214 10.7034C3.87452 11.1556 4.55792 11.4933 5.29232 11.6967C6.02672 11.9 6.79735 11.965 7.55909 11.8878C8.33297 11.8141 9.08283 11.5955 9.76354 11.2451C10.4193 10.9085 10.9992 10.4573 11.4712 9.91625C11.9572 9.36511 12.3202 8.72927 12.5387 8.04599C12.7573 7.3627 12.8272 6.6457 12.7442 5.93699C12.7288 5.78663 12.7782 5.63673 12.8815 5.52025C12.9849 5.40378 13.1337 5.33027 13.2953 5.31591C13.4569 5.30154 13.618 5.34749 13.7432 5.44365C13.8684 5.53981 13.9474 5.6783 13.9629 5.82866C14.1042 7.09897 13.8402 8.37987 13.2038 9.51141C12.5674 10.643 11.5868 11.575 10.3845 12.1911C9.5608 12.6344 8.64543 12.9101 7.6988 13H6.97692Z" fill="#429D3C"/>
                        </svg>
                    </span>
                      <span class="msg-date">
                        {{item.timeStamp}}
                      </span>
                  </div>
              </div>
          </div>
        </ng-container>
        
        <div class="col-sm-12 bg-white py-2 profile-block"  *ngIf="gettingHistory">
          <ng-container *ngFor="let item of [1,2]">
            <div  class="mt-2 row" >
              <div class="col-6">
                <skltn-root duration="1000" [rectRadius]="2" flareWidth="50%" bgFill="#f2f3f8"
                  flareFill="rgba(255,255,255, 0.5)">
                  <!-- Card with Avatar -->
                  <div class="skltn-card message-skltn-card">
                    <div class="skltn-card__body"  >
                      <div skltn-bone class="skltn-card__avatar" type="circle"></div>
                      <div skltn-bone class="skltn-card__title"></div>
                      <div skltn-bone class="skltn-card__line"></div>
                      <div skltn-bone class="skltn-card__line"></div>
                    </div>
                  </div>
                </skltn-root>
              </div>
            </div>
            <div  class="mt-2 row" >
              <div class="col-6"></div>
              <div class="col-6">
                <skltn-root duration="1000" [rectRadius]="2" flareWidth="50%" bgFill="#f2f3f8"
                  flareFill="rgba(255,255,255, 0.5)">
                  <!-- Card with Avatar -->
                  <div class="skltn-card">
                    <div class="skltn-card__body">
                      <div skltn-bone class="skltn-card__avatar" type="circle"></div>
                      <div skltn-bone class="skltn-card__title"></div>
                      <div skltn-bone class="skltn-card__line"></div>
                      <div skltn-bone class="skltn-card__line"></div>
                    </div>
                  </div>
                </skltn-root>
              </div>
            </div>
          </ng-container>
        </div>
      </div>
  </div>
  <div class="right-side-chat-footer" [class.disabled]="messageType == null">
      <div class="d-flex justify-content-between align-items-center">
          <div class="text-area-sender">
            <div class="angle-top-textarea" (click)="toggleHeightF()">
              <span class="fa fa-angle-up" *ngIf="!toggleHeight"></span>
              <span class="fa fa-angle-down mb-1" *ngIf="toggleHeight"></span>
            </div>
            <app-two-c-text-area class="textarea" [class.extended-height]="toggleHeight" #myFIeldRef9898 [value]="messageText" [isChatArea]="true" [PatientId]="selectedGroup?.id" (EnterPressedEmitter)="AddPatientCommunication()" (valueChanged)="messageText=$event">
            </app-two-c-text-area>
            <!-- <textarea [(ngModel)]="messageText" (keyup.enter)="AddPatientCommunication()" type="text" placeholder="Type a message"></textarea> -->
            <div class="msg-type-sms-text">
              <span *hasClaim="['TelephonyCommunication']" [class.disabled]="!selectedPatient.telephonyCommunication" class="sms" [class.active]="messageType==CommunicationMethod.Telephony" (click)="messageType=CommunicationMethod.Telephony">
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="15" viewBox="0 0 18 15" fill="none">
                      <path d="M8.71365 13.8662C13.5256 13.8662 17.4255 10.763 17.4255 6.9331C17.4255 3.10323 13.5256 0 8.71365 0C3.9017 0 0.00176803 3.10323 0.00176803 6.9331C0.00176803 8.43639 0.604113 9.82634 1.62504 10.963C1.56038 11.7796 1.23709 12.5063 0.896778 13.0596C0.709608 13.3662 0.519036 13.6129 0.37951 13.7795C0.308045 13.8629 0.253596 13.9262 0.212759 13.9695C0.19234 13.9895 0.178728 14.0062 0.168519 14.0162L0.15831 14.0262C0.00176803 14.1795 -0.042472 14.4062 0.042605 14.6062C0.127682 14.8062 0.325061 14.9362 0.546261 14.9362C1.52294 14.9362 2.50643 14.6395 3.32317 14.2929C4.10248 13.9595 4.76608 13.5629 5.17104 13.2729C6.25322 13.6562 7.45111 13.8695 8.71365 13.8695V13.8662ZM6.90661 4.82651C7.12781 4.75318 7.37284 4.82984 7.51577 5.01317L8.71365 6.57645L9.91153 5.01317C10.0511 4.82984 10.2961 4.75318 10.5207 4.82651C10.7453 4.89984 10.8916 5.10316 10.8916 5.33316V8.53305C10.8916 8.82637 10.6466 9.06637 10.3471 9.06637C10.0477 9.06637 9.80263 8.82637 9.80263 8.53305V6.9331L9.14924 7.78641C9.04715 7.91974 8.8838 7.99973 8.71365 7.99973C8.5435 7.99973 8.38015 7.91974 8.27806 7.78641L7.62466 6.9331V8.53305C7.62466 8.82637 7.37964 9.06637 7.08017 9.06637C6.7807 9.06637 6.53568 8.82637 6.53568 8.53305V5.33316C6.53568 5.10316 6.68541 4.89984 6.90661 4.82651ZM12.7973 6.09313V6.10646C12.8007 6.1098 12.8178 6.13313 12.8722 6.16313C13.0049 6.23979 13.1989 6.29979 13.495 6.38979L13.5154 6.39645C13.7672 6.46978 14.1041 6.56978 14.373 6.73644C14.6826 6.92644 14.9651 7.24309 14.9719 7.73308C14.9787 8.23306 14.7133 8.59971 14.3662 8.80971C14.0429 9.00637 13.6549 9.07303 13.3214 9.06303C12.9062 9.0497 12.5149 8.91637 12.212 8.81637C12.1644 8.79971 12.1201 8.78638 12.0759 8.76971C11.79 8.67638 11.6369 8.37305 11.7322 8.0964C11.8275 7.81974 12.1371 7.66641 12.4196 7.75974C12.4775 7.77974 12.5319 7.79641 12.5864 7.81307C12.896 7.9164 13.1172 7.98973 13.3554 7.9964C13.5358 8.00307 13.6958 7.96307 13.791 7.90307C13.8319 7.8764 13.8523 7.85307 13.8625 7.83641C13.8693 7.82307 13.8829 7.79641 13.8829 7.74641V7.73974C13.8829 7.71641 13.8829 7.69308 13.791 7.63641C13.6617 7.55642 13.4643 7.49308 13.1785 7.40642L13.1377 7.39309C12.8926 7.31976 12.5693 7.22643 12.3107 7.0731C12.0044 6.8931 11.7084 6.58311 11.7084 6.09313C11.705 5.58648 12.001 5.23649 12.3379 5.03983C12.6578 4.8565 13.0356 4.78984 13.3486 4.79317C13.689 4.79984 14.019 4.86984 14.2981 4.93984C14.5874 5.0165 14.7609 5.30649 14.6826 5.59315C14.6044 5.8798 14.3083 6.04647 14.0156 5.9698C13.7672 5.90647 13.5358 5.85981 13.3316 5.85647C13.1649 5.85314 12.9981 5.89314 12.8926 5.95314C12.845 5.9798 12.8212 6.00647 12.811 6.0198C12.8041 6.0298 12.7973 6.04647 12.7973 6.08313V6.09313ZM3.54097 6.09313V6.10646C3.54437 6.1098 3.56139 6.13313 3.61584 6.16313C3.74856 6.23979 3.94253 6.29979 4.2386 6.38979L4.25902 6.39645C4.51085 6.46978 4.84775 6.56978 5.1166 6.73644C5.42628 6.92644 5.70873 7.24309 5.71554 7.73308C5.72234 8.23306 5.4569 8.59971 5.10979 8.80971C4.7865 9.00637 4.39855 9.07303 4.06504 9.06303C3.64647 9.0497 3.2415 8.91304 2.93522 8.80971C2.89098 8.79637 2.85015 8.78304 2.81271 8.76971C2.52685 8.67638 2.37371 8.37305 2.469 8.0964C2.56429 7.81974 2.87397 7.66641 3.15642 7.75974C3.20407 7.77641 3.25171 7.78974 3.29595 7.80641C3.61924 7.91307 3.85746 7.99307 4.10248 7.99973C4.28284 8.0064 4.44279 7.9664 4.53807 7.9064C4.57891 7.87974 4.59933 7.85641 4.60954 7.83974C4.61634 7.82641 4.62996 7.79974 4.62996 7.74974V7.74308C4.62996 7.71974 4.62996 7.69641 4.53807 7.63975C4.40876 7.55975 4.21138 7.49642 3.92552 7.40975L3.88468 7.39642C3.63966 7.32309 3.31637 7.22976 3.05773 7.07643C2.75146 6.89977 2.45539 6.58978 2.45198 6.0998C2.44858 5.59315 2.74465 5.24316 3.08155 5.0465C3.40144 4.86317 3.77919 4.79651 4.09227 4.79984C4.41556 4.80317 4.84775 4.86984 5.15063 4.9465C5.43989 5.02317 5.61345 5.31316 5.53517 5.59981C5.4569 5.88647 5.16084 6.05313 4.86817 5.97647C4.64357 5.91647 4.29645 5.86647 4.07525 5.86314C3.9085 5.85981 3.74175 5.8998 3.63626 5.9598C3.58861 5.98647 3.56479 6.01313 3.55458 6.02647C3.54778 6.03647 3.54097 6.05313 3.54097 6.0898V6.09313Z" fill="#BABABA"/>
                  </svg>
              </span>
              <span class="text" [class.active]="messageType==CommunicationMethod.App" (click)="messageType=CommunicationMethod.App">
                  <svg xmlns="http://www.w3.org/2000/svg" width="17" height="16" viewBox="0 0 17 16" fill="none">
                      <path d="M5.57802 5.62851H11.8475M5.57802 8.75242H10.2801M13.4149 1.72363C14.0384 1.72363 14.6364 1.97048 15.0773 2.40986C15.5183 2.84925 15.766 3.44518 15.766 4.06656V10.3144C15.766 10.9358 15.5183 11.5317 15.0773 11.9711C14.6364 12.4105 14.0384 12.6573 13.4149 12.6573H9.49646L5.57802 15.0002V12.6573H4.01064C3.3871 12.6573 2.7891 12.4105 2.34819 11.9711C1.90728 11.5317 1.65958 10.9358 1.65958 10.3144V4.06656C1.65958 3.44518 1.90728 2.84925 2.34819 2.40986C2.7891 1.97048 3.3871 1.72363 4.01064 1.72363H13.4149Z" stroke="#4DB047" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
              </span>
            </div>
          </div>
          <div class="audio-msg">
            <svg (click)="AddPatientCommunication()" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path d="M17.2611 0.50397L5.78547 4.31647C-1.92849 6.89626 -1.92849 11.1027 5.78547 13.6698L9.19131 14.8009L10.3223 18.2067C12.8894 25.9206 17.1086 25.9206 19.6757 18.2067L23.5009 6.74376C25.2038 1.59689 22.408 -1.21166 17.2611 0.50397ZM17.6678 7.34106L12.8386 12.1956C12.648 12.3863 12.4065 12.4752 12.1651 12.4752C11.9236 12.4752 11.6821 12.3863 11.4915 12.1956C11.3143 12.0163 11.2149 11.7743 11.2149 11.5221C11.2149 11.2699 11.3143 11.0279 11.4915 10.8486L16.3207 5.99397C16.6892 5.62543 17.2992 5.62543 17.6678 5.99397C18.0363 6.36251 18.0363 6.97251 17.6678 7.34106Z" fill="#4DB047"/>
            </svg>
                <!-- Audio Icon -->
              <!-- <svg xmlns="http://www.w3.org/2000/svg" width="21" height="30" viewBox="0 0 21 30" fill="none">
                  <path d="M10.4984 18.3644C13.0165 18.3644 15.0491 16.3137 15.0491 13.7733V4.59109C15.0491 2.05069 13.0165 0 10.4984 0C7.98031 0 5.94764 2.05069 5.94764 4.59109V13.7733C5.94764 16.3137 7.98031 18.3644 10.4984 18.3644ZM19.4633 13.7733C18.7201 13.7733 18.0981 14.3242 17.9768 15.0741C17.3548 18.6704 14.2452 21.4251 10.4984 21.4251C6.75161 21.4251 3.64194 18.6704 3.02 15.0741C2.96651 14.7141 2.78734 14.3853 2.51478 14.1468C2.24223 13.9083 1.89421 13.7758 1.53343 13.7733C0.608108 13.7733 -0.120011 14.5997 0.0165115 15.5179C0.759799 20.109 4.40039 23.7053 8.98147 24.3634V27.5466C8.98147 28.3883 9.66408 29.0769 10.4984 29.0769C11.3327 29.0769 12.0153 28.3883 12.0153 27.5466V24.3634C14.2475 24.0417 16.32 23.0107 17.932 21.4202C19.5441 19.8296 20.6118 17.7622 20.9803 15.5179C21.132 14.5997 20.3887 13.7733 19.4633 13.7733Z" fill="#4DB047"/>
              </svg> -->
          </div>
      </div>
      <div class="w-100"  *ngIf="!gettingHistory && !selectedPatient?.telephonyCommunication">
        <div class="alert alert-danger d-inline-block px-2 py-1 my-1 w-100"  style="border-radius: 6px !important;">
          <span style="font-size: 10px;">SMS Consent is Required,   <strong  (click)="OpenPatientSetting()"><a class="link" style="font-size: 10px;">click here</a></strong></span>
          <!-- <span>Consent for communication via SMS/ Voice has not been taken, click <strong (click)="OpenPatientSetting()"><a class="link" style="font-size: 16px;">here</a></strong> to open setting</span> -->
        </div>
      </div>
  </div>
</div>
