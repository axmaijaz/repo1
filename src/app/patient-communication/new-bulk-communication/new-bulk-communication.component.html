<div class="row">
  <div class="col-md-3 px-0">
    <div class="card">
      <div class="left-side-chat-search">
        <input [(ngModel)]="searchTemplateTerm" (keyup)="searchTemplates()" type="text" placeholder="Search Patient">
        <span class="fa fa-search"></span>
      </div>
      <div class="main-page-height">
        <div class="scroll-page">
          <ng-container *ngIf="gettingTemplates" >
          <skltn-root  duration="1000" [rectRadius]="2" flareWidth="50%" bgFill="#f2f3f8"
            flareFill="rgba(255,255,255, 0.5)">
            <!-- Card with Avatar -->
            <div class="skltn-card message-skltn-card">
              <div class="skltn-card__body"  >
                <div *ngFor="let item of [1,2,3,4,5,6]" skltn-bone class="skltn-card__title"></div>
              </div>
            </div>
          </skltn-root>
        </ng-container>
          <mdb-accordion [multiple]="false">
            <ng-container *ngFor="let group of bulkTemplateGroups">
              <mdb-accordion-item class="my-custom-according-left" [collapsed]="group.collapsed" >
                <mdb-accordion-item-head>{{group.Key}}</mdb-accordion-item-head>
                <mdb-accordion-item-body>
                  <div class="accordion-list-custom" *ngIf="!group.collapsed">
                      <ng-container *ngFor="let item of group.values">
                        <!-- [mdbPopover]="popTemplate" triggers="hover" placement="right" -->
                        <div class="myselect" (click)="AppendTemplate(item, templateAccordionReff)">
                          <span class="name" [mdbPopover]="popTemplatess" triggers="hover" contain="body" container="body"  placement="left" >{{item.title}}</span>
                          <!-- <div class="hover-selected-patient">
                            <div class="selected-box-hover ">
                              <div class="selected-text" [innerHTML]="item.text"></div>
                            </div>
                          </div> -->
                          <!-- <span class="custom-badge">
                            <svg class="mr-1" xmlns="http://www.w3.org/2000/svg" width="11" height="11" viewBox="0 0 11 11" fill="none">
                              <path d="M5.77016 10.4364C5.17263 9.82141 4.83887 8.99744 4.84 8.14C4.84 7.39728 5.08552 6.71132 5.5 6.16H1.32C0.969914 6.16 0.634167 6.29907 0.386619 6.54662C0.139071 6.79417 0 7.12991 0 7.48V7.7946C0 9.43052 1.8524 10.56 4.4 10.56C4.85957 10.5614 5.31827 10.5201 5.77016 10.4364ZM7.04 2.64C7.04 1.93983 6.76186 1.26833 6.26676 0.773238C5.77167 0.278142 5.10017 0 4.4 0C3.69983 0 3.02833 0.278142 2.53324 0.773238C2.03814 1.26833 1.76 1.93983 1.76 2.64C1.76 3.34017 2.03814 4.01167 2.53324 4.50676C3.02833 5.00186 3.69983 5.28 4.4 5.28C5.10017 5.28 5.77167 5.00186 6.26676 4.50676C6.76186 4.01167 7.04 3.34017 7.04 2.64ZM8.14 11C8.89852 11 9.62597 10.6987 10.1623 10.1623C10.6987 9.62597 11 8.89852 11 8.14C11 7.38148 10.6987 6.65403 10.1623 6.11767C9.62597 5.58132 8.89852 5.28 8.14 5.28C7.38148 5.28 6.65403 5.58132 6.11767 6.11767C5.58132 6.65403 5.28 7.38148 5.28 8.14C5.28 8.89852 5.58132 9.62597 6.11767 10.1623C6.65403 10.6987 7.38148 11 8.14 11ZM8.14 6.16C8.19835 6.16 8.25431 6.18318 8.29556 6.22444C8.33682 6.26569 8.36 6.32165 8.36 6.38V7.92H9.9C9.95835 7.92 10.0143 7.94318 10.0556 7.98444C10.0968 8.02569 10.12 8.08165 10.12 8.14C10.12 8.19835 10.0968 8.25431 10.0556 8.29556C10.0143 8.33682 9.95835 8.36 9.9 8.36H8.36V9.9C8.36 9.95835 8.33682 10.0143 8.29556 10.0556C8.25431 10.0968 8.19835 10.12 8.14 10.12C8.08165 10.12 8.02569 10.0968 7.98444 10.0556C7.94318 10.0143 7.92 9.95835 7.92 9.9V8.36H6.38C6.32165 8.36 6.26569 8.33682 6.22444 8.29556C6.18318 8.25431 6.16 8.19835 6.16 8.14C6.16 8.08165 6.18318 8.02569 6.22444 7.98444C6.26569 7.94318 6.32165 7.92 6.38 7.92H7.92V6.38C7.92 6.32165 7.94318 6.26569 7.98444 6.22444C8.02569 6.18318 8.08165 6.16 8.14 6.16Z" fill="white"/>
                            </svg>
                            45
                          </span> -->
                        </div>

                        <ng-template #popTemplatess>
                        <div class="hover-selected-patient">
                          <div class="selected-box-hover ">
                            <div class="selected-text-pop" [innerHTML]="item.text"></div>
                            <!-- <hr class="my-2"> -->
                            <!-- <p class="tags-bottom ml-2"><span>Diabetes</span> <span>Hypertension</span> <span> Obesity</span></p> -->
                            <!-- <div class="pt-2">
                              <span class="custom-badge">
                                <svg class="mr-1" xmlns="http://www.w3.org/2000/svg" width="11" height="11" viewBox="0 0 11 11" fill="none">
                                  <path d="M5.77016 10.4364C5.17263 9.82141 4.83887 8.99744 4.84 8.14C4.84 7.39728 5.08552 6.71132 5.5 6.16H1.32C0.969914 6.16 0.634167 6.29907 0.386619 6.54662C0.139071 6.79417 0 7.12991 0 7.48V7.7946C0 9.43052 1.8524 10.56 4.4 10.56C4.85957 10.5614 5.31827 10.5201 5.77016 10.4364ZM7.04 2.64C7.04 1.93983 6.76186 1.26833 6.26676 0.773238C5.77167 0.278142 5.10017 0 4.4 0C3.69983 0 3.02833 0.278142 2.53324 0.773238C2.03814 1.26833 1.76 1.93983 1.76 2.64C1.76 3.34017 2.03814 4.01167 2.53324 4.50676C3.02833 5.00186 3.69983 5.28 4.4 5.28C5.10017 5.28 5.77167 5.00186 6.26676 4.50676C6.76186 4.01167 7.04 3.34017 7.04 2.64ZM8.14 11C8.89852 11 9.62597 10.6987 10.1623 10.1623C10.6987 9.62597 11 8.89852 11 8.14C11 7.38148 10.6987 6.65403 10.1623 6.11767C9.62597 5.58132 8.89852 5.28 8.14 5.28C7.38148 5.28 6.65403 5.58132 6.11767 6.11767C5.58132 6.65403 5.28 7.38148 5.28 8.14C5.28 8.89852 5.58132 9.62597 6.11767 10.1623C6.65403 10.6987 7.38148 11 8.14 11ZM8.14 6.16C8.19835 6.16 8.25431 6.18318 8.29556 6.22444C8.33682 6.26569 8.36 6.32165 8.36 6.38V7.92H9.9C9.95835 7.92 10.0143 7.94318 10.0556 7.98444C10.0968 8.02569 10.12 8.08165 10.12 8.14C10.12 8.19835 10.0968 8.25431 10.0556 8.29556C10.0143 8.33682 9.95835 8.36 9.9 8.36H8.36V9.9C8.36 9.95835 8.33682 10.0143 8.29556 10.0556C8.25431 10.0968 8.19835 10.12 8.14 10.12C8.08165 10.12 8.02569 10.0968 7.98444 10.0556C7.94318 10.0143 7.92 9.95835 7.92 9.9V8.36H6.38C6.32165 8.36 6.26569 8.33682 6.22444 8.29556C6.18318 8.25431 6.16 8.19835 6.16 8.14C6.16 8.08165 6.18318 8.02569 6.22444 7.98444C6.26569 7.94318 6.32165 7.92 6.38 7.92H7.92V6.38C7.92 6.32165 7.94318 6.26569 7.98444 6.22444C8.02569 6.18318 8.08165 6.16 8.14 6.16Z" fill="white"/>
                                </svg>
                                45
                              </span>
                              <span class="custom-badge ml-2">
                                <svg class="mr-1" xmlns="http://www.w3.org/2000/svg" width="11" height="11" viewBox="0 0 11 11" fill="none">
                                  <path d="M5.77016 10.4364C5.17263 9.82141 4.83887 8.99744 4.84 8.14C4.84 7.39728 5.08552 6.71132 5.5 6.16H1.32C0.969914 6.16 0.634167 6.29907 0.386619 6.54662C0.139071 6.79417 0 7.12991 0 7.48V7.7946C0 9.43052 1.8524 10.56 4.4 10.56C4.85957 10.5614 5.31827 10.5201 5.77016 10.4364ZM7.04 2.64C7.04 1.93983 6.76186 1.26833 6.26676 0.773238C5.77167 0.278142 5.10017 0 4.4 0C3.69983 0 3.02833 0.278142 2.53324 0.773238C2.03814 1.26833 1.76 1.93983 1.76 2.64C1.76 3.34017 2.03814 4.01167 2.53324 4.50676C3.02833 5.00186 3.69983 5.28 4.4 5.28C5.10017 5.28 5.77167 5.00186 6.26676 4.50676C6.76186 4.01167 7.04 3.34017 7.04 2.64ZM8.14 11C8.89852 11 9.62597 10.6987 10.1623 10.1623C10.6987 9.62597 11 8.89852 11 8.14C11 7.38148 10.6987 6.65403 10.1623 6.11767C9.62597 5.58132 8.89852 5.28 8.14 5.28C7.38148 5.28 6.65403 5.58132 6.11767 6.11767C5.58132 6.65403 5.28 7.38148 5.28 8.14C5.28 8.89852 5.58132 9.62597 6.11767 10.1623C6.65403 10.6987 7.38148 11 8.14 11ZM8.14 6.16C8.19835 6.16 8.25431 6.18318 8.29556 6.22444C8.33682 6.26569 8.36 6.32165 8.36 6.38V7.92H9.9C9.95835 7.92 10.0143 7.94318 10.0556 7.98444C10.0968 8.02569 10.12 8.08165 10.12 8.14C10.12 8.19835 10.0968 8.25431 10.0556 8.29556C10.0143 8.33682 9.95835 8.36 9.9 8.36H8.36V9.9C8.36 9.95835 8.33682 10.0143 8.29556 10.0556C8.25431 10.0968 8.19835 10.12 8.14 10.12C8.08165 10.12 8.02569 10.0968 7.98444 10.0556C7.94318 10.0143 7.92 9.95835 7.92 9.9V8.36H6.38C6.32165 8.36 6.26569 8.33682 6.22444 8.29556C6.18318 8.25431 6.16 8.19835 6.16 8.14C6.16 8.08165 6.18318 8.02569 6.22444 7.98444C6.26569 7.94318 6.32165 7.92 6.38 7.92H7.92V6.38C7.92 6.32165 7.94318 6.26569 7.98444 6.22444C8.02569 6.18318 8.08165 6.16 8.14 6.16Z" fill="white"/>
                                </svg>
                                45
                              </span>
                            </div> -->
                          </div>
                        </div>
                        </ng-template>
                      </ng-container>
                  </div>
                </mdb-accordion-item-body>
              </mdb-accordion-item>
            </ng-container>
          </mdb-accordion>
        </div>
      </div>
    </div>
  </div>
  <div class="col-md-6 px-2">
    <div class="card">
      <div class="d-flex py-2 justify-content-between align-items-center">
        <h3 class="main-title">Patient Engagement </h3>
        <button [disabled]="postingCommunication || !newBulkTemplatesList?.length" class="btn m-0 btn-review" (click)="openConfirmModal()">
          <span *ngIf="postingCommunication" class="spinner-border spinner-border-sm" role="status" aria-hidden="true"> </span>
          Send <span class="fa fa-angle-right ml-2"></span>
        </button>
      </div>
      <div class="main-page-height-m">
        <div class="scroll-page">
          <mdb-accordion #templateAccordionReff [multiple]="false">
            <ng-container *ngFor="let template of newBulkTemplatesList">
              <mdb-accordion-item [collapsed]="template.collapsed"  dndDropzone (dndDragover)="onDragover($event)" (dndDrop)="onDrop($event, template)" class="my-custom-according-middle">
                <mdb-accordion-item-head>
                  <span class="selected-title-name" title="{{template.title}}">{{template.title}}</span>
                  <span style="min-width: 60px;" (click)="RemoveAllTagFromTemplate(template);$event.stopPropagation();" class="custom-badge ml-1" *ngIf="template.patientsCount">
                    <svg class="mr-1" xmlns="http://www.w3.org/2000/svg" width="11" height="11" viewBox="0 0 11 11" fill="none">
                      <path d="M5.77016 10.4364C5.17263 9.82141 4.83887 8.99744 4.84 8.14C4.84 7.39728 5.08552 6.71132 5.5 6.16H1.32C0.969914 6.16 0.634167 6.29907 0.386619 6.54662C0.139071 6.79417 0 7.12991 0 7.48V7.7946C0 9.43052 1.8524 10.56 4.4 10.56C4.85957 10.5614 5.31827 10.5201 5.77016 10.4364ZM7.04 2.64C7.04 1.93983 6.76186 1.26833 6.26676 0.773238C5.77167 0.278142 5.10017 0 4.4 0C3.69983 0 3.02833 0.278142 2.53324 0.773238C2.03814 1.26833 1.76 1.93983 1.76 2.64C1.76 3.34017 2.03814 4.01167 2.53324 4.50676C3.02833 5.00186 3.69983 5.28 4.4 5.28C5.10017 5.28 5.77167 5.00186 6.26676 4.50676C6.76186 4.01167 7.04 3.34017 7.04 2.64ZM8.14 11C8.89852 11 9.62597 10.6987 10.1623 10.1623C10.6987 9.62597 11 8.89852 11 8.14C11 7.38148 10.6987 6.65403 10.1623 6.11767C9.62597 5.58132 8.89852 5.28 8.14 5.28C7.38148 5.28 6.65403 5.58132 6.11767 6.11767C5.58132 6.65403 5.28 7.38148 5.28 8.14C5.28 8.89852 5.58132 9.62597 6.11767 10.1623C6.65403 10.6987 7.38148 11 8.14 11ZM8.14 6.16C8.19835 6.16 8.25431 6.18318 8.29556 6.22444C8.33682 6.26569 8.36 6.32165 8.36 6.38V7.92H9.9C9.95835 7.92 10.0143 7.94318 10.0556 7.98444C10.0968 8.02569 10.12 8.08165 10.12 8.14C10.12 8.19835 10.0968 8.25431 10.0556 8.29556C10.0143 8.33682 9.95835 8.36 9.9 8.36H8.36V9.9C8.36 9.95835 8.33682 10.0143 8.29556 10.0556C8.25431 10.0968 8.19835 10.12 8.14 10.12C8.08165 10.12 8.02569 10.0968 7.98444 10.0556C7.94318 10.0143 7.92 9.95835 7.92 9.9V8.36H6.38C6.32165 8.36 6.26569 8.33682 6.22444 8.29556C6.18318 8.25431 6.16 8.19835 6.16 8.14C6.16 8.08165 6.18318 8.02569 6.22444 7.98444C6.26569 7.94318 6.32165 7.92 6.38 7.92H7.92V6.38C7.92 6.32165 7.94318 6.26569 7.98444 6.22444C8.02569 6.18318 8.08165 6.16 8.14 6.16Z" fill="white"/>
                    </svg>
                    {{template.patientsCount}}
                    <svg class="ml-2" xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none">
                      <path d="M6 0C9.3138 0 12 2.6862 12 6C12 9.3138 9.3138 12 6 12C2.6862 12 0 9.3138 0 6C0 2.6862 2.6862 0 6 0ZM4.7274 3.8784C4.61968 3.76965 4.47446 3.70618 4.32147 3.70099C4.16849 3.6958 4.0193 3.74928 3.90445 3.85048C3.7896 3.95168 3.71778 4.09295 3.70368 4.24537C3.68958 4.3978 3.73427 4.54985 3.8286 4.6704L3.879 4.7274L5.151 5.9994L3.879 7.2726C3.77025 7.38033 3.70678 7.52554 3.70159 7.67853C3.6964 7.83151 3.74988 7.9807 3.85108 8.09555C3.95228 8.2104 4.09355 8.28222 4.24597 8.29632C4.3984 8.31042 4.55045 8.26573 4.671 8.1714L4.7274 8.1216L6 6.8484L7.2726 8.1216C7.38033 8.23035 7.52554 8.29382 7.67853 8.29901C7.83151 8.3042 7.9807 8.25072 8.09555 8.14952C8.2104 8.04832 8.28222 7.90705 8.29632 7.75463C8.31042 7.6022 8.26573 7.45015 8.1714 7.3296L8.1216 7.2726L6.8484 6L8.1216 4.7274C8.23035 4.61968 8.29382 4.47446 8.29901 4.32147C8.3042 4.16849 8.25072 4.0193 8.14952 3.90445C8.04832 3.7896 7.90705 3.71778 7.75463 3.70368C7.6022 3.68958 7.45015 3.73427 7.3296 3.8286L7.2726 3.8784L6 5.1516L4.7274 3.8784Z" fill="#5B82BA"/>
                    </svg>
                  </span>
                  <div class="d-inline-flex mr-2 ml-1" style="overflow-x: auto; padding-bottom: 3px;">
                    <span class="big-custom-badge ml-1" *ngFor="let tag of template.tags">
                      <span class="bg-badge">
                        {{tag.patientsCount}}
                      </span>
                      <span class="text-control-elp">{{tag.tagName}}</span>
                      <svg (click)="RemoveTagFromTemplate(tag,template);$event.stopPropagation();" class="ml-2" xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none">
                        <path d="M6 0C9.3138 0 12 2.6862 12 6C12 9.3138 9.3138 12 6 12C2.6862 12 0 9.3138 0 6C0 2.6862 2.6862 0 6 0ZM4.7274 3.8784C4.61968 3.76965 4.47446 3.70618 4.32147 3.70099C4.16849 3.6958 4.0193 3.74928 3.90445 3.85048C3.7896 3.95168 3.71778 4.09295 3.70368 4.24537C3.68958 4.3978 3.73427 4.54985 3.8286 4.6704L3.879 4.7274L5.151 5.9994L3.879 7.2726C3.77025 7.38033 3.70678 7.52554 3.70159 7.67853C3.6964 7.83151 3.74988 7.9807 3.85108 8.09555C3.95228 8.2104 4.09355 8.28222 4.24597 8.29632C4.3984 8.31042 4.55045 8.26573 4.671 8.1714L4.7274 8.1216L6 6.8484L7.2726 8.1216C7.38033 8.23035 7.52554 8.29382 7.67853 8.29901C7.83151 8.3042 7.9807 8.25072 8.09555 8.14952C8.2104 8.04832 8.28222 7.90705 8.29632 7.75463C8.31042 7.6022 8.26573 7.45015 8.1714 7.3296L8.1216 7.2726L6.8484 6L8.1216 4.7274C8.23035 4.61968 8.29382 4.47446 8.29901 4.32147C8.3042 4.16849 8.25072 4.0193 8.14952 3.90445C8.04832 3.7896 7.90705 3.71778 7.75463 3.70368C7.6022 3.68958 7.45015 3.73427 7.3296 3.8286L7.2726 3.8784L6 5.1516L4.7274 3.8784Z" fill="#5B82BA"/>
                      </svg>
                    </span>
                  </div>
                  <span (click)="RemoveTemplate(template);$event.stopPropagation();" class="cross click apply mt-1">
                    <svg xmlns="http://www.w3.org/2000/svg" width="10" height="12" viewBox="0 0 10 12" fill="none">
                      <path d="M9.61927 10.6815C9.38022 10.9206 9.056 11.0549 8.71794 11.0549C8.37988 11.0549 8.05566 10.9206 7.8166 10.6815L5.00053 7.46287L2.18446 10.6805C2.06645 10.8004 1.92585 10.8958 1.77078 10.9612C1.61572 11.0265 1.44925 11.0605 1.28097 11.0612C1.1127 11.0619 0.945962 11.0292 0.790368 10.9652C0.634774 10.9011 0.493406 10.8068 0.374419 10.6878C0.255433 10.5689 0.161182 10.4275 0.097104 10.2719C0.0330256 10.1163 0.000387576 9.94956 0.00107276 9.78129C0.00175794 9.61302 0.0357526 9.44655 0.101096 9.29149C0.166439 9.13642 0.261838 8.99582 0.38179 8.87781L3.31153 5.53167L0.380728 2.1834C0.260776 2.06538 0.165377 1.92479 0.100034 1.76972C0.0346904 1.61465 0.000695752 1.44818 1.05685e-05 1.27991C-0.000674615 1.11164 0.0319635 0.9449 0.0960419 0.789306C0.16012 0.633711 0.254371 0.492344 0.373357 0.373357C0.492344 0.254371 0.633711 0.16012 0.789306 0.0960419C0.9449 0.0319635 1.11164 -0.000674615 1.27991 1.05685e-05C1.44818 0.000695752 1.61465 0.0346904 1.76972 0.100034C1.92479 0.165377 2.06538 0.260776 2.1834 0.380728L5.00053 3.60046L7.8166 0.380728C7.93462 0.260776 8.07521 0.165377 8.23028 0.100034C8.38535 0.0346904 8.55182 0.000695752 8.72009 1.05685e-05C8.88836 -0.000674615 9.0551 0.0319635 9.21069 0.0960419C9.36629 0.16012 9.50766 0.254371 9.62664 0.373357C9.74563 0.492344 9.83988 0.633711 9.90396 0.789306C9.96804 0.9449 10.0007 1.11164 9.99999 1.27991C9.9993 1.44818 9.96531 1.61465 9.89997 1.76972C9.83462 1.92479 9.73922 2.06538 9.61927 2.1834L6.68954 5.53167L9.61927 8.87781C9.73779 8.9962 9.83181 9.13678 9.89596 9.29153C9.96011 9.44628 9.99313 9.61216 9.99313 9.77968C9.99313 9.94719 9.96011 10.1131 9.89596 10.2678C9.83181 10.4226 9.73779 10.5632 9.61927 10.6815Z" fill="#717171"/>
                    </svg>
                  </span>
                </mdb-accordion-item-head>
                <mdb-accordion-item-body>
                  <div class="row">
                    <div class="col-md-4">
                      <button [class.active]="template.selectedTab == 'tempMessage'" (click)="template.selectedTab='tempMessage'" class="btn-templating">
                        <div class="d-inline-flex align-items-center">
                          <svg class="mr-1" xmlns="http://www.w3.org/2000/svg" width="26" height="26" viewBox="0 0 26 26" fill="none">
                            <rect width="26" height="26" rx="8" fill="#4DB047" fill-opacity="0.16"/>
                            <path d="M19.302 9.23673C19.566 8.9727 19.566 8.53266 19.302 8.28217L17.7178 6.69802C17.4673 6.43399 17.0273 6.43399 16.7633 6.69802L15.5176 7.93691L18.0563 10.4756M7.3125 16.1488V18.6875H9.85121L17.3387 11.1932L14.8 8.65452L7.3125 16.1488Z" fill="#4DB047"/>
                          </svg>
                          Message
                        </div>

                        <!-- <span class="custom-badge-number ml-1">5</span> -->
                      </button>
                    </div>
                    <div class="col-md-4">
                      <button [class.active]="template.selectedTab == 'tempPatient'" (click)="template.selectedTab='tempPatient'" class="btn-templating">
                        <div class="d-inline-flex align-items-center">
                          <svg class="mr-1" xmlns="http://www.w3.org/2000/svg" width="26" height="26" viewBox="0 0 26 26" fill="none">
                            <rect width="26" height="26" rx="8" fill="#4DB047" fill-opacity="0.16"/>
                            <path d="M19.0071 16.0896C18.2538 15.2734 17.3396 14.6219 16.322 14.1764C15.3045 13.7309 14.2058 13.5009 13.095 13.5009C11.9842 13.5009 10.8855 13.7309 9.86796 14.1764C8.85045 14.6219 7.93622 15.2734 7.18285 16.0896C7.06654 16.2182 7.00147 16.3851 7 16.5585V19.3715C7.00247 19.5564 7.07765 19.7329 7.20927 19.8628C7.34089 19.9926 7.51836 20.0654 7.70327 20.0654H18.4867C18.6732 20.0654 18.8521 19.9913 18.984 19.8594C19.1159 19.7276 19.19 19.5487 19.19 19.3622V16.5491C19.1863 16.3789 19.1213 16.2158 19.0071 16.0896Z" fill="#4DB047"/>
                            <path d="M13.0944 12.5638C14.907 12.5638 16.3763 11.0945 16.3763 9.28192C16.3763 7.46937 14.907 6 13.0944 6C11.2819 6 9.8125 7.46937 9.8125 9.28192C9.8125 11.0945 11.2819 12.5638 13.0944 12.5638Z" fill="#4DB047"/>
                          </svg>
                          Patients
                        </div>

                        <span *ngIf="template.patients?.length" class="custom-badge-number ml-1">{{template.patients?.length}}</span>

                      </button>
                    </div>
                    <div class="col-md-4">

                      <button [class.active]="template.selectedTab == 'tempReview'" (click)="template.selectedTab='tempReview'" class="btn-templating">
                        <div class="d-inline-flex align-items-center">
                          <svg class="mr-1" xmlns="http://www.w3.org/2000/svg" width="26" height="26" viewBox="0 0 26 26" fill="none">
                            <rect width="26" height="26" rx="8" fill="#4DB047" fill-opacity="0.16"/>
                            <path d="M13.095 7C14.7115 7 16.2618 7.64215 17.4048 8.78518C18.5478 9.92822 19.19 11.4785 19.19 13.095C19.19 14.7115 18.5478 16.2618 17.4048 17.4048C16.2618 18.5478 14.7115 19.19 13.095 19.19C11.4785 19.19 9.92822 18.5478 8.78518 17.4048C7.64215 16.2618 7 14.7115 7 13.095C7 11.4785 7.64215 9.92822 8.78518 8.78518C9.92822 7.64215 11.4785 7 13.095 7ZM13.095 9.61214C12.9845 9.61205 12.8751 9.63501 12.7739 9.67956C12.6728 9.72412 12.582 9.78928 12.5074 9.87089C12.4329 9.9525 12.3761 10.0488 12.3409 10.1535C12.3056 10.2583 12.2926 10.3693 12.3026 10.4794L12.6205 13.9675C12.6328 14.0847 12.6881 14.1933 12.7757 14.2722C12.8633 14.3511 12.9771 14.3947 13.095 14.3947C13.2129 14.3947 13.3267 14.3511 13.4143 14.2722C13.5019 14.1933 13.5572 14.0847 13.5695 13.9675L13.8865 10.4794C13.8965 10.3694 13.8835 10.2585 13.8483 10.1537C13.8131 10.049 13.7565 9.95281 13.682 9.87121C13.6075 9.78961 13.5169 9.72443 13.4158 9.67983C13.3147 9.63522 13.2055 9.61217 13.095 9.61214ZM13.095 16.5779C13.2797 16.5779 13.4569 16.5045 13.5876 16.3738C13.7182 16.2432 13.7916 16.066 13.7916 15.8813C13.7916 15.6965 13.7182 15.5194 13.5876 15.3887C13.4569 15.2581 13.2797 15.1847 13.095 15.1847C12.9103 15.1847 12.7331 15.2581 12.6024 15.3887C12.4718 15.5194 12.3984 15.6965 12.3984 15.8813C12.3984 16.066 12.4718 16.2432 12.6024 16.3738C12.7331 16.5045 12.9103 16.5779 13.095 16.5779Z" fill="#4DB047"/>
                          </svg>
                          Review
                        </div>
                        <span *ngIf="template.previewCount" class="custom-badge-number ml-1">{{template.previewCount}}</span>
                      </button>
                    </div>
                  </div>
                  <div class="row mt-3" *ngIf="template.selectedTab == 'tempMessage'">
                    <div class="col-md-12">
                      <div class="form-group mb-2 d-flex align-items-center">
                        <!-- Material inline 1 -->
                        <p class=" mb-0 mr-3">Select Header </p>
                        <div class="radio-badge-1">
                          <button [class.active]="template.headerType=='none'" (click)="ApplyTemplateHeader(template, 'none')"  class="btn btn-radio-app">None</button>
                          <button [class.active]="template.headerType=='short'" (click)="ApplyTemplateHeader(template, 'short')"  class="btn btn-radio-app active">Short</button>
                          <button [class.active]="template.headerType=='long'" (click)="ApplyTemplateHeader(template, 'long')"  class="btn btn-radio-app">Long</button>
                        </div>
                      </div>
                      <div>
                        <input [(ngModel)]="template.headerText" readonly type="text" class="form-control form-control-sm mb-2">
                      </div>
                    </div>
                    <div class="col-md-7 border-right">
                      <div class="selected-textarea ">
                        <textarea class="my-textarea" rows="8" [(ngModel)]="template.text" template></textarea>
                      </div>
                    </div>
                    <div class="col-md-5">
                      <div class="selected-box ">
                        <!-- <p class="select-right-text mb-1">Peninsula Nephrology Associates</p> -->
                        <div class="selected-text" >
                          <div class="scroll" [innerText]="template.headerText + template.text">

                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- Tab 1 -->
                  <div class="row mt-3" *ngIf="template.selectedTab == 'tempPatient'">
                    <div class="col-md-12 ">
                      <!-- <div class="selectet-patient-taglist mb-3" >
                        <span class="big-custom-badge mr-2" *ngFor="let hero of [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]">
                          <span class="bg-badge">
                            45
                          </span>
                          <span class="text-control-elp"> Hello</span>
                        </span>
                      </div> -->
                      <div class="all-selectet-patient-list" >
                        <div class="selectet-patient-list" *ngFor="let patient of template.patients">
                          <div class="name-msg-avatar">
                            <span class="avatar">
                              <i class="fa fa-user"></i>
                            </span>
                            <div class="show-name-msg">
                              <p class="name-overflow">{{patient.lastName}}, {{patient.firstName}}, {{patient.middleName}}</p>
                              <p class="time">{{patient.dob | dateFormatPipe}}</p>
                              <!-- <p class="name-overflow-md"></p> -->
                            </div>
                          </div>
                          <div class="d-inline-flex mx-1" style="overflow-x: auto;; padding-bottom: 3px;">
                            <span title="{{cond}}" class="custom-badge mr-2" *ngFor="let cond of patient.chronicConditions">
                               {{cond}}
                            </span>
                          </div>
                          <div class=" text-right ml-2">
                            <span  class="cross click apply cursor-pointer" (click)="RemovePatientFromTemplate(patient, template)">
                              <svg xmlns="http://www.w3.org/2000/svg" width="10" height="12" viewBox="0 0 10 12" fill="none">
                                <path d="M9.61927 10.6815C9.38022 10.9206 9.056 11.0549 8.71794 11.0549C8.37988 11.0549 8.05566 10.9206 7.8166 10.6815L5.00053 7.46287L2.18446 10.6805C2.06645 10.8004 1.92585 10.8958 1.77078 10.9612C1.61572 11.0265 1.44925 11.0605 1.28097 11.0612C1.1127 11.0619 0.945962 11.0292 0.790368 10.9652C0.634774 10.9011 0.493406 10.8068 0.374419 10.6878C0.255433 10.5689 0.161182 10.4275 0.097104 10.2719C0.0330256 10.1163 0.000387576 9.94956 0.00107276 9.78129C0.00175794 9.61302 0.0357526 9.44655 0.101096 9.29149C0.166439 9.13642 0.261838 8.99582 0.38179 8.87781L3.31153 5.53167L0.380728 2.1834C0.260776 2.06538 0.165377 1.92479 0.100034 1.76972C0.0346904 1.61465 0.000695752 1.44818 1.05685e-05 1.27991C-0.000674615 1.11164 0.0319635 0.9449 0.0960419 0.789306C0.16012 0.633711 0.254371 0.492344 0.373357 0.373357C0.492344 0.254371 0.633711 0.16012 0.789306 0.0960419C0.9449 0.0319635 1.11164 -0.000674615 1.27991 1.05685e-05C1.44818 0.000695752 1.61465 0.0346904 1.76972 0.100034C1.92479 0.165377 2.06538 0.260776 2.1834 0.380728L5.00053 3.60046L7.8166 0.380728C7.93462 0.260776 8.07521 0.165377 8.23028 0.100034C8.38535 0.0346904 8.55182 0.000695752 8.72009 1.05685e-05C8.88836 -0.000674615 9.0551 0.0319635 9.21069 0.0960419C9.36629 0.16012 9.50766 0.254371 9.62664 0.373357C9.74563 0.492344 9.83988 0.633711 9.90396 0.789306C9.96804 0.9449 10.0007 1.11164 9.99999 1.27991C9.9993 1.44818 9.96531 1.61465 9.89997 1.76972C9.83462 1.92479 9.73922 2.06538 9.61927 2.1834L6.68954 5.53167L9.61927 8.87781C9.73779 8.9962 9.83181 9.13678 9.89596 9.29153C9.96011 9.44628 9.99313 9.61216 9.99313 9.77968C9.99313 9.94719 9.96011 10.1131 9.89596 10.2678C9.83181 10.4226 9.73779 10.5632 9.61927 10.6815Z" fill="#717171"/>
                              </svg>
                            </span>
                            <p *ngIf="patient.lastCommDate" class="date-sm mt-2">{{patient.lastCommDate}}</p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row mt-3" *ngIf="template.selectedTab == 'tempReview'">
                    <div class="col-md-12 ">
                      <!-- <div class="selectet-patient-taglist mb-3" >
                        <span class="big-custom-badge mr-2" *ngFor="let hero of [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]">
                          <span class="bg-badge">
                            45
                          </span>
                          <span class="text-control-elp"> Hello</span>
                        </span>
                      </div> -->
                      <div class="all-selectet-patient-list" >
                        <ng-container *ngFor="let patient of template.patients">
                          <div *ngIf="patient.onStatsuPreview || patient.onDobPreview || patient.reviewNote" class="selectet-patient-list d-block" >
                            <div class="w-100 flex-grow-1 d-flex justify-content-between align-items-center">
                              <div class="name-msg-avatar">
                                <span class="avatar">
                                  <i *ngIf="patient.reviewNote" class="fa fa-pencil"></i>
                                  <i *ngIf="patient.onStatsuPreview" class="fa fa-map-pin"></i>
                                  <i *ngIf="patient.onDobPreview" class="fa fa-birthday-cake"></i>
                                  <!-- <i *ngIf="!patient.telephonyCommunication" class="fa fa-clipboard"></i> -->
                                </span>
                                <div class="show-name-msg">
                                  <p class="name-overflow">{{patient.lastName}}, {{patient.firstName}}, {{patient.middleName}}</p>
                                  <p class="time">{{patient.dob | dateFormatPipe}}</p>
                                  <!-- <p class="name-overflow-md"></p> -->
                                </div>
                              </div>
                              <div class="d-inline-flex mx-2" style="width: 100%;">
                                <input [(ngModel)]="patient.reviewNoteCopy" type="text" class="form-control" placeholder="Remarks" appOnDebounce [debounceTime]="1500" (onDebounce)="EditPatientReviewNote(patient)">
                              </div>
                              <div class=" text-right ml-2">
                                <span  class="cross click apply cursor-pointer" (click)="RemovePatientFromTemplate(patient, template)">
                                  <svg xmlns="http://www.w3.org/2000/svg" width="10" height="12" viewBox="0 0 10 12" fill="none">
                                    <path d="M9.61927 10.6815C9.38022 10.9206 9.056 11.0549 8.71794 11.0549C8.37988 11.0549 8.05566 10.9206 7.8166 10.6815L5.00053 7.46287L2.18446 10.6805C2.06645 10.8004 1.92585 10.8958 1.77078 10.9612C1.61572 11.0265 1.44925 11.0605 1.28097 11.0612C1.1127 11.0619 0.945962 11.0292 0.790368 10.9652C0.634774 10.9011 0.493406 10.8068 0.374419 10.6878C0.255433 10.5689 0.161182 10.4275 0.097104 10.2719C0.0330256 10.1163 0.000387576 9.94956 0.00107276 9.78129C0.00175794 9.61302 0.0357526 9.44655 0.101096 9.29149C0.166439 9.13642 0.261838 8.99582 0.38179 8.87781L3.31153 5.53167L0.380728 2.1834C0.260776 2.06538 0.165377 1.92479 0.100034 1.76972C0.0346904 1.61465 0.000695752 1.44818 1.05685e-05 1.27991C-0.000674615 1.11164 0.0319635 0.9449 0.0960419 0.789306C0.16012 0.633711 0.254371 0.492344 0.373357 0.373357C0.492344 0.254371 0.633711 0.16012 0.789306 0.0960419C0.9449 0.0319635 1.11164 -0.000674615 1.27991 1.05685e-05C1.44818 0.000695752 1.61465 0.0346904 1.76972 0.100034C1.92479 0.165377 2.06538 0.260776 2.1834 0.380728L5.00053 3.60046L7.8166 0.380728C7.93462 0.260776 8.07521 0.165377 8.23028 0.100034C8.38535 0.0346904 8.55182 0.000695752 8.72009 1.05685e-05C8.88836 -0.000674615 9.0551 0.0319635 9.21069 0.0960419C9.36629 0.16012 9.50766 0.254371 9.62664 0.373357C9.74563 0.492344 9.83988 0.633711 9.90396 0.789306C9.96804 0.9449 10.0007 1.11164 9.99999 1.27991C9.9993 1.44818 9.96531 1.61465 9.89997 1.76972C9.83462 1.92479 9.73922 2.06538 9.61927 2.1834L6.68954 5.53167L9.61927 8.87781C9.73779 8.9962 9.83181 9.13678 9.89596 9.29153C9.96011 9.44628 9.99313 9.61216 9.99313 9.77968C9.99313 9.94719 9.96011 10.1131 9.89596 10.2678C9.83181 10.4226 9.73779 10.5632 9.61927 10.6815Z" fill="#717171"/>
                                  </svg>
                                </span>
                                <p *ngIf="patient.lastCommDate" class="date-sm mt-2">{{patient.lastCommDate}}</p>
                              </div>
                            </div>
                            <div class="d-flex w-100 mt-2">
                              <div class="d-inline-flex mx-1" style="overflow-x: auto;; padding-bottom: 3px;">
                                <span title="{{cond}}" class="custom-badge mr-2" *ngFor="let cond of patient.chronicConditions">
                                   {{cond}}
                                </span>
                              </div>
                            </div>
                          </div>
                        </ng-container>
                      </div>
                    </div>
                  </div>
                </mdb-accordion-item-body>
              </mdb-accordion-item>
            </ng-container>
          </mdb-accordion>
        </div>
      </div>
    </div>
  </div>
  <div class="col-md-3 px-0">
    <div class="card">
      <div class="border-round ">
        <div class="d-flex justify-content-between align-items-center px-2 py-1" [class.border-bottom]="!filterCollapsed">
          <p class="mb-0 fil-title">Filter </p>
          <span class="cursor-pointer" (click)="myFilter.toggle();filterCollapsed=!filterCollapsed" >
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="14" viewBox="0 0 16 14" fill="none">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M2.33333 0H13.2222L5.30132 7.92086C5.17341 7.59315 4.96536 7.30274 4.69621 7.0762C4.51887 6.9222 4.27076 6.78298 3.7761 6.50376L1.51044 5.22821C0.772331 4.81365 0.403665 4.60599 0.202222 4.27154C0 3.93632 0 3.53188 0 2.72455V2.18788C0 1.15655 4.6359e-08 0.640109 0.342221 0.319666C0.682887 0 1.23277 0 2.33333 0Z" fill="#4EAF48" fill-opacity="0.69"/>
              <path opacity="0.5" d="M15.5557 2.72532V2.18866C15.5557 1.15733 15.5557 0.640887 15.2135 0.320443C14.8729 -4.6359e-08 14.323 0 13.2224 0L5.30078 7.92086C5.33967 8.0212 5.37078 8.12542 5.39489 8.23431C5.44467 8.45597 5.44467 8.71575 5.44467 9.23453V11.3112C5.44467 12.0182 5.44467 12.3721 5.64067 12.6474C5.83667 12.9235 6.18511 13.0596 6.88044 13.3318C8.34188 13.9027 9.07221 14.1882 9.59177 13.8631C10.1113 13.5387 10.1113 12.796 10.1113 11.3104V9.23375C10.1113 8.71575 10.1113 8.45597 10.1603 8.23431C10.2582 7.78089 10.5045 7.37307 10.8603 7.07542C11.0369 6.9222 11.2842 6.78298 11.7797 6.50376L14.0453 5.22821C14.7826 4.81365 15.1521 4.60599 15.3535 4.27154C15.5557 3.9371 15.5557 3.53266 15.5557 2.72532Z" fill="#4DB047" fill-opacity="0.59"/>
            </svg>
          </span>
        </div>
        <div mdbCollapse #myFilter="bs-collapse" [isCollapsed]="filterCollapsed">
          <p class="filter-radido-title px-2 mt-2">Mode</p>
          <div class="radio-badge px-2">
            <button *hasClaim="['TelephonyCommunication']" [class.active]="filterTagParam.communicationMethod==CommunicationMethod.Telephony" (click)="filterTagParam.communicationMethod=CommunicationMethod.Telephony"  class="btn btn-radio-app active">SMS</button>
            <button [class.active]="filterTagParam.communicationMethod==CommunicationMethod.App" (click)="filterTagParam.communicationMethod=CommunicationMethod.App"  class="btn btn-radio-app">APP</button>
          </div>
          <p class="filter-radido-title px-2">Services</p>
          <div class="radio-badge-1 px-2">
            <button *hasClaim="['ccmService']" [class.active]="filterTagParam.serviceModule==TwoCModulesEnum.CCM" (click)="filterTagParam.serviceModule=TwoCModulesEnum.CCM"  class="btn btn-radio-app">CCM</button>
            <button *hasClaim="['rpmService']" [class.active]="filterTagParam.serviceModule==TwoCModulesEnum.RPM" (click)="filterTagParam.serviceModule=TwoCModulesEnum.RPM"  class="btn btn-radio-app active">RPM</button>
            <button *hasClaim="['bhiService']" [class.active]="filterTagParam.serviceModule==TwoCModulesEnum.BHI" (click)="filterTagParam.serviceModule=TwoCModulesEnum.BHI"  class="btn btn-radio-app">BHI</button>
          </div>
          <p class="filter-radido-title px-2">Communication</p>
          <div class="radio-badge-1 px-2">
            <button [class.active]="filterTagParam.communicationState==CommunicationStateEnum.All" (click)="filterTagParam.communicationState=CommunicationStateEnum.All"  class="btn btn-radio-app active">All</button>
            <button [class.active]="filterTagParam.communicationState==CommunicationStateEnum.InCommunication" (click)="filterTagParam.communicationState=CommunicationStateEnum.InCommunication"  class="btn btn-radio-app">Recent</button>
            <button [class.active]="filterTagParam.communicationState==CommunicationStateEnum.NotCommunicating" (click)="filterTagParam.communicationState=CommunicationStateEnum.NotCommunicating"  class="btn btn-radio-app">Uncommunicated</button>
          </div>
          <div *hasClaim="['TelephonyCommunication', 'ccmService', 'rpmService', 'bhiService']" class="d-flex align-items-center justify-content-end mt-1">
            <button class="btn btn-xs py-1 btn-transparent-btn" (click)="ConfirmResetTagsDataParam()">Reset</button>
            <button class="btn  btn-xs py-1 btn-dynamic-2c" (click)="ConfirmApplyTagsDataParam()">Apply</button>
          </div>
        </div>
      </div>
      <div class="position-relative">
        <div class="left-side-chat-search">
          <input type="text" [(ngModel)]="searchStr"  (keyup)="SearchPatients()"  placeholder="Search Patient">
          <span class="fa fa-search"></span>
          <span *ngIf="searchStr" (click)="searchStr='';SearchPatients()" class="cursor-pointer fa fa-times fa-lg position-absolute"
              style="right: 12px;top: 20px;"></span>
        </div>
        <div *ngIf="searchStr" class="userList searchable-list overflow-y-search" [class.overflow-y-search-clp]="filterCollapsed">
          <ul>
            <li *ngFor="let patient of searchedPatients" [class.active]="patient.selected" [dndDraggable]="patient" [dndEffectAllowed]="draggable.effectAllowed" [dndDisableIf]="patient.selected"
            (dndStart)="onDragStart($event)" (dndCopied)="onDraggableCopied($event)" (dndLinked)="onDraggableLinked($event)"
             (dndMoved)="onDraggableMoved($event)" (dndCanceled)="onDragCanceled($event)" (dndEnd)="onDragEnd($event)">
              <div class="d-flex justify-content-between align-items-center name-search">
                <div class="d-inline-flex align-items-center">
                  <h6 class="m-0 mr-1" title="{{patient.lastName}}, {{patient.firstName}}, {{patient.middleName}}">{{patient.lastName}}, {{patient.firstName}}, {{patient.middleName}}</h6>
                  <span *ngIf="patient.onDobPreview" class="fa fa-clipboard fa-lg text-dynamic-2c"></span>
                  <span *ngIf="patient.reviewNote" class="fa fa-pencil fa-lg text-dynamic-2c"></span>
                  <span *ngIf="patient.onStatsuPreview" class="fa fa-map-pin fa-lg text-dynamic-2c"></span>
                  <!-- <span *ngIf="!patient.telephonyCommunication" class="fa fa-clipboard fa-lg"></span> -->
                </div>

              </div>
              <div class="date-search">
                <p>{{patient.dob | dateFormatPipe}}</p>
              </div>
              <div class="badge-search">
                <span class="custom-badge mr-1" title="{{cond}}" *ngFor="let cond of patient.chronicConditions">
                  {{cond}}
               </span>
              </div>
            </li>
          </ul>
        </div>
      </div>
      <div class=" main-page-height-search" [class.main-page-height-filter]="filterCollapsed" *ngIf="!searchStr">
        <div class="scroll-page">
          <ng-container *ngIf="gettingTags" >
            <skltn-root  duration="1000" [rectRadius]="2" flareWidth="50%" bgFill="#f2f3f8"
              flareFill="rgba(255,255,255, 0.5)">
              <!-- Card with Avatar -->
              <div class="skltn-card message-skltn-card">
                <div class="skltn-card__body"  >
                  <div *ngFor="let item of [1,2,3,4,5,6]" skltn-bone class="skltn-card__title"></div>
                </div>
              </div>
            </skltn-root>
          </ng-container>
          <mdb-accordion [multiple]="true">
            <ng-container *ngFor="let section of bulkTagSections; let index = index;">
              <mdb-accordion-item class="my-custom-according" [collapsed]="section.collapsed">
                <mdb-accordion-item-head>
                  <div class="d-inline-flex">
                      <svg  *ngIf="index==0" class="mr-2" xmlns="http://www.w3.org/2000/svg" width="19" height="19" viewBox="0 0 19 19" fill="none">
                        <mask id="mask0_1460_864" style="mask-type:luminance" maskUnits="userSpaceOnUse" x="0" y="0" width="19" height="19">
                        <path d="M9.5 18C10.6164 18.0014 11.7222 17.7822 12.7536 17.355C13.7851 16.9277 14.7219 16.3008 15.5103 15.5103C16.3008 14.7219 16.9277 13.7851 17.355 12.7536C17.7822 11.7222 18.0014 10.6164 18 9.5C18.0014 8.38356 17.7822 7.27784 17.3549 6.24638C16.9277 5.21493 16.3008 4.27807 15.5103 3.48965C14.7219 2.69917 13.7851 2.07228 12.7536 1.64502C11.7222 1.21777 10.6164 0.998561 9.5 1.00001C8.38356 0.998584 7.27784 1.2178 6.24638 1.64506C5.21493 2.07231 4.27807 2.69919 3.48965 3.48965C2.69919 4.27807 2.07231 5.21493 1.64506 6.24638C1.2178 7.27784 0.998584 8.38356 1.00001 9.5C0.998561 10.6164 1.21777 11.7222 1.64502 12.7536C2.07228 13.7851 2.69917 14.7219 3.48965 15.5103C4.27807 16.3008 5.21493 16.9277 6.24638 17.3549C7.27784 17.7822 8.38356 18.0014 9.5 18Z" fill="white" stroke="white" stroke-width="1.5" stroke-linejoin="round"/>
                        <path d="M6.09961 9.49995L8.64961 12.0499L13.7496 6.94995" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </mask>
                        <g mask="url(#mask0_1460_864)">
                        <path d="M-0.699219 -0.699951H19.7008V19.7H-0.699219V-0.699951Z" fill="#4DB047"/>
                        </g>
                      </svg>
                    <!-- <svg *ngIf="index==0" class="mr-2" xmlns="http://www.w3.org/2000/svg" width="18" height="17" viewBox="0 0 18 17" fill="none">
                      <path d="M17.9607 16.5077L9.29089 0.17577C9.2627 0.122637 9.22084 0.0782381 9.16977 0.04729C9.1187 0.0163419 9.06032 0 9.00082 0C8.94133 0 8.88294 0.0163419 8.83187 0.04729C8.7808 0.0782381 8.73895 0.122637 8.71076 0.17577L0.039309 16.5077C0.0123069 16.5586 -0.00120826 16.6157 8.47925e-05 16.6735C0.00137785 16.7313 0.0174349 16.7878 0.0466861 16.8374C0.0759372 16.887 0.117381 16.9281 0.166967 16.9566C0.216552 16.9851 0.272582 17 0.329579 17H17.6725C17.7293 16.9997 17.7851 16.9844 17.8344 16.9558C17.8837 16.9271 17.9248 16.886 17.9538 16.8365C17.9829 16.7869 17.9987 16.7306 17.9999 16.673C18.0011 16.6154 17.9876 16.5584 17.9607 16.5077ZM9.82408 14.9924H8.17716V13.3222H9.82408V14.9924ZM9.65938 12.3234H8.34185L8.09481 5.64243H9.90642L9.65938 12.3234Z" fill="#FFC008"/>
                    </svg> -->
                      <svg *ngIf="index==1" class="mr-2"  xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 20 20" fill="none">
                        <path d="M4.32172 2.8158e-07H4.94C5.50767 -0.000204628 6.06982 0.111429 6.59433 0.328524C7.11885 0.545619 7.59545 0.863922 7.99693 1.26525C8.3984 1.66658 8.71688 2.14307 8.93416 2.66751C9.15144 3.19195 9.26328 3.75405 9.26328 4.32172V9.26172H4.32328C3.75561 9.26193 3.19347 9.15029 2.66895 8.9332C2.14444 8.7161 1.66783 8.3978 1.26635 7.99647C0.86488 7.59514 0.546405 7.11865 0.329121 6.59421C0.111836 6.06977 2.44598e-07 5.50767 2.81581e-07 4.94V4.32172C2.81581e-07 3.17553 0.455323 2.07628 1.2658 1.2658C2.07628 0.455323 3.17553 2.8158e-07 4.32172 2.8158e-07ZM4.32172 10.4967H9.26172V15.4367C9.26193 16.0043 9.15031 16.5664 8.93325 17.0909C8.71618 17.6154 8.39793 18.092 7.99665 18.4935C7.59538 18.8949 7.11895 19.2134 6.59457 19.4307C6.0702 19.648 5.50814 19.7599 4.94052 19.76H4.32172C3.17553 19.76 2.07628 19.3047 1.2658 18.4942C0.455323 17.6837 2.81581e-07 16.5845 2.81581e-07 15.4383V14.82C-0.000204628 14.2523 0.111429 13.6902 0.328524 13.1657C0.545619 12.6412 0.863922 12.1645 1.26525 11.7631C1.66658 11.3616 2.14307 11.0431 2.66751 10.8258C3.19195 10.6086 3.75405 10.4967 4.32172 10.4967ZM14.82 2.8158e-07H15.4383C16.5845 2.8158e-07 17.6837 0.455323 18.4942 1.2658C19.3047 2.07628 19.76 3.17553 19.76 4.32172V4.94C19.7602 5.50767 19.6486 6.06982 19.4315 6.59433C19.2144 7.11885 18.8961 7.59545 18.4948 7.99693C18.0934 8.3984 17.6169 8.71688 17.0925 8.93416C16.5681 9.15144 16.0059 9.26328 15.4383 9.26328H10.4983V4.32328C10.4981 3.75566 10.6097 3.19355 10.8268 2.66907C11.0438 2.14459 11.3621 1.66801 11.7633 1.26654C12.1646 0.865071 12.6411 0.546585 13.1654 0.32927C13.6898 0.111955 14.2519 6.85425e-05 14.8195 2.8158e-07H14.82ZM10.4967 10.4967H15.4367C16.0045 10.4965 16.5668 10.6082 17.0914 10.8254C17.616 11.0426 18.0927 11.361 18.4942 11.7625C18.8957 12.164 19.2141 12.6407 19.4313 13.1653C19.6485 13.6899 19.7602 14.2522 19.76 14.82V15.4383C19.76 16.5845 19.3047 17.6837 18.4942 18.4942C17.6837 19.3047 16.5845 19.76 15.4383 19.76H14.82C14.2523 19.7602 13.6902 19.6486 13.1657 19.4315C12.6412 19.2144 12.1645 18.8961 11.7631 18.4947C11.3616 18.0934 11.0431 17.6169 10.8258 17.0925C10.6086 16.5681 10.4967 16.0059 10.4967 15.4383V10.4967Z" fill="#FFC008"/>
                        </svg>
                    <svg *ngIf="index==2" class="mr-2" xmlns="http://www.w3.org/2000/svg" width="18" height="19" viewBox="0 0 18 19" fill="none">
                      <path d="M6.76286 4.13143L5.35714 2.70857C5.67155 1.91002 6.21906 1.2246 6.9284 0.741515C7.63774 0.25843 8.47607 4.89559e-05 9.33429 0C11.7 0 13.62 1.92 13.62 4.28571V6H14.4771C14.9318 6 15.3678 6.18061 15.6893 6.5021C16.0108 6.82359 16.1914 7.25963 16.1914 7.71429V13.5429L8.64857 6H11.9057V4.28571C11.9057 2.86286 10.7571 1.71429 9.33429 1.71429C7.97143 1.71429 6.85714 2.78571 6.76286 4.13143ZM18 17.5371L16.9114 18.6257L15.7286 17.4429C15.42 17.7857 14.9743 18 14.4771 18H4.19143C3.24 18 2.47714 17.2371 2.47714 16.2857V7.71429C2.47714 7.25963 2.65775 6.82359 2.97925 6.5021C3.30074 6.18061 3.73677 6 4.19143 6H4.28571L0 1.71429L1.09714 0.625714L18 17.5371ZM10.92 12.6343L8.7 10.4143C8.04857 10.6629 7.62 11.28 7.62 12C7.62 12.4547 7.80061 12.8907 8.1221 13.2122C8.44359 13.5337 8.87963 13.7143 9.33429 13.7143C10.0543 13.7143 10.6714 13.2857 10.92 12.6343Z" fill="#C10015"/>
                      </svg>
                    <svg  *ngIf="index > 2" class="mr-2" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
                      <path d="M9 16.2C7.09044 16.2 5.25909 15.4414 3.90883 14.0912C2.55857 12.7409 1.8 10.9096 1.8 9H3.23842e-06C3.23842e-06 13.9707 4.0293 18 9 18V16.2ZM9 1.80001C10.9096 1.80001 12.7409 2.55857 14.0912 3.90884C15.4414 5.2591 16.2 7.09044 16.2 9H18C18 4.0293 13.9707 5.93271e-06 9 5.93271e-06V1.80001ZM1.8 9C1.79849 8.05425 1.98402 7.11754 2.34592 6.24377C2.70782 5.37 3.23893 4.57642 3.9087 3.9087L2.637 2.637C1.80021 3.4716 1.13649 4.46326 0.683964 5.55505C0.231434 6.64683 -0.00100071 7.81725 3.23842e-06 8.9991H1.8V9ZM3.9087 3.9087C4.57648 3.23901 5.37007 2.70795 6.24383 2.34606C7.11758 1.98417 8.05427 1.79859 9 1.80001V5.93271e-06C7.8179 -0.0013532 6.64719 0.230825 5.55508 0.683205C4.46297 1.13559 3.47099 1.79926 2.6361 2.6361L3.9087 3.9087ZM2.6361 3.9087L14.0913 15.3639L15.3639 14.0913L3.9087 2.6361L2.6361 3.9087ZM16.2 9C16.2015 9.94575 16.016 10.8825 15.6541 11.7562C15.2922 12.63 14.7611 13.4236 14.0913 14.0913L15.3639 15.3639C16.2007 14.529 16.8644 13.537 17.3168 12.4449C17.7692 11.3528 18.0014 10.1821 18 9H16.2ZM14.0913 14.0913C13.4235 14.761 12.6299 15.2921 11.7562 15.6539C10.8824 16.0158 9.94573 16.2014 9 16.2V18C10.1821 18.0014 11.3528 17.7692 12.4449 17.3168C13.537 16.8644 14.529 16.2007 15.3639 15.3639L14.0913 14.0913Z" fill="#6D6D6D"/>
                      </svg>
                    <span class="selected-title-name-right" title="Available">{{section.Key}}</span>
                  </div>
                  <span class="custom-badge mr-5">
                    <svg class="mr-1" xmlns="http://www.w3.org/2000/svg" width="11" height="11" viewBox="0 0 11 11" fill="none">
                      <path d="M5.77016 10.4364C5.17263 9.82141 4.83887 8.99744 4.84 8.14C4.84 7.39728 5.08552 6.71132 5.5 6.16H1.32C0.969914 6.16 0.634167 6.29907 0.386619 6.54662C0.139071 6.79417 0 7.12991 0 7.48V7.7946C0 9.43052 1.8524 10.56 4.4 10.56C4.85957 10.5614 5.31827 10.5201 5.77016 10.4364ZM7.04 2.64C7.04 1.93983 6.76186 1.26833 6.26676 0.773238C5.77167 0.278142 5.10017 0 4.4 0C3.69983 0 3.02833 0.278142 2.53324 0.773238C2.03814 1.26833 1.76 1.93983 1.76 2.64C1.76 3.34017 2.03814 4.01167 2.53324 4.50676C3.02833 5.00186 3.69983 5.28 4.4 5.28C5.10017 5.28 5.77167 5.00186 6.26676 4.50676C6.76186 4.01167 7.04 3.34017 7.04 2.64ZM8.14 11C8.89852 11 9.62597 10.6987 10.1623 10.1623C10.6987 9.62597 11 8.89852 11 8.14C11 7.38148 10.6987 6.65403 10.1623 6.11767C9.62597 5.58132 8.89852 5.28 8.14 5.28C7.38148 5.28 6.65403 5.58132 6.11767 6.11767C5.58132 6.65403 5.28 7.38148 5.28 8.14C5.28 8.89852 5.58132 9.62597 6.11767 10.1623C6.65403 10.6987 7.38148 11 8.14 11ZM8.14 6.16C8.19835 6.16 8.25431 6.18318 8.29556 6.22444C8.33682 6.26569 8.36 6.32165 8.36 6.38V7.92H9.9C9.95835 7.92 10.0143 7.94318 10.0556 7.98444C10.0968 8.02569 10.12 8.08165 10.12 8.14C10.12 8.19835 10.0968 8.25431 10.0556 8.29556C10.0143 8.33682 9.95835 8.36 9.9 8.36H8.36V9.9C8.36 9.95835 8.33682 10.0143 8.29556 10.0556C8.25431 10.0968 8.19835 10.12 8.14 10.12C8.08165 10.12 8.02569 10.0968 7.98444 10.0556C7.94318 10.0143 7.92 9.95835 7.92 9.9V8.36H6.38C6.32165 8.36 6.26569 8.33682 6.22444 8.29556C6.18318 8.25431 6.16 8.19835 6.16 8.14C6.16 8.08165 6.18318 8.02569 6.22444 7.98444C6.26569 7.94318 6.32165 7.92 6.38 7.92H7.92V6.38C7.92 6.32165 7.94318 6.26569 7.98444 6.22444C8.02569 6.18318 8.08165 6.16 8.14 6.16Z" fill="white"/>
                    </svg>
                    {{section.patients?.length || 0}}
                  </span>
                </mdb-accordion-item-head>
                <mdb-accordion-item-body>
                  <div>
                    <!-- <span class="custom-badge-select  mr-2">
                      <svg xmlns="http://www.w3.org/2000/svg" width="11" height="9" viewBox="0 0 11 9" fill="none">
                        <path d="M10.8128 1.11249L4.04557 8.05847C3.98663 8.11918 3.9166 8.16735 3.83948 8.20021C3.76237 8.23308 3.67969 8.25 3.59619 8.25C3.51269 8.25 3.43001 8.23308 3.3529 8.20021C3.27578 8.16735 3.20574 8.11918 3.1468 8.05847L0.186142 5.0196C0.127128 4.95903 0.0803149 4.88712 0.0483766 4.80798C0.0164384 4.72883 8.79381e-10 4.64401 0 4.55835C-8.7938e-10 4.47268 0.0164384 4.38786 0.0483766 4.30872C0.0803149 4.22957 0.127128 4.15766 0.186142 4.09709C0.245156 4.03652 0.315216 3.98847 0.392322 3.95569C0.469428 3.9229 0.552069 3.90603 0.635528 3.90603C0.718987 3.90603 0.801628 3.9229 0.878734 3.95569C0.95584 3.98847 1.0259 4.03652 1.08491 4.09709L3.59672 6.67524L9.91508 0.191059C10.0343 0.0687258 10.1959 0 10.3645 0C10.533 0 10.6947 0.0687258 10.8139 0.191059C10.933 0.313392 11 0.479311 11 0.652316C11 0.825321 10.933 0.99124 10.8139 1.11357L10.8128 1.11249Z" fill="white"/>
                        </svg>
                      All Unselected
                    </span> -->

                    <ng-container *ngFor="let item of section.values">
                      <p class="d-flex justify-content-between align-items-center badge-title cursor-pointer  mt-3 mb-2" (click)="myTags.toggle()">
                        <span>{{item.Key}}</span>
                        <i *ngIf="item.collapsed" class="fa fa-angle-down"></i>
                        <i *ngIf="!item.collapsed" class="fa fa-angle-up"></i>
                      </p>
                      <div mdbCollapse [isCollapsed]="item.collapsed" #myTags="bs-collapse"  >
                        <div  [class.controlheight]="!item.showAll">
                          <ng-container *ngFor="let tag of item.values">
                            <span *ngIf="tag.patientsCount" [dndDraggable]="tag" [dndEffectAllowed]="draggable.effectAllowed" [dndDisableIf]="draggable.disable"
                            (dndStart)="onDragStart($event)" (dndCopied)="onDraggableCopied($event)" (dndLinked)="onDraggableLinked($event)"
                             (dndMoved)="onDraggableMoved($event)" (dndCanceled)="onDragCanceled($event)" (dndEnd)="onDragEnd($event)" title="{{tag.tagName}}" class="big-custom-badge mr-2">
                              <span class="bg-badge">
                                {{tag.patientsCount}}
                              </span>
                             <span class="text-control-elp"> {{tag.tagName}}</span>
                            </span>
                          </ng-container>
                        </div>
                        <span *ngIf="item.values.length > 5" class="big-custom-badge-show mr-2" (click)="heightControl(item)">
                          <span class="bg-badge">
                            <i *ngIf="!item.showAll" class="fa fa-plus"></i>
                            <i *ngIf="item.showAll" class="fa fa-minus"></i>
                          </span>
                         <span class="text-control-elp" > Show <span *ngIf="!item.showAll">All</span><span *ngIf="item.showAll">Less</span></span>
                        </span>
                      </div>

                    </ng-container>
                  </div>
                </mdb-accordion-item-body>
              </mdb-accordion-item>
            </ng-container>
          </mdb-accordion>
        </div>

      </div>
    </div>
  </div>
</div>
