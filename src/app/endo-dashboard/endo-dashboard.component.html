<div class="justify-content-center">
  <div class="row">
    <div class="col-12">
      <div class="d-flex align-items-center flex-wrap justify-content-between mb-3">
        <h1 class="page-title mb-0 flex-sm-grow-1 mb-3">Endo Dashboard</h1>
        <div class="d-flex align-items-center action-button">

          <div *hasClaim="['CanViewCustomList']">
            <div class="dropdown" mdbDropdown [isDisabled]="(!selected || !selected.length)"
              *ngIf="CustomListDto && CustomListDto.length > 0">
              <button mdbDropdownToggle mdbBtn class="btn btn-dynamic-2c btn-sm mr-0" placement="right">Add to Custom List
                <i class="fa fa-angle-down ml-1"></i></button>
              <div class="dropdown-menu ">
                <a class="dropdown-item" *ngFor="let item of CustomListDto"
                  (click)="$event.stopPropagation();AddPatientsToList(item.id)"><i
                    class="fa fa-arrow-alt-circle-up fa-lg mr-1"></i>{{item.name}} </a>
              </div>
            </div>
          </div>
          <button *hasClaim=" ['CanAddPatient']" type="button" class="btn btn-dynamic-2c btn-sm mr-0"
            title="Add Patient" placement="left" [routerLink]="['/admin/addPatient']"
            routerLinkActive="router-link-active"><i class="fa fa-plus fa-lg"></i> Add New</button>
        </div>
      </div>
      <div class="input-group mb-3" style="width: 150px;">
        <input readOnly style="height:32px;width:100px;" type="text" value="{{selectedDate | dateFormatPipe}}"
          class="form-control bg-white" autocomplete="off">
        <div class="input-group-append ">
          <span style="cursor: pointer;border-radius: 0 4px 4px 0;border-color: #ced4da;"
            [dpDayPicker]="datePickerConfig" [theme]="'dp-material ccm-date-picker'" [mode]="'month'"
            (onSelect)="filterByMonth($event)" class="input-group-text bg-white">
            <i class="fa fa-calendar fa-lg"></i>
          </span>
        </div>
      </div>
      <div class="row">
        <div class="d-flex align-items-stretch col-xl-4 col-lg-6 col-md-6 col-sm-6">
          <div class="d-flex align-items-stretch w-100">
            <div class="rpm-content-box rpm-content-box-hover flex-1 d-flex align-items-center justify-content-center"
              [class.active]="filterPatientDto.duration == -1 && filterPatientDto.section == ''"
              (click)="filterPatientDto.section='';filterPatientDto.duration=-1;filterPatientDto.showAll = false;filterPatients()">
              <div class="text-center">
                <p class="mb-0">Active PCM Patients</p>
                <p class="mb-0 item-bold" style="font-size: 20px;">
                  <strong>{{prcmDashboardDataDto.activePatients}}</strong>
                </p>
              </div>
            </div>
            <div class="d-flex flex-wrap rpm-content-box rpm-content-box-hover flex-1 text-center p-0"
              [class.active]="filterPatientDto.duration == -1 && filterPatientDto.section == 'NotStarted'"
              (click)="filterPatientDto.section='NotStarted';filterPatientDto.duration=-1;filterPatientDto.showAll = false;filterPatients()">
              <div class="item-top-centent d-flex justify-content-center align-items-center w-100">
                <p class="mb-0 item-bold text-center"> Not Started </p>
              </div>
              <div class="item-bottom-content d-flex flex-1">
                <div class="completed-min-not-started">
                  <p class="mb-0"> <small>{{prcmDashboardDataDto.notStartedPatients}}</small> </p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-xl-4 col-lg-6 col-md-6 col-sm-6">
          <div class="d-flex">
            <div class="d-flex flex-wrap rpm-content-box flex-1 text-center p-0">
              <div
                class="item-top-centent item-top-centent-hover d-flex justify-content-between align-items-center w-100"
                [class.active]="filterPatientDto.duration == 3 && filterPatientDto.section == 'One'"
                (click)="filterPatientDto.section='One';filterPatientDto.duration= 3;filterPatientDto.showAll = false;filterPatients()">
                <div class="index-value">A</div>
                <div class="index-unit align-items-center">
                  <p class="mb-0 item-bold"> <strong>{{prcmDashboardDataDto.section_One.totalCount}}</strong> </p>
                </div>
                <div class="index-time">
                  <p class="mb-0">30 min Encounter</p>
                </div>
              </div>
              <div class="item-bottom-content d-flex flex-1">
                <div class="completed-min" [class.active]="filterPatientDto.duration == 0"
                  (click)="filterPatientDto.section='One';filterPatientDto.duration= 0;filterPatientDto.showAll = false;filterPatients()">
                  <p class="mb-0"><small
                      class="text-info font-700">{{prcmDashboardDataDto.section_One.subCountOne}}</small></p>
                  <p class="mb-0"><small>1 - 9 min</small></p>
                </div>
                <div class="completed-min" [class.active]="filterPatientDto.duration == 1"
                  (click)="filterPatientDto.section='One';filterPatientDto.duration= 1;filterPatientDto.showAll = false;filterPatients()">
                  <p class="mb-0"><small
                      class="text-info font-700">{{prcmDashboardDataDto.section_One.subCountTwo}}</small></p>
                  <p class="mb-0"><small>10 - 19 min</small></p>
                </div>
                <div class="completed-min" [class.active]="filterPatientDto.duration == 2"
                  (click)="filterPatientDto.section='One';filterPatientDto.duration= 2;filterPatientDto.showAll = false;filterPatients()">
                  <p class="mb-0"><small
                      class="text-info font-700">{{prcmDashboardDataDto.section_One.subCountThree}}</small></p>
                  <p class="mb-0"><small>20 - 29 min</small></p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-xl-4 col-lg-6 col-md-6 col-sm-6">
          <div class="d-flex">
            <div class="d-flex flex-wrap rpm-content-box rpm-content-box-hover flex-1 text-center p-0"
              [class.active]="filterPatientDto.section =='Two'"
              (click)="filterPatientDto.section='Two';filterPatientDto.duration= -1;filterPatientDto.showAll = false;filterPatients()">
              <div class="item-top-centent  d-flex justify-content-between align-items-center w-100">
                <div class="index-value">B</div>
                <div class="index-time text-center w-100">
                  <p class="mb-0 item-bold">> 30 min Encounter</p>

                </div>
              </div>
              <div class="item-bottom-content d-flex flex-1" style="min-height: 42px;">
                <div class="completed-min">
                  <p class="mb-0"><small class="text-info font-700">{{prcmDashboardDataDto.greaterThirtyCount}}</small>
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row d-flex form-group">
        <div class="col-lg-6 col-sm-6">
          <label for="searchBy">Search Patient</label>
          <div class="d-flex align-items-center justify-content-start">
            <input type="text" #searchPatient [(ngModel)]="filterPatientDto.searchParam" autocomplete="off"
              class="form-control form-control-sm box-shadow w-100" id="searchBy" placeholder="Name / EMR ID" />
          </div>
        </div>
        <div class="d-flex align-items-end col-lg-6 col-sm-6">
          <div class="flex-grow-1">
            <label for="namea">Endo Coordinator</label>
            <ng-select class="ng-select-small" [(ngModel)]="filterPatientDto.prCMCareCoordinatorId"
              (ngModelChange)="filterPatients()" [closeOnSelect]="true" [multiple]="false" [searchable]="true"
              placeholder="Care Coordinator">
              <ng-option [value]="0">All </ng-option>
              <ng-option *ngFor="let item of (facilityUsersList | filterFUsersByRole: 'Care Coordinator')"
                [value]="item.id">{{item.lastName}},{{item.firstName}}
              </ng-option>
            </ng-select>
          </div>
          <div  class="d-inline-flex">
          <button appDebounceClick (debounceClick)="principal.toggle()" type="button"
            class="btn btn-dynamic-2c btn-sm my-0 flex-shrink-0 mr-0">
            <i class="fa fa-filter fa-lg"></i> Filter
          </button>
          <button type="button" class="btn btn-dynamic-secondary-2c btn-sm my-0 flex-shrink-0"
          (click)="resetFilter(); filterPatients()"><i class="fa fa-refresh fa-lg"></i> Reset</button>
          </div>
        </div>
      </div>

      <div class="search-filter collapseable" mdbCollapse #principal="bs-collapse">
        <div class="panel" style="overflow: visible;">
          <div class="panel-header d-flex justify-content-between align-items-center">
            <h3>Search Filter</h3>
            <div>
              <button type="button" class="close pull-right" aria-label="Close" (click)="principal.hide()">
                <span aria-hidden="true">Ã—</span>
              </button>
            </div>
          </div>
          <div class="panel-body">
            <div class="row">
              <div class="col-xl-3 col-lg-6 col-sm-6">
                <div class="form-group">
                  <label for="namee">Insurance</label>
                  <ng-select class="ng-select-small" id="measure" [searchable]="false"
                    [(ngModel)]="filterPatientDto.payerIds" [multiple]="false" placeholder="Select Measure"
                    [closeOnSelect]="false" [multiple]="true">
                    <ng-option [value]="0">None</ng-option>
                    <ng-option [value]="item.payerId" *ngFor="let item of insurancePLanList">{{item.payerName}}
                    </ng-option>
                  </ng-select>
                </div>
              </div>
              <div class="col-xl-3 col-lg-6 col-sm-6">
                <div class="form-group">
                  <label for="age">Age</label>
                  <ng-select class="ng-select-small" appendTo="body" [(ngModel)]="filterPatientDto.age"
                    [closeOnSelect]="true" [multiple]="false" [searchable]="true" placeholder="Age">
                    <ng-option [value]="'0'">All</ng-option>
                    <ng-option [value]="'1-17'">1 â€“ 17</ng-option>
                    <ng-option [value]="'18-75'">18 - 75</ng-option>
                    <ng-option [value]="'custom'">Custom</ng-option>

                  </ng-select>
                </div>
              </div>
              <ng-container *ngIf="filterPatientDto.age == 'custom'">
                <div class="row">
                  <div class="col-6">
                    <div class="form-group">
                      <label for="age">From<sup class="text-danger">*</sup></label>
                      <input type="text" OnlyNumbers [(ngModel)]="ageFrom" autocomplete="off"
                        class="form-control form-control-sm box-shadow w-100" id="searchBy" placeholder="From" />
                    </div>
                  </div>
                  <div class="col-6">
                    <div class="form-group">
                      <label for="age">To<sup class="text-danger">*</sup></label>
                      <input type="text" OnlyNumbers [(ngModel)]="ageTo" autocomplete="off"
                        class="form-control form-control-sm box-shadow w-100" id="searchBy" placeholder="To" />
                    </div>
                  </div>
                </div>

              </ng-container>
              <div class="col-xl-3 col-lg-6 col-sm-6">
                <div class="form-group">
                  <label for="namee">Endo Specialist</label>
                  <ng-select class="ng-select-small" appendTo="body"
                    [(ngModel)]="filterPatientDto.prCMSpecialistBillerId" [closeOnSelect]="true" [multiple]="false"
                    [searchable]="true" placeholder="Specialist Biller">
                    <ng-option [value]="0">All</ng-option>
                    <ng-option [value]="item.id"
                      *ngFor="let item of (facilityUsersList | filterFUsersByRole: 'Biller')">{{item.lastName}},{{item.firstName}} </ng-option>
                  </ng-select>
                </div>
              </div>
              <div class="col-xl-3 col-lg-6 col-sm-6">
                <div class="form-group">
                  <label for="namee">Endo Facilitator</label>
                  <ng-select class="w-100 ng-select-small " [(ngModel)]="filterPatientDto.prCMCareFacilitatorId"
                    [closeOnSelect]="true" [multiple]="false" [searchable]="true" placeholder="Clinical Facilitator">
                    <ng-option [value]="0">All </ng-option>
                    <ng-option *ngFor="let item of (facilityUsersList | filterFUsersByRole: 'Care Facilitator')"
                      [value]="item.id">{{item.lastName}},{{item.firstName}}
                    </ng-option>
                  </ng-select>
                </div>
              </div>
              <!-- <div class="col-xl-3 col-lg-6 col-sm-6">
                <div class="form-group">
                  <label for="namee">Endo Coordinator</label>
                  <ng-select class="w-100 ng-select-small" [(ngModel)]="filterPatientDto.prCMCareCoordinatorId"
                    [closeOnSelect]="true" [multiple]="false" [searchable]="true" placeholder="Care Coordinator">
                    <ng-option [value]="0">All </ng-option>
                    <ng-option *ngFor="let item of (facilityUsersList | filterFUsersByRole: 'Care Coordinator')"
                      [value]="item.id">{{item.lastName}},{{item.firstName}}
                    </ng-option>
                  </ng-select>
                </div>
              </div> -->
              <!-- <div class="col-xl-3 col-lg-6 col-sm-6">
                <div class="form-group">
                  <label for="namea">Month</label>
                  <ng-select [searchable]="false" [closeOnSelect]="true" [(ngModel)]="filterPatientDto.serviceMonth"
                    [multiple]="false" appendTo="body" class="ng-select-small" placeholder="Month"
                    (click)="$event.stopPropagation();" style="min-width:200px">
                    <ng-option [value]="1">January</ng-option>
                    <ng-option [value]="2">February</ng-option>
                    <ng-option [value]="3">March</ng-option>
                    <ng-option [value]="4">April</ng-option>
                    <ng-option [value]="5">May</ng-option>
                    <ng-option [value]="6">June</ng-option>
                    <ng-option [value]="7">July</ng-option>
                    <ng-option [value]="8">August</ng-option>
                    <ng-option [value]="9">September</ng-option>
                    <ng-option [value]="10">October</ng-option>
                    <ng-option [value]="11">November</ng-option>
                    <ng-option [value]="12">December</ng-option>
                  </ng-select>
                </div>
              </div>
              <div class="col-xl-3 col-lg-6 col-sm-6">
                <div class="form-group">
                  <label for="namea">Year</label>
                  <ng-select [searchable]="false" [(ngModel)]="filterPatientDto.serviceYear" [appendTo]="'body'"
                    class="ng-select-small" placeholder="Year" [closeOnSelect]="true" [multiple]="false"
                    (click)="$event.stopPropagation();" style="min-width:200px">
                    <ng-option *ngFor="let year of listOfYears" [value]="year">{{year}}</ng-option>
                  </ng-select>
                </div>
              </div> -->
              <div class="col-xl-3 col-lg-6 col-sm-6">
                <div class="form-group">
                  <label for="isChronic1">Select Chronic Condition</label>
                  <ng-select [readonly]="disableChronicFilter" [virtualScroll]="true"
                    [(ngModel)]="filterPatientDto.dashboardConditionsIds" [ngModelOptions]="{standalone: true}"
                    [clearable]="false" [hideSelected]="false"
                    (ngModelChange)="applyChronicFilterLogic();getDependentDiseases(filterPatientDto.dashboardConditionsIds)"
                    [multiple]="true" [searchable]="true" placeholder="Select chronic Condition" id="isChronic1">
                    <ng-option [value]="'0'">All</ng-option>
                    <ng-option [value]="item.id" *ngFor="let item of cronicDiseaseList">{{item.algorithm}}</ng-option>
                  </ng-select>
                </div>
              </div>
              <div class="col-xl-3 col-lg-6 col-sm-6">
                <div class="form-group">
                  <label for="isChronic23">Select ICD Codes</label>
                  <ng-select [(ngModel)]="filterPatientDto.dashboardDiseaseIds" [virtualScroll]="true"
                    [hideSelected]="false" [multiple]="true" [loading]="LoadingData" [searchable]="true"
                    (ngModelChange)="applyICDFilterLogic();" [ngModelOptions]="{standalone: true}"
                    placeholder="Select Chronic Disease" id="isChronic23">
                    <ng-option [value]="'0'">All</ng-option>
                    <ng-option [value]="item.id" *ngFor="let item of chronicDependentDiseases">{{item.icdCode}}
                      {{item.detail}}
                    </ng-option>
                  </ng-select>
                </div>
              </div>
              <div class="col-xl-3 col-lg-6 col-sm-6">
                <div class="form-group mb-0">
                  <label class="w-100">Encounter From</label>
                  <input type="text" [(ngModel)]="filterPatientDto.encounterDateFrom"
                    class="form-control form-control-sm" #dateDPicker="dpDayPicker" [dpDayPicker]="datePickerConfig2"
                    placeholder="MM-DD-YYYY" [theme]="'dp-material ccm-date-picker'" [mode]="'day'" />

                </div>
              </div>
              <div class="col-xl-3 col-lg-6 col-sm-6">
                <div class="form-group mb-0">
                  <label class="w-100">Encounter To</label>
                  <input type="text" [(ngModel)]="filterPatientDto.encounterDateTo" class="form-control form-control-sm"
                    #dateDPicker="dpDayPicker" [dpDayPicker]="datePickerConfig2" placeholder="MM-DD-YYYY"
                    [theme]="'dp-material ccm-date-picker'" [mode]="'day'" />

                </div>
              </div>
              <div class="col-xl-3 col-lg-6 col-sm-6 ">
                <div class="btn-group" style="padding-top: 1.85rem;">
                  <button type="button" class="btn btn-dynamic-2c btn-sm my-0 flex-shrink-0"
                    [disabled]="filterPatientDto.age == 'custom' && (!ageTo || !ageFrom)"
                    (click)="filterPatients(); scrollToTable();"><i class="fa fa-filter fa-lg"></i> Search</button>
                  <!-- <button type="button"  class="btn btn-dynamic-secondary-2c btn-sm my-0 flex-shrink-0 float-right"
                    (click)="getPatientListExcelFile()"> Download</button> -->

                </div>
              </div>
              <!-- <div class="col ml-auto align-self-end">
                <button class="d-flex ml-auto btn btn-dynamic-2c btn-sm mx-0" title="{{'abcd'}} Patients"
                  >Download</button>
              </div> -->

            </div>
          </div>


        </div>
      </div>
      <div class="row" style="position: relative;
      top: 35px;">
        <div class="col-xl-4 col-lg-4">
          <mdb-checkbox class="ml-auto" [default]="true" [(ngModel)]="filterPatientDto.showAll"
            (change)="filterPatients()">
            Show All</mdb-checkbox>
        </div>
      </div>
      <div class="position-relative patients-list" style="padding-top: 40px !important;">
        <div class="d-flex align-items-center col-xl-8 col-lg-8 col-sm-12 custom-list-dropdown px-0">
          <app-custom-list-for-patient-lists #customListForPatientsListCompRef  *hasClaim="['CanViewCustomList']" (deselectRows)="deselectCheckedRows()" (selectedCustomList)="fillCustomListValue($event)"></app-custom-list-for-patient-lists>
        </div>
        
      </div>

      <div appCcmLoader>
        <div class="loader-wrap" *ngIf="loadingOnStart">
          <div class="text-dynamic-2c la-ball-pulse ccm-loader">
            <div></div>
            <div></div>
            <div></div>
          </div>
        </div>
      </div>
      <div class="position-relative">
        <div *ngIf="isLoading" style="top: 65px;" class="d-flex justify-content-center text-center loadingrow">
          <mdb-progress-bar class="progress primary-color-dark mb-0" mode="indeterminate"></mdb-progress-bar>
        </div>
        <table datatable [dtOptions]="dtOptions" id="example" [dtTrigger]="dtTrigger"
          class="cell-border hover text-nowrap ccm-datatable">
          <thead>
            <tr>
              <th>ID</th>
              <th title="Patient Name">
                <span style="white-space: nowrap; display: block;width:214px;">Patient</span>
              </th>
              <th>
                <div class="text-center">
                  <div class="custom-control custom-checkbox">
                    <input class="custom-control-input" type="checkbox" id="selectAll2" [(ngModel)]="gridCheckAll"
                      (change)="gridAllRowsCheckBoxChecked($event)">
                    <label class="custom-control-label" for="selectAll2"></label>
                  </div>
                </div>
              </th>
              <th title="Endo Facilitator ">CF</th>
              <th title="Endo Coordinator ">CC</th>
              <th title="Endo Specialist ">ES</th>
              <th title="Assign Date">Assign Date</th>
              <th title="PCM Status ">Status</th>
              <th title="Total Time (Month) ">Time</th>
              <th title="BMI ">BMI</th>
              <th title="HBA1c ">A1C</th>
              <th title="Nephropathy value ">DN</th>
              <th title="LDL Value ">LD</th>
              <th title="Retinopathy status ">DE</th>
              <!-- <th>ICD Codes</th> -->
              <!-- <th>Next due</th>
              <th>Result</th>
              <th>Note</th> -->
              <!-- <th>Action</th> -->
            </tr>
          </thead>
          <tbody>
            <!-- <tr>
              <td colspan="12" class="p-0">
                <div class="d-flex justify-content-center text-center">
                  <mdb-progress-bar class="progress primary-color-dark mb-0" mode="indeterminate"></mdb-progress-bar>
                </div>
              </td>
            </tr> -->
            <tr *ngFor="let row of rows; let i = index" [ngClass]="{disabledDiv: row.isDeletedState}">
              <!-- (click)="row.checked = !row.checked; selectRow(row)" -->
              <td>
                <small class="mr-3">{{ i + 1 + rowIndex }}</small>
              </td>
              <td>
                <div class="d-flex justify-content-between align-items-center">
                  <!-- <small class="mr-3">{{(i + 1) + rowIndex}}</small> -->
                  <!-- <span *ngIf="row.profileStatus" class="status-bullet bg-success" title="Profile Complete"></span>
                  <span *ngIf="!row.profileStatus" class="status-bullet bg-danger" title="Profile Incomplete"></span> -->
                  <!-- [ngClass]="{rowBackgroundColorDiv: row.isDeleted}" -->
                  <a class="mb-0 text-capitalize link text-dynamic-2c text-left ml-2"
                    style="white-space: nowrap; width: 150px;" (click)="onClickRow(row, $event)"
                    [ngClass]="{rowBackgroundColorDiv: row.isDeletedState}">
                    {{ row.fullName }}</a>
                  <div>
                    <button [disabled]="row.isPrCMRevoked" class="btn btn-dynamic-2c btn-icon my-1 mr-1"
                      (click)="selectedPatientData=row;viewPatient(row); editPRCM2.show()"><i
                        class="fa fa-pencil"></i></button>
                    <button (click)="selectedPatientData=row;quickEncounterModal.show();durationNO=null"
                      title="Create Encounter" class="btn btn-dynamic-2c btn-icon my-1 ml-0">
                      <i class="fa fa-bolt"></i>
                    </button>
                    <button class="btn btn-dynamic-2c btn-icon m-0 my-1 " (click)="ProceedNavigation(row)"><i
                        class="fa fa-eye"></i></button>
                  </div>
                </div>
              </td>
              <td>
                <div class="text-center">
                  <div class="custom-control custom-checkbox">
                    <input class="custom-control-input" type="checkbox" id="i{{(i + 1) + rowIndex}}"
                      [(ngModel)]="row['checked']" (click)="rowCheckBoxChecked($event, row)">
                    <label class="custom-control-label" for="i{{(i + 1) + rowIndex}}"></label>
                  </div>
                </div>
              </td>
              <td>
                <div class="user-name-list" *ngIf="row.end_PrCMCareFacilitatorAbbreviation ">
                  <div title="{{row.end_PrCMCareFacilitatorName}}" class="name-caption">
                    <span>{{row.end_PrCMCareFacilitatorAbbreviation}}</span>
                  </div>
                </div>
                <!-- {{ row.psychiatristName }} -->
              </td>
              <td>
                <div class="user-name-list">
                  <div title="{{cc.fullName}}" class="name-caption" *ngFor="let cc of row.careCoordinators">
                    <span>{{cc['nameAbbreviation']}}</span>
                  </div>
                </div>
                <!-- {{ row.psychiatristName }} -->
              </td>
              <td>
                <div class="user-name-list" *ngIf="row.end_PrCMSpecialistBillerAbbreviation ">
                  <div title="{{row.end_PrCMSpecialistBillerName}}" class="name-caption">
                    <span>{{ row.end_PrCMSpecialistBillerAbbreviation }}</span>
                  </div>
                </div>
                <!-- {{ row.PRCMCareManagerName }} -->
              </td>
              <td>
                <div class="d-flex justify-content-start align-items-center" style="width: 100px;">
                  <ng-container>
                    <a class="" (click)="assignedDateProp=row.dateAssigned;changeStatus(row);endoassignedDateModal.show();"><i
                        class="fa fa-calendar text-dynamic-secondary-2c mx-2" style="font-size: 20px;"></i></a>
                  </ng-container>
                  <span>{{row.dateAssigned | dateFormatPipe}}</span>
                </div>
              </td>
              <td>
                {{ PRCMStatusEnum[row.prCMStatus] }}
              </td>
              <td>{{ row.currentMonthCompletedTimeString }}</td>
              <td>
                <div class="d-flex align-items-center">
                  <p class="mb-0 text-center mr-1" *ngIf="row.bmi && row.bmi.value">
                    <span class="badge badge-success"
                      *ngIf="row.bmi.valueInNumber > 16 && row.bmi.valueInNumber <= 25">{{ row.bmi.valueInNumber
                      }}</span>
                    <span class="badge badge-warning"
                      *ngIf="row.bmi.valueInNumber	> 25 && row.bmi.valueInNumber <= 30">{{ row.bmi.valueInNumber
                      }}</span>
                    <span class="badge badge-danger"
                      *ngIf=" row.bmi.valueInNumber <= 16 || (row.bmi.valueInNumber	> 30 && row.bmi.valueInNumber <= 40) || row.bmi.valueInNumber	> 40">{{
                      row.bmi.valueInNumber }}</span>
                  </p>
                  <p class="mb-0 text-center" *ngIf="row.bmi && row.bmi.lastReadingDate">
                    <!-- <span >{{ row.bmi.lastReadingDate | dateFormatPipe }} </span> -->
                    <span *ngIf="row.bmi.NoOfMonth > 6" class="badge badge-danger">{{ row.bmi.lastReadingDate | dateFormatPipe }} </span>
                    <span *ngIf="row.bmi.NoOfMonth <= 6" class="badge badge-success">{{ row.bmi.lastReadingDate | dateFormatPipe }} </span>
                    <!-- <span class="badge badge-danger">{{ row.bmi.lastReadingDate | dateFormatPipe }} </span>  -->
                  </p>
                </div>

              </td>
              <td>
                <div class="d-flex align-items-center">
                  <p class="mb-0 text-center mr-1" *ngIf="row.a1C && row.a1C.value">
                    <span class="badge badge-success" *ngIf="row.a1C.valueInNumber <= 7">{{ row.a1C.valueInNumber
                      }}</span>
                    <span class="badge badge-warning"
                      *ngIf="row.a1C.valueInNumber > 7 && row.a1C.valueInNumber <= 8 ">{{ row.a1C.valueInNumber
                      }}</span>
                    <span class="badge badge-danger"
                      *ngIf="(row.a1C.valueInNumber > 8 && row.a1C.valueInNumber <= 9) || row.a1C.valueInNumber > 9">{{
                      row.a1C.valueInNumber }}</span>
                  </p>
                  <p class="mb-0 text-center " *ngIf="row.a1C && row.a1C.lastReadingDate">
                    <span *ngIf="row.a1C.NoOfMonth > 6" class="badge badge-danger">{{ row.a1C.lastReadingDate | dateFormatPipe }} </span>
                    <span *ngIf="row.a1C.NoOfMonth <= 6" class="badge badge-success">{{ row.a1C.lastReadingDate | dateFormatPipe }} </span>
                  </p>
                </div>

                <!-- <span [ngClass]="{'badge badge-danger' : row.a1C.NoOfMonth > 6}">{{ row.a1C.lastReadingDate | dateFormatPipe }} </span> </p> -->
              </td>
              <td>
                <div class="d-flex align-items-center">
                  <p class="mb-0 text-center mr-1" *ngIf="row.dn && row.dn.value">
                    <span class="badge badge-success" *ngIf="row.dn.valueInNumber <= 30 ">{{ row.dn.valueInNumber
                      }}</span>
                    <span class="badge badge-warning"
                      *ngIf="row.dn.valueInNumber > 30 && row.dn.valueInNumber <= 300 ">{{ row.dn.valueInNumber
                      }}</span>
                    <span class="badge badge-danger" *ngIf="row.dn.valueInNumber > 300">{{ row.dn.valueInNumber
                      }}</span>
                  </p>
                  <p class="mb-0 text-center" *ngIf="row.dn && row.dn.lastReadingDate">
                    <span *ngIf="row.dn.NoOfMonth > 6" class="badge badge-danger">{{ row.dn.lastReadingDate | dateFormatPipe }} </span>
                    <span *ngIf="row.dn.NoOfMonth <= 6" class="badge badge-success">{{ row.dn.lastReadingDate| dateFormatPipe }} </span>
                  </p>
                </div>

              </td>
              <td>
                <div class="d-flex align-items-center">
                  <p class="mb-0 text-center mr-1" *ngIf="row.ld && row.ld.value">
                    <span class="badge badge-success" *ngIf="row.ld.valueInNumber <= 100">{{ row.ld.valueInNumber
                      }}</span>
                    <span class="badge badge-danger" *ngIf="row.ld.valueInNumber > 100">{{ row.ld.valueInNumber
                      }}</span>
                  </p>
                  <p class="mb-0 text-center" *ngIf="row.ld && row.ld.lastReadingDate">
                    <span *ngIf="row.ld.NoOfMonth > 6" class="badge badge-danger">{{ row.ld.lastReadingDate| dateFormatPipe }} </span>
                    <span *ngIf="row.ld.NoOfMonth <= 6" class="badge badge-success">{{ row.ld.lastReadingDate | dateFormatPipe }} </span>
                    <!-- <span [ngClass]="{'badge badge-danger' : row.ld.NoOfMonth > 6}">{{ row.ld.lastReadingDate | dateFormatPipe }} </span> -->
                  </p>
                </div>

              </td>
              <td>
                <div class="d-flex align-items-center">

                  <p class="mb-0 text-center mr-1" *ngIf="row.de && row.de.value">
                    <span class="badge badge-warning" *ngIf="row.de.value == 'Mild Retinopathy'">{{ row.de.value
                      }}</span>
                    <span class="badge badge-danger" *ngIf="row.de.value == 'Severe Retinopathy '">{{ row.de.value
                      }}</span>
                    <span class="badge badge-light-red" *ngIf="row.de.value == 'Moderate Retinopathy '">{{ row.de.value
                      }}</span>
                  </p>

                  <!-- <p class="mb-0 text-center mr-1" *ngIf="row.de && row.de.value"><span class="badge badge-primary">{{ row.de.value }}</span></p> -->
                  <p class="mb-0 text-center" *ngIf="row.de && row.de.lastReadingDate">
                    <!-- <span [ngClass]="{'badge badge-danger' : row.dn.NoOfMonth > 12}">{{ row.de.lastReadingDate | dateFormatPipe}} </span> -->
                    <span *ngIf="row.de.NoOfMonth > 12" class="badge badge-danger">{{ row.de.lastReadingDate | dateFormatPipe }} </span>
                    <span *ngIf="row.de.NoOfMonth <= 12" class="badge badge-success">{{ row.de.lastReadingDate | dateFormatPipe }} </span>
                  </p>
                </div>

              </td>


              <!-- <td>
                <div class="row">
                  <div class="action-button d-flex justify-content-center">
                    <button [disabled]="row.isPRCMRevoked" class="btn btn-dynamic-2c btn-icon my-1"
                      (click)="viewPatient(row); editPRCM.show()"><i class="fa fa-pencil"></i></button>
                  </div>
                  <div class="action-button d-flex justify-content-center">
                    <button [disabled]="row.PRCMStatus < 1 || (row.PRCMStatus !== 3 && row.PRCMStatus !== 4) || row.isPRCMRevoked"
                      class="btn btn-dynamic-2c btn-icon my-1" (click)="ProceedNavigation(row)"><i
                        class="fa fa-eye"></i></button>
                  </div>
                </div>
              </td> -->
            </tr>
          </tbody>
          <!-- <tbody *ngIf="rows.length === 0">
            <td class="bg-white p-3 text-danger" colspan="12">No Record Found</td>
          </tbody> -->
        </table>
      </div>
    </div>
  </div>
</div>
<div mdbModal #assignedDateModal2="mdbModal" class="modal fade" tabindex="-1" role="dialog"
  (opened)="datPickerRef.openBtnClicked()" aria-labelledby="myBasicModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title w-100 text-center" id="myModalLabel">Assigned Date
        </h4>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-sm-12">
            <div class="input-group form-group mt-3">
              <label class="w-100">Patient Assigned Date<small class="text-danger">*</small></label>
              <mdb-date-picker #datPickerRef class="custom-datepicker" [options]="myDatePickerOptions"
                [(ngModel)]="assignedDateProp" [outlineInput]="true" [inline]="true" name="mydate"
                [placeholder]="'Patient Assiged Date'">
              </mdb-date-picker>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" [disabled]="assigningDate" class="waves-light btn btn-sm btn-dynamic-2c"
          aria-label="Close" (click)="SaveAssignedDate(assignedDateModal2);" mdbWavesEffect> <span *ngIf="assigningDate"
            class="mr-1 spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Save</button>
        <button type="button" class="waves-light btn btn-sm btn-dynamic-secondary-2c" aria-label="Close"
          (click)="assignedDateModal2.hide()" mdbWavesEffect>Close</button>
        <!-- <butmdbModalton type="button" mdbBtn color="priary" (click)="addRequiredData()" class="relative waves-light"
          mdbWavesEffect>Add Data</button> -->
      </div>
    </div>
  </div>
</div>

<div mdbModal #editPRCM2="mdbModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myeditPRCM2Label"
  aria-hidden="true">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content" *ngIf="editPRCM2.isShown">
      <div class="modal-header">
        <button type="button" class="close pull-right" aria-label="Close" (click)="editPRCM2.hide()">
          <span aria-hidden="true">Ã—</span>
        </button>
        <h4 class="modal-title w-100" id="myModalLabel">Edit Principal Care Patient</h4>
      </div>
      <div class="modal-body">
        <div class="task-patient-info mb-3">
          <div class="row">
            <div class="col-lg-6">
              <p><strong>Patient: </strong>{{ editViewData.fullName }}</p>
              <p><strong>DOB: </strong>{{ editViewData.dateOfBirth | dateFormatPipe }}</p>
            </div>
            <div class="col-lg-6">
              <p><strong>EMR ID: </strong>{{ editViewData.patientEmrId }}</p>
              <div>
                <p>
                  <strong>PCM Billing Provider: </strong>{{ editViewData.end_PrCMSpecialistBillerName }}
                </p>
              </div>
            </div>
          </div>
          <div class="task-form mt-3">
            <div class="row">
              <div class="col-lg-6">
                <div class="d-flex form-group">
                  <label for="spe" style="width: 155px;" class="flex-shrink-0">Endo Specialist <sup
                      class="text-danger">*</sup></label>
                  <ng-select class="w-100 ng-select-small ml-3" [loading]="isLoadingPayersList"
                    [(ngModel)]="editPRCMDto.prCMSpecialistBillerId" id="spe" [multiple]="false" [searchable]="true"
                    placeholder="Specialist Biller ">
                    <!-- <ng-option [value]="0">All</ng-option> -->
                    <ng-option [value]="item.id"
                      *ngFor="let item of (facilityUsersList | filterFUsersByRole: 'Biller')">{{item.lastName}},{{item.firstName}} </ng-option>
                  </ng-select>
                </div>
                <!-- <div class="d-flex form-group" *ngIf="editPRCMDto.PRCMStatus == 4">
                  <label style="width: 155px;" class="flex-shrink-0">Psychiatrist </label>
                  <input class="form-control form-control-sm" [(ngModel)]="editPRCMDto.gPRCMPsychiatrist" type="text">

                </div> -->
              </div>
              <div class="col-lg-6">
                <div class="d-flex form-group ">
                  <label for="taskType" style="width: 155px;" class="flex-shrink-0">Status <sup
                      class="text-danger">*</sup></label>
                  <ng-select class="w-100 ng-select-small ml-3" [(ngModel)]="editPRCMDto.prCMStatus" required
                    name="type" [multiple]="false" [searchable]="true" placeholder="Status">
                    <!-- <ng-option [value]="-1">All</ng-option> -->
                    <ng-option *ngFor="let item of PRCMStatusList" [value]="item.number">{{ item.word }}</ng-option>
                  </ng-select>
                </div>
              </div>
              <div class="col-lg-6">
                <div class="d-flex form-group">
                  <label for="taskType" style="width: 155px;" class="flex-shrink-0">Endo Coordinator <sup
                      class="text-danger">*</sup></label>
                  <ng-select class="w-100 ng-select-small ml-3" [(ngModel)]="editPRCMDto.prCMCareCoordinatorId"
                    [closeOnSelect]="true" [multiple]="true" [searchable]="true" placeholder="Care Coordinator">
                    <!-- <ng-option [value]="0">All </ng-option> -->
                    <ng-option *ngFor="let item of (facilityUsersList | filterFUsersByRole: 'Care Coordinator')"
                      [value]="item.id">{{item.lastName}},{{item.firstName}}
                    </ng-option>
                  </ng-select>
                </div>
              </div>
              <div class="col-lg-6">
                <div class="d-flex form-group">
                  <label for="taskType" style="width: 155px;" class="flex-shrink-0">Endo Facilitator <sup
                      class="text-danger">*</sup></label>
                  <ng-select class="w-100 ng-select-small ml-3" [(ngModel)]="editPRCMDto.prCMCareFacilitatorId"
                    [closeOnSelect]="true" [multiple]="false" [searchable]="true" placeholder="Clinical Facilitator">
                    <!-- <ng-option [value]="0">All </ng-option> -->
                    <ng-option *ngFor="let item of (facilityUsersList | filterFUsersByRole: 'Care Facilitator')"
                      [value]="item.id">{{item.lastName}},{{item.firstName}}
                    </ng-option>
                  </ng-select>
                </div>
              </div>

            </div>
            <div class="row">
              <div class="col-12  pt-2">
                <h5 class="modal-title border-bottom mb-3 w-100">Diagnoses</h5>
              </div>
              <div class="col-lg-12">
                <div class="d-flex form-group flex-wrap">
                  <label for="taskType" style="width: 155px;" class="flex-shrink-0 mr-3">Diagnoses <sup
                    class="text-danger">*</sup> </label>
                  <ng-select class="flex-1 flex-grow-1 ng-select-small ng-select-wrap" [closeOnSelect]="false" [multiple]="true"
                    [(ngModel)]="patientSelectedIcd10Code" [searchable]="true" placeholder="Diagnose">
                    <!-- <ng-option [value]="0">All </ng-option> -->
                    <ng-option *ngFor="let item of (patientDiagnosesList)" [value]="item.icdCode">{{ item.icdCode }} {{
                      item.description }}
                    </ng-option>
                  </ng-select>
                </div>
              </div>
              <div class="col-lg-12">
                <div class="d-flex form-group flex-wrap">
                  <label for="taskType" style="width: 155px;" class="flex-shrink-0 mr-3">Add Diagnoses </label>
                  <div class="flex-1">
                    <ng-select class="flex-1 flex-grow-1 ng-select-small ng-select-wrap" [closeOnSelect]="true"
                      [multiple]="false" [(ngModel)]="selectedCronicDisease" [searchable]="true" placeholder="Diagnose">
                      <!-- <ng-option [value]="0">All </ng-option> -->
                      <ng-option *ngFor="let item of (patientChronicConditionsForEdit)" [value]="item">{{
                        item.icdCode }} {{ item.detail }}
                      </ng-option>
                    </ng-select>
                    <div class="mt-2">
                      <mdb-checkbox [disabled]="!selectedCronicDisease || !selectedCronicDisease.icdCode" [default]="true"
                      [(ngModel)]="diagnose.isChronic" [checked]="false">Is Chronic</mdb-checkbox>
                    </div>

                  </div>

                </div>
              </div>
            </div>
            <div class="w-100" *ngIf="patientChronicConditionsForEdit && patientChronicConditionsForEdit.length > 0">
              <div class="file-field mr-3 d-flex flex-wrap align-items-center">
                <div *ngFor="let item of patientChronicConditionsForEdit">
                  <div class="file-item mb-1 mr-1" *ngIf="item.isPrCMDiagnose">
                    <ng-container>
                      <small class="mb-0">{{ item.icdCode }} {{ item.detail }}<a><span
                            (click)="removeICDCodes(item.icdCode)" class="ml-1 text-white text-times-custom">Ã—</span>
                        </a>
                      </small>
                    </ng-container>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- <p><strong>ICD Codes</strong></p> -->
      </div>

      <div class="modal-footer">
        <button type="button" class="waves-light btn btn-sm btn-dynamic-secondary-2c" aria-label="Close"
          (click)="editPRCM2.hide()" mdbWavesEffect>
          Close
        </button>
        <button type="button" size="sm"
          [disabled]="editPRCMDto.prCMStatus == null || !editPRCMDto.prCMSpecialistBillerId || !editPRCMDto.prCMCareCoordinatorId
        || !editPRCMDto.prCMCareFacilitatorId || !patientSelectedIcd10Code || (patientSelectedIcd10Code && (patientSelectedIcd10Code.length == 0  && tempChronicIcd10Code.length == 0)) "
          mdbBtn class="btn btn-dynamic-2c btn-sm relative waves-light" (click)="assignPRCMData();adddiagnose()" mdbWavesEffect>
          <span *ngIf="PRCMDataSpinner" class="spinner-border spinner-border-sm" role="status" aria-hidden="true">
          </span>Save
          changes</button>
      </div>
    </div>
  </div>
</div>

<div mdbModal #quickEncounterModal="mdbModal" class="modal fade" tabindex="-1" role="dialog"
  aria-labelledby="myquickEncounterModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable" role="document">
    <div class="modal-content ">
      <div class="modal-header">
        <button type="button" class="close pull-right" aria-label="Close" (click)="quickEncounterModal.hide()">
          <span aria-hidden="true">Ã—</span>
        </button>
        <h4 class="modal-title w-100" id="myModalLabel">Service Name</h4>
      </div>
      <div class="modal-body">
        <ul class="status-list">
          <li (click)="quickEncounterModal.hide();resetEncounterModal(prcmEncounterModal, 0)">
            <a class="link">
              Initial Assessment
            </a>
          </li>
          <li (click)="quickEncounterModal.hide();resetEncounterModal(prcmEncounterModal, 1)">
            <a class="link">
              PCM Assessment
            </a>
          </li>
          <li (click)="quickEncounterModal.hide();resetEncounterModal(prcmEncounterModal, 2)">
            <a class="link">
              Help
            </a>
          </li>
          <li (click)="quickEncounterModal.hide();resetEncounterModal(prcmEncounterModal, 3)">
            <a class="link">
              Appointment
            </a>
          </li>
          <li (click)="quickEncounterModal.hide();resetEncounterModal(prcmEncounterModal, 4)">
            <a class="link">
              Medication Refill
            </a>
          </li>
          <li (click)="quickEncounterModal.hide();resetEncounterModal(prcmEncounterModal, 5)">
            <a class="link">
              Education
            </a>
          </li>
          <li (click)="quickEncounterModal.hide();resetEncounterModal(prcmEncounterModal, 6)">
            <a class="link">
              Community Resources
            </a>
          </li>
          <li (click)="quickEncounterModal.hide();resetEncounterModal(prcmEncounterModal, 7)">
            <a class="link">
              Urgent Visit/ED
            </a>
          </li>
          <li (click)="quickEncounterModal.hide();resetEncounterModal(prcmEncounterModal, 8)">
            <a class="link">
              Symptom Exacerbation
            </a>
          </li>
        </ul>
      </div>

      <div class="modal-footer">
        <button type="button" class="waves-light btn btn-sm btn-dynamic-secondary-2c" aria-label="Close"
          (click)="quickEncounterModal.hide()" mdbWavesEffect>Close</button>
      </div>
    </div>
  </div>
</div>

<div style="overflow-y:auto" mdbModal #prcmEncounterModal="mdbModal" class="modal fade" tabindex="-1" role="dialog"
  id="AlertModal" aria-labelledby="myBasicModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable flat-modal p-4" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close pull-right" aria-label="Close" (click)="prcmEncounterModal.hide()">
          <span aria-hidden="true">Ã—</span>
        </button>
        <h4 class="text-dynamic-2c modal-title font-500 mr-3">Add Encounter</h4>
      </div>
      <div class="modal-body">
        <div class="encounter-body px-3">
          <div class="row">

            <div class="col-sm-6">
              <div class="input-group form-group">
                <label class="w-100">Date <sup class="text-danger">*</sup> </label>
                <input type="text" class="form-control form-control-sm" #dateDPicker56="dpDayPicker"
                  [dpDayPicker]="datePickerConfig2" [ngModel]="addPRCMEncounterDto.encounterDate | dateFormatPipe"
                  (ngModelChange)="addPRCMEncounterDto.encounterDate=$event" [theme]="'dp-material ccm-date-picker'"
                  [mode]="'day'" />
                <a (click)="dateDPicker56.api.open();" class="input-group-append">
                  <span class="input-group-text text-white bg-dynamic-2c"><i class="fa fa-calendar fa-lg"></i></span>
                </a>
              </div>
            </div>
            <div class="col-lg-3 pr-0 col-md-6 col-sm-6">
              <div class="form-group">
                <label class="w-100">Start Time <sup class="text-danger">*</sup> </label>
                <input type="text" class="form-control form-control-sm" #dateDpTime="dpDayPicker"
                  [dpDayPicker]="timePickerConfig" [(ngModel)]="addPRCMEncounterDto.startTime"
                  [theme]="'dp-material ccm-date-picker'" [mode]="'time'" />
              </div>
            </div>
            <div class="col-lg-3 col-md-6 col-sm-6">
              <div class="form-group">
                <label class="w-100">End Time <sup class="text-danger">*</sup> </label>
                <input type="text" readonly class="form-control form-control-sm"
                  [(ngModel)]="addPRCMEncounterDto.endTime">
              </div>
            </div>
            <div class="col-sm-6">
              <div class="form-group">
                <label class="w-100">Duration: <small class="text-info">Enter in Minutes</small></label>
                <input #durationInput [(ngModel)]="durationNO" OnlyNumbers type="number"
                  [readOnly]="!addPRCMEncounterDto.startTime" class="form-control form-control-sm"
                  (input)="durationChanged($event.target.value)">

              </div>
            </div>

            <div class="col-sm-6">
              <div class="form-group">
                <label>Endo Coordinator <sup class="text-danger">*</sup> </label>
                <ng-select [searchable]="true" [loading]="isLoadingPayersList" class="ng-select-small"
                  [(ngModel)]="addPRCMEncounterDto.prCMCareCoordinatorId" placeholder="Select coordinator"
                  (click)="$event.stopPropagation();">
                  <ng-option *ngFor="let item of (facilityUsersList | filterFUsersByRole: 'Care Coordinator')"
                    [value]="item.id">{{item.lastName}},{{item.firstName}}
                  </ng-option>
                  <!-- <ng-option [value]="item.id" *ngFor="let item of prcmCoordinatorsList">{{item.firstName}}
                    {{item.lastName}}</ng-option> -->
                </ng-select>
              </div>
            </div>
            <div class="col-sm-6">
              <div class="form-group">
                <label>Endo Specialist <sup class="text-danger">*</sup> </label>
                <ng-select [searchable]="true" [loading]="isLoadingPayersList" class="ng-select-small"
                  [(ngModel)]="addPRCMEncounterDto.end_PrCMSpecialistBillerId" placeholder="Select Specialist"
                  (click)="$event.stopPropagation();">
                  <ng-option [value]="item.id"
                    *ngFor="let item of (facilityUsersList | filterFUsersByRole: 'Biller')">{{
                    item.firstName }} {{ item.lastName }} </ng-option>
                </ng-select>
                <!-- <ng-option [value]="item.id" *ngFor="let item of prcmSpecialistsList">{{item.firstName}}
                    {{item.lastName}}</ng-option> -->
                <!-- </ng-select> -->
              </div>

              <!-- <div class="form-group" *ngIf="PRCMStatus == 4">
                <label class="w-100">Psychiatrist </label>
                <input class="form-control form-control-sm" [(ngModel)]="addPRCMEncounterDto.gPRCMPsychiatrist" type="text">

              </div> -->
            </div>
            <div class="col-sm-6">
              <div class="form-group">
                <label>Endo Facilitator <sup class="text-danger">*</sup> </label>
                <ng-select [searchable]="true" [loading]="isLoadingPayersList" class="ng-select-small"
                  [(ngModel)]="addPRCMEncounterDto.end_PrCMCareFacilitatorId" placeholder="Select clinical Facilitator"
                  (click)="$event.stopPropagation();">
                  <ng-option *ngFor="let item of (facilityUsersList | filterFUsersByRole: 'Care Facilitator')"
                    [value]="item.id">{{item.lastName}},{{item.firstName}}
                  </ng-option>
                </ng-select>
              </div>
            </div>
            <div class="col-sm-6">
              <div class="form-group">
                <label>Service Name <sup class="text-danger">*</sup> </label>
                <ng-select [searchable]="true" class="ng-select-small"
                  [(ngModel)]="addPRCMEncounterDto.prCMServiceTypeId" placeholder="Select Service Type"
                  (click)="$event.stopPropagation();">

                  <ng-option [value]="0">Initial Assessment </ng-option>
                  <ng-option [value]="1">PCM Assessment </ng-option>
                  <ng-option [value]="2">Help </ng-option>
                  <ng-option [value]="3">Appointment </ng-option>
                  <ng-option [value]="4">Medication Refill </ng-option>
                  <ng-option [value]="5">Education </ng-option>
                  <ng-option [value]="6">Community Resources </ng-option>
                  <ng-option [value]="7">Urgent Visit/ED </ng-option>
                  <ng-option [value]="8">Symptom Exacerbation </ng-option>

                  <!-- <ng-option [value]="item.id" *ngFor="let item of serviceTypes">{{item.name}}</ng-option> -->
                </ng-select>
              </div>
            </div>
            <div class="col-sm-12">
              <div class="form-form form-group">
                <label for="form12">Notes <sup class="text-danger">*</sup> </label>
                <textarea type="text" style="min-height: 200px;" class="form-control form-control-sm" id="form12"
                  rows="6" [(ngModel)]="addPRCMEncounterDto.note"></textarea>
                <!-- <div class="invalid invalid-text">
                    <small *ngIf="encounterTimeForm.get('note').invalid && encounterTimeForm.get('note').touched"
                      class="text-danger">Please write some note.</small>
                  </div> -->
              </div>
            </div>

            <div class="col-sm-12 mt-2">
              <sup class="text-danger">*</sup>
              <div class="form-check pl-0 form-check-inline">
                <input [(ngModel)]="addPRCMEncounterDto.cptCode" name="TakeMedications" [value]="'G2064'" type="radio"
                  class="form-check-input" mdbInput id="TakeMedications1">
                <label class="form-check-label" for="TakeMedications1">G2064</label>
              </div>
              <div class="form-check pl-0 form-check-inline">
                <input [(ngModel)]="addPRCMEncounterDto.cptCode" name="TakeMedications" [value]="'G2065'" type="radio"
                  class="form-check-input" mdbInput id="TakeMedications2">
                <label class="form-check-label" for="TakeMedications2">G2065</label>
              </div>
              <!-- <div class="form-check pl-0 form-check-inline">
                <input [(ngModel)]="addPRCMEncounterDto.cptCode" name="TakeMedications"
                  [value]="'99484'" type="radio" class="form-check-input" mdbInput id="TakeMedications3">
                <label class="form-check-label" for="TakeMedications3">G PRCM (CPT 99484)</label>
              </div> -->
              <!-- <a id="tobaccoCessation" class="ml-3" container="body" [mdbPopover]="tobaccoCessation" placement="bottom"
              triggers="focus"><i class="fa fa-exclamation-circle text-success fa-lg"></i></a>
              <ng-template #tobaccoCessation>
                <div class="bg-dark text-white py-3 pl-3 pr-2">
                  <div class="who-covered" (click)="$event.stopPropagation()" [innerHTML]="PRCMINfoHtml"
                    malihu-scrollbar [scrollbarOptions]="scrollbarOptionsTimeline" style="max-height: 300px;"></div>
                </div>
              </ng-template> -->
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button *ngIf="addPRCMEncounterDto.id === 0"
          [disabled]="IsaddingEncounterLoading || !addPRCMEncounterDto.cptCode || !addPRCMEncounterDto.note || !addPRCMEncounterDto.startTime || !addPRCMEncounterDto.endTime
                   || !addPRCMEncounterDto.prCMCareCoordinatorId || !addPRCMEncounterDto.end_PrCMSpecialistBillerId || !addPRCMEncounterDto.end_PrCMCareFacilitatorId"
          type="submit" (click)="addPRCMEncounter(prcmEncounterModal)" mdbBtn class="btn btn-dynamic-2c btn-sm m-o">
          <span *ngIf="IsaddingEncounterLoading" class="spinner-border spinner-border-sm" role="status"
            aria-hidden="true"></span>
          Add Encounter</button>
      </div>
    </div>
  </div>
</div>


<div mdbModal #endoassignedDateModal="mdbModal" class="modal fade" tabindex="-1" role="dialog"
  (opened)="datPickerRef.openBtnClicked()" aria-labelledby="myBasicModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title w-100 text-center" id="myModalLabel">Assigned Date
        </h4>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-sm-12">
            <div class="input-group form-group mt-3">
              <label class="w-100">Patient Assigned Date<small class="text-danger">*</small></label>
              <mdb-date-picker #datPickerRef class="custom-datepicker" [options]="myDatePickerOptions"
                [(ngModel)]="assignedDateProp" [outlineInput]="true" [inline]="true" name="mydate"
                [placeholder]="'Patient Assiged Date'">
              </mdb-date-picker>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" [disabled]="assigningDate" class="waves-light btn btn-sm btn-dynamic-2c"
          aria-label="Close" (click)="SaveAssignedDate(endoassignedDateModal);" mdbWavesEffect> <span *ngIf="assigningDate"
            class="mr-1 spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Save</button>
        <button type="button" class="waves-light btn btn-sm btn-dynamic-secondary-2c" aria-label="Close"
          (click)="endoassignedDateModal.hide()" mdbWavesEffect>Close</button>
        <!-- <butmdbModalton type="button" mdbBtn color="priary" (click)="addRequiredData()" class="relative waves-light"
          mdbWavesEffect>Add Data</button> -->
      </div>
    </div>
  </div>
</div>
